<html><head></head><body><div hidden="" by-polymer-bundler=""><script>(function(){var a=Math.floor;let b={};b.palette=['#001f3f','#0074D9','#7FDBFF','#39CCCC','#3D9970','#2ECC40','#01FF70','#FFDC00','#FF851B','#FF4136','#85144b','#F012BE','#B10DC9','#111111','#AAAAAA','#DDDDDD'],b.getColor=function(a){return b.palette[a%b.palette.length]},b.rgb2hex=function(a,c,d){function b(a){let b=a.toString(16);return 1==b.length?'0'+b:b}return'#'+b(a)+b(c)+b(d)},b.hsv2rgb=function(c,d,e){let h,j,g,b=a(6*c),i=6*c-b,f=e*(1-d),k=e*(1-i*d),l=e*(1-(1-i)*d);switch(b%6){case 0:h=e,j=l,g=f;break;case 1:h=k,j=e,g=f;break;case 2:h=f,j=e,g=l;break;case 3:h=f,j=k,g=e;break;case 4:h=l,j=f,g=e;break;case 5:h=e,j=f,g=k;}return[255*h,255*j,255*g]},b.rgb2hsv=function(a,c,e){let b,f,g,h=a/255,i=c/255,j=e/255,k=Math.max(h,i,j),l=Math.min(h,i,j),m=k-l;return g=k,0==m?(b=0,f=0):(f=m/g,k===h?b=(i-j+m*(i<j?6:0))/6*m:k===i?b=(j-h+2*m)/6*m:k===j?b=(h-i+4*m)/6*m:void 0),[b,f,g]},b.hsvGradientFromRgbColors=function(c,d,e){let f=b.rgb2hsv(c.r,c.g,c.b),g=b.rgb2hsv(d.r,d.g,d.b);c.h=f[0],c.s=f[1],c.v=f[2],d.h=g[0],d.s=g[1],d.v=g[2];let h=b.hsvGradient(c,d,e);for(let f in h)h[f]&&(h[f].rgb=b.hsv2rgb(h[f].h,h[f].s,h[f].v),h[f].r=a(h[f].rgb[0]),h[f].g=a(h[f].rgb[1]),h[f].b=a(h[f].rgb[2]));return console.debug('[warp10-color-tools] hsvGradientFromRgbColors',{c1:c,c2:d,steps:e,gradient:h}),h},b.hsvGradient=function(a,b,c){let d=Array(c),e=a.h>=b.h?a.h-b.h:1+a.h-b.h,f=a.h>=b.h?1+b.h-a.h:b.h-a.h;for(let g,j=0;j<c;j++){g=f<=e?a.h+f*j/(c-1):a.h-e*j/(c-1),0>g&&(g=1+g),1<g&&--g;let i=(1-j/(c-1))*a.s+j/(c-1)*b.s,k=(1-j/(c-1))*a.v+j/(c-1)*b.v;d[j]={h:g,s:i,v:k}}return d},window.warp10ColorTools=b}).call();</script><script>(function(){let a={};a.MIN_TS=0,a.MAX_TS=9007199254740991,a.getRange=function(){},a.getAnnotations=function(b,c){let d=a.getValidResponse(b);if(!d)return[];a.debug&&console.log('[warp10-quantumviz-tools] getAnnotations - response',d);let e=[];for(let f=0;f<d.gts.length;f++)if(gtsTools.isGtsToAnnotate(d.gts[f])){let b=a.gtsToAnnotation(d.gts[f],c);b.key=void 0!==d.params&&void 0!==d.params[f].key?d.params[f].key:b.c+JSON.stringify(b.l),b.color=void 0!==d.params&&void 0!==d.params[f].color?d.params[f].color:warp10ColorTools.getColor(f),e.push(b)}return a.debug&&console.log('[warp10-quantumviz-tools] getAnnotations - annotations',e),e},a.gtsToAnnotation=function(a,b){let c={c:a.c,l:a.l,id:a.id,values:[],key:' '+a.id+' - '+a.c+(null!==a.l)?' - '+JSON.stringify(a.l):''};if(a.v!==void 0){gtsTools.gtsSort(a);for(let d=0;d<a.v.length;d++){let e=a.v[d],f=e[0];b||(f=Math.round(f/1e3)),c.values.push({x:f,y:e[e.length-1]})}}return c},a.getValidResponse=function(b){return a.isValidDetailedResponse(b)?(a.debug&&console.log('[warp10-quantumviz-tools] getValidResponse - isValidDetailedResponse',b),{gts:b[0].gts,params:b[0].params,globalParams:b[0].globalParams||{}}):a.isValidParamlessDetailedResponse(b)?(a.debug&&console.log('[warp10-quantumviz-tools] getValidResponse - isValidParamlessDetailedResponse',b),{gts:b[0].gts,params:b[0].gts.map(function(){return{}}),globalParams:b[0].globalParams||{}}):a.isValidSingleDetailedResponse(b)?(a.debug&&console.log('[warp10-quantumviz-tools] getValidResponse - isValidSingleDetailedResponse',b),{gts:[b[0].gts],params:[b[0].params],globalParams:b[0].globalParams||{}}):a.isValidParamlessSingleDetailedResponse(b)?(a.debug&&console.log('[warp10-quantumviz-tools] getValidResponse - isValidParamlessSingleDetailedResponse',b),{gts:[b[0].gts],params:[{}],globalParams:b[0].globalParams||{}}):a.isValidGtsListResponse(b)?(a.debug&&console.log('[warp10-quantumviz-tools] getValidResponse - isValidGtsListResponse',b),a.debug&&console.log({gts:b,params:b.forEach(function(){return{}}),globalParams:b[0].globalParams}),{gts:b,params:b.map(function(){return{}}),globalParams:{}}):a.isValidGtsResponse(b)?(a.debug&&console.log('[warp10-quantumviz-tools] getValidResponse - isValidGtsResponse',b),{gts:[b],params:[{}],globalParams:{}}):null},a.isValidResponse=function(b){return a.isValidDetailedResponse(b)?(a.debug&&console.log('[warp10-quantumviz-tools] isValidResponse - isValidDetailedResponse',b),!0):a.isValidParamlessDetailedResponse(b)?(a.debug&&console.log('[warp10-quantumviz-tools] isValidResponse - isValidParamlessDetailedResponse',b),!0):a.isValidSingleDetailedResponse(b)?(a.debug&&console.log('[warp10-quantumviz-tools] isValidResponse - isValidSingleDetailedResponse',b),!0):a.isValidParamlessSingleDetailedResponse(b)?(a.debug&&console.log('[warp10-quantumviz-tools] isValidResponse - isValidSingleDetailedResponse',b),!0):a.isValidGtsListResponse(b)?(a.debug&&console.log('[warp10-quantumviz-tools] isValidResponse - isValidGtsListResponse',b),!0):!!a.isValidGtsResponse(b)&&(a.debug&&console.log('[warp10-quantumviz-tools] isValidResponse - isValidGtsResponse',b),!0)},a.isValidGtsResponse=function(a){return gtsTools.isGts(a)},a.isValidGtsListResponse=function(b){if(!gtsTools.isArray(b)||0==b.length)return a.debug&&console.log('[warp10-quantumviz-tools] isValidGtsListResponse false - Response isn\'t an Array: ',b),!1;for(let c in b)if(!gtsTools.isGts(b[c]))return a.debug&&console.log('[warp10-quantumviz-tools] isValidGtsListResponse false - Invalid GTS: ',b[c]),!1;return!0},a.isValidSingleDetailedResponse=function(b){return gtsTools.isArray(b)&&1===b.length?(b=b[0],void 0===b.gts||void 0===b.params?(a.debug&&console.log('[warp10-quantumviz-tools] isValidSingleDetailedResponse false',b),!1):'object'!==typeof b.gts||'object'!==typeof b.params?(a.debug&&console.log('[warp10-quantumviz-tools] isValidSingleDetailedResponse false',b),!1):!0):(a.debug&&console.log('[warp10-quantumviz-tools] isValidSingleDetailedResponse false',b),!1)},a.isValidParamlessSingleDetailedResponse=function(b){return gtsTools.isArray(b)&&1===b.length?(b=b[0],void 0===b.gts?(a.debug&&console.log('[warp10-quantumviz-tools] isValidParamlessSingleDetailedResponse false',b),!1):'object'===typeof b.gts||(a.debug&&console.log('[warp10-quantumviz-tools] isValidParamlessSingleDetailedResponse false',b),!1)):(a.debug&&console.log('[warp10-quantumviz-tools] isValidParamlessSingleDetailedResponse false',b),!1)},a.isValidDetailedResponse=function(b){return(a.debug&&console.log('[warp10-quantumviz-tools] isValidDetailedResponse',b),!gtsTools.isArray(b)||1!==b.length)?(a.debug&&console.log('[warp10-quantumviz-tools] isValidDetailedResponse false',b),!1):(b=b[0],void 0===b.gts||void 0===b.params?(a.debug&&console.log('[warp10-quantumviz-tools] isValidDetailedResponse false',b),!1):gtsTools.isArray(b.gts)&&gtsTools.isArray(b.params)?b.gts.length===b.params.length||(a.debug&&console.log('[warp10-quantumviz-tools] isValidDetailedResponse false',b),!1):(a.debug&&console.log('[warp10-quantumviz-tools] isValidDetailedResponse false',b),!1))},a.isValidParamlessDetailedResponse=function(b){return(a.debug&&console.log('[warp10-quantumviz-tools] isValidParamlessDetailedResponse',b),!gtsTools.isArray(b)||1!==b.length)?(a.debug&&console.log('[warp10-quantumviz-tools] isValidParamlessDetailedResponse false',b),!1):(b=b[0],void 0===b.gts?(a.debug&&console.log('[warp10-quantumviz-tools] isValidParamlessDetailedResponse false',b),!1):!!gtsTools.isArray(b.gts)||(a.debug&&console.log('[warp10-quantumviz-tools] isValidParamlessDetailedResponse false',b),!1))},a.getGtsListRange=function(b){let c=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(let d in b){if(!gtsTools.isGts(b[d]))break;let e=gtsTools.gtsTimeRange(b[d]);a.debug&&console.log('[quantumviz-tools] getGtsListRange - gtsRange',e),e&&(e[0]<c[0]&&(c[0]=e[0]),e[1]>c[1]&&(c[1]=e[1]))}return a.debug&&console.log('[quantumviz-tools] getGtsListRange',c),c},window.quantumvizGts=a}).call();</script><script>const Warp10DisplayMixin=(a)=>class extends Polymer.mixinBehaviors([Polymer.IronResizableBehavior],a){static get properties(){return{data:{type:Object,notify:!0,observer:'dataChanged'},currentValues:{type:Object,notify:!0,observer:'currentValuesChanged'},lineWidth:{type:Number,value:1.75},hideAxis:{type:Boolean,value:!1},hideTooltip:{type:Boolean,value:!1},showLegend:{type:Boolean,value:!1},timeBounds:{type:Object,notify:!0},valueBounds:{type:Object,notify:!0},chartArea:{type:Array,notify:!0},timezone:{type:String},tooltip:{type:String,observer:'tooltipChanged',notify:!0,value:''},yLowerBound:{type:Number},yUpperBound:{type:Number},timestamps:{type:Boolean,value:!1},debug:{type:Boolean,value:!0},_params:{type:Object,value:function(){return{}}},_MIN_LINE_WIDTH:{type:Number,value:1},_MAX_LINE_WIDTH:{type:Number,value:20},_DEFAULT_WIDTH:{type:Number,value:480},_DEFAULT_HEIGHT:{type:Number,value:320}}}static get observers(){return['dataChanged(data.*, timestamps)']}ready(){super.ready(),this.addEventListener('iron-resize',(a)=>this._onIronResize(a)),this.addEventListener('resize',(a)=>this._onIronResize(a))}connectedCallback(){super.connectedCallback(),Polymer.RenderStatus.beforeNextRender(this,()=>{this.debug&&console.log('[warp10-display-mixin] connectedCallback -  clientHeight',this.clientHeight),this.configure(),this.isReady=!0,null!==this.data&&this.dataChanged()})}_onIronResize(){this.debug&&console.log('[warp10-display-mixin] _onIronResize - OMG, I got resized!')}dataChanged(){if(!this.isReady)return;let a=this;this._debouncer=Polymer.Debouncer.debounce(this._debouncer,Polymer.Async.timeOut.after(100),()=>{a.debug&&console.log('[warp10-display-mixin] dataChanged() - ',a.data),a._dataToChart()})}configure(){this.debug&&console.log('[warp10-display-mixin] configure'),0===this.clientWidth&&this.updateStyles({"--default-width":this._DEFAULT_WIDTH+'px'}),0===this.clientHeight&&this.updateStyles({"--default-height":this._DEFAULT_HEIGHT+'px'}),this.updateStyles({"--tooltip-width":Math.max(400,2*this.getChart().getBoundingClientRect().width/3).toString()+'px'}),(this.lineWidth<this._MIN_LINE_WIDTH||this.lineWidth>this._MAX_LINE_WIDTH)&&(this.lineWidth=1.5),this.debug&&console.log('[warp10-display-mixin] configure -lineWidth',this.lineWidth)}_removeChartData(){this.debug&&console.log('[warp10-display-mixin] _removeChartData'),this.chart&&(this.chart.destroy(),this.chart=null)}_dataToChart(){var a=Math.floor;if(this.debug&&console.log('[warp10-display-mixin] _dataToChart',{data:this.data}),!this.data)return this.debug&&console.log('[warp10-display-mixin] No data'),void this._removeChartData();if('string'===typeof this.data&&(this.data=looseJSON.parse(this.data),Array.isArray('array'===this.data)&&(this.data=this.data[0]),this.debug&&console.log('[warp10-display-chart] _dataToChart - Data from String',this.data)),!quantumvizGts.isValidResponse(this.data))return void this._removeChartData();let b={};b=quantumvizGts.getValidResponse(this.data),this.debug&&console.log('[warp10-display-mixin] _dataToChart - Data to plot',b);let c=quantumvizGts.getGtsListRange(b.gts);this.timeBounds=this.timestamps?{min:c[0],max:c[1]}:{min:new Date(a(c[0]/1e3)),max:new Date(a(c[1]/1e3))},this.debug&&console.log('[warp10-display-mixin] _dataToChart - timeBounds',this.timeBounds);let d={gts:[],params:[],globalParams:b.globalParams};for(let a=0;a<b.gts.length;a++)this.debug&&console.log('[warp10-display-mixin] _dataToChart - gtsTools.isGtsToPlot',gtsTools.isGtsToPlot(b.gts[a]),b.gts[a]),gtsTools.isGtsToPlot(b.gts[a])&&(d.gts.push(b.gts[a]),d.params.push(b.params[a]));return this.debug&&console.log('[warp10-display-mixin] _dataToChart - Filtered data to plot',d),0===d.gts.length?void this._removeChartData():void(this._getParamsFromData(d),this._dataToChartLib(d))}_getParamsFromData(a){let b=[],c=[],d=[],e=[];for(let f=0;f<a.params.length;f++){if(this.debug&&(console.log('[warp10-display-mixin]  quantumvizObj.gts',a.gts[f]),console.log('[warp10-display-mixin]  quantumvizObj.params',a.params[f])),void 0!==a.gts[f].a){let b=a.gts[f].a;for(let c in b)b.hasOwnProperty(c)&&0<=['string','number'].indexOf(typeof b[c])&&c.startsWith('quantum-')&&(a.params[f][c.replace('quantum-','')]=b[c])}if(void 0!==a.gts[f].a&&void 0!==a.gts[f].a.quantumParams){let b=a.gts[f].a.quantumParams;for(let c in'string'===typeof a.gts[f].a.quantumParams&&(b=looseJSON.parse(a.gts[f].a.quantumParams)),b)b.hasOwnProperty(c)&&(a.params[f][c]=b[c])}void 0===a.params[f].key?(this.debug&&console.log('[warp10-display-mixin] _dataToChart -  key',a.gts[f]),b[f]=gtsTools.serializeGtsMetadata(a.gts[f])):b[f]=a.params[f].key,c[f]=void 0===a.params[f].color?warp10ColorTools.getColor(f):a.params[f].color,d[f]=void 0===a.params[f].interpolate?void 0===a.globalParams.interpolate?'line':a.globalParams.interpolate:a.params[f].interpolate,e[f]=void 0===a.params[f].strokeWidth?void 0===a.globalParams.lineWidth?this.lineWidth:a.globalParams.strokeWidth:a.params[f].strokeWidth}let f=a.globalParams.xLabel,g=a.globalParams.yLabel,h=a.globalParams.tickList;this._params={labels:b,colors:c,interpolate:d,strokeWidth:e,xlabel:f,ylabel:g,tickList:h},this.debug&&console.log('[warp10-display-mixin] _dataToChart - _params',a.globalParams,this._params),a.globalParams.timestamps&&(this.timestamps=!0)}};</script><script>const GraniteJsDependenciesGrabberMixin=(a)=>class extends a{static get properties(){return{history:{type:String,value:'',notify:!0},debug:{type:Boolean,value:!1}}}connectedCallback(){super.connectedCallback()}_getDependency(a){return()=>new Promise(a)}_getDependencyPromiseResolve(a,b){return(c)=>{'undefined'===typeof window[a]?(this.debug&&console.log('[GraniteJsDependenciesGrabberMixin] _getDependency - unmet',a),this.history+=`_getDependency - unmet ${a} <br>`,window[`_downloading_${a}`]?this._waitToLoadDependency(a,b,c):(window[`_downloading_${a}`]=!0,this._loadDependency(a,b,c))):(this.debug&&console.log('[GraniteJsDependenciesGrabberMixin] _getDependency - found',a),this.history+=`_getDependency - found ${a} <br>`,this.dispatchEvent(new CustomEvent('dependency-is-ready',{detail:{name:a,url:b}})),c())}}_loadDependency(a,b,c){var d=document.createElement('script');d.src=this.resolveUrl(b),d.onload=()=>{this.debug&&console.log('[GraniteJsDependenciesGrabberMixin] _loadDependency - loaded',a),this.history+=`_loadDependency - loaded ${a} <br>`,this._waitToLoadDependency(a,b,c)},document.body.appendChild(d)}_waitToLoadDependency(a,b,c){'undefined'===typeof window[a]?window.setTimeout(()=>{this._waitToLoadDependency(a,b,c)},5):(this.debug&&console.log('[GraniteJsDependenciesGrabberMixin] _waitToLoadDependency - got',a),this.history+=`_waitToLoadDependency - got ${a} <br>`,this.dispatchEvent(new CustomEvent('dependency-is-ready',{detail:{name:a,url:b}})),c())}};</script><dom-module id="granite-js-dependencies-grabber" assetpath="../granite-js-dependencies-grabber/"><script>class GraniteJsDependenciesGrabber extends GraniteJsDependenciesGrabberMixin(Polymer.Element){static get is(){return'granite-js-dependencies-grabber'}static get properties(){return{dependencies:{type:Array,observer:'_onDependenciesChange',value:()=>[]}}}_onDependenciesChange(){if(!this.dependencies||0==this.dependencies.length)return;if(!this._areValidDependencies)return this.console.error('[granite-js-dependencies-grabber] Dependencies list malformed'),void(this.history+='Dependencies list malformed <br>');let a=Promise.resolve();this.dependencies.forEach((b)=>{this.debug&&console.log(`Adding dependency ${b.name} to chain`),this.history+=`Adding dependency ${b.name} to chain <br>`,a=a.then(this._getDependency(this._getDependencyPromiseResolve(b.name,b.url)))})}_areValidDependencies(){return this.dependencies.forEach((a)=>{if(!a.name||'string'!=typeof a.name||!a.url||'string'!=typeof a.url)return!1}),!0}connectedCallback(){super.connectedCallback()}}window.customElements.define(GraniteJsDependenciesGrabber.is,GraniteJsDependenciesGrabber);</script></dom-module><script>(function(e){'use strict';for(var t={},a=function(){},i=['memory'],n=['assert','clear','count','debug','dir','dirxml','error','exception','group','groupCollapsed','groupEnd','info','log','markTimeline','profile','profiles','profileEnd','show','table','time','timeEnd','timeline','timelineEnd','timeStamp','trace','warn'],o,s;o=i.pop();)e[o]=e[o]||t;for(;s=n.pop();)e[s]=e[s]||a})(this.console=this.console||{}),function(){'use strict';CanvasRenderingContext2D.prototype.installPattern=function(e){if('undefined'!==typeof this.isPatternInstalled)throw'Must un-install old line pattern before installing a new one.';this.isPatternInstalled=!0;var t=[0,0],a=[],i=this.beginPath,n=this.lineTo,o=this.moveTo,s=this.stroke;this.uninstallPattern=function(){this.beginPath=i,this.lineTo=n,this.moveTo=o,this.stroke=s,this.uninstallPattern=void 0,this.isPatternInstalled=void 0},this.beginPath=function(){a=[],i.call(this)},this.moveTo=function(e,t){a.push([[e,t]]),o.call(this,e,t)},this.lineTo=function(e,t){var i=a[a.length-1];i.push([e,t])},this.stroke=function(){if(0===a.length)return void s.call(this);for(var r=0;r<a.length;r++)for(var i=a[r],l=i[0][0],d=i[0][1],p=1;p<i.length;p++){var h=i[p][0],g=i[p][1];this.save();var c=h-l,u=g-d,y=Math.sqrt(c*c+u*u),_=Math.atan2(u,c);this.translate(l,d),o.call(this,0,0),this.rotate(_);for(var f=t[0],m=0,x;y>m;)x=e[f],m+=t[1]?t[1]:x,m>y?(t=[f,m-y],m=y):t=[(f+1)%e.length,0],0===f%2?n.call(this,m,0):o.call(this,m,0),f=(f+1)%e.length;this.restore(),l=h,d=g}s.call(this),a=[]}},CanvasRenderingContext2D.prototype.uninstallPattern=function(){throw'Must install a line pattern before uninstalling it.'}}();var DygraphOptions=function(){return'undefined'===typeof DEBUG&&(DEBUG=!0),function(){'use strict';var e=function(e){this.dygraph_=e,this.yAxes_=[],this.xAxis_={},this.series_={},this.global_=this.dygraph_.attrs_,this.user_=this.dygraph_.user_attrs_||{},this.labels_=[],this.highlightSeries_=this.get('highlightSeriesOpts')||{},this.reparseSeries()};if(e.AXIS_STRING_MAPPINGS_={y:0,Y:0,y1:0,Y1:0,y2:1,Y2:1},e.axisToIndex_=function(t){if('string'==typeof t){if(e.AXIS_STRING_MAPPINGS_.hasOwnProperty(t))return e.AXIS_STRING_MAPPINGS_[t];throw'Unknown axis : '+t}if('number'==typeof t){if(0===t||1===t)return t;throw'Dygraphs only supports two y-axes, indexed from 0-1.'}if(t)throw'Unknown axis : '+t;return 0},e.prototype.reparseSeries=function(){var t=this.get('labels');if(t){this.labels_=t.slice(1),this.yAxes_=[{series:[],options:{}}],this.xAxis_={options:{}},this.series_={};var a=!this.user_.series;if(a){for(var i=0,n=0;n<this.labels_.length;n++){var o=this.labels_[n],s=this.user_[o]||{},r=0,l=s.axis;'object'==typeof l&&(r=++i,this.yAxes_[r]={series:[o],options:l}),l||this.yAxes_[0].series.push(o),this.series_[o]={idx:n,yAxis:r,options:s}}for(var n=0;n<this.labels_.length;n++){var o=this.labels_[n],s=this.series_[o].options,l=s.axis;if('string'==typeof l){if(!this.series_.hasOwnProperty(l))return void console.error('Series '+o+' wants to share a y-axis with series '+l+', which does not define its own axis.');var r=this.series_[l].yAxis;this.series_[o].yAxis=r,this.yAxes_[r].series.push(o)}}}else for(var n=0;n<this.labels_.length;n++){var o=this.labels_[n],s=this.user_.series[o]||{},r=e.axisToIndex_(s.axis);this.series_[o]={idx:n,yAxis:r,options:s},this.yAxes_[r]?this.yAxes_[r].series.push(o):this.yAxes_[r]={series:[o],options:{}}}var d=this.user_.axes||{};Dygraph.update(this.yAxes_[0].options,d.y||{}),1<this.yAxes_.length&&Dygraph.update(this.yAxes_[1].options,d.y2||{}),Dygraph.update(this.xAxis_.options,d.x||{}),DEBUG&&this.validateOptions_()}},e.prototype.get=function(e){var t=this.getGlobalUser_(e);return null===t?this.getGlobalDefault_(e):t},e.prototype.getGlobalUser_=function(e){return this.user_.hasOwnProperty(e)?this.user_[e]:null},e.prototype.getGlobalDefault_=function(e){return this.global_.hasOwnProperty(e)?this.global_[e]:Dygraph.DEFAULT_ATTRS.hasOwnProperty(e)?Dygraph.DEFAULT_ATTRS[e]:null},e.prototype.getForAxis=function(e,t){var a,i;if('number'==typeof t)a=t,i=0===a?'y':'y2';else{if('y1'==t&&(t='y'),'y'==t)a=0;else if('y2'==t)a=1;else if('x'==t)a=-1;else throw'Unknown axis '+t;i=t}var n=-1==a?this.xAxis_:this.yAxes_[a];if(n){var o=n.options;if(o.hasOwnProperty(e))return o[e]}if('x'!==t||'logscale'!==e){var s=this.getGlobalUser_(e);if(null!==s)return s}var r=Dygraph.DEFAULT_ATTRS.axes[i];return r.hasOwnProperty(e)?r[e]:this.getGlobalDefault_(e)},e.prototype.getForSeries=function(e,t){if(t===this.dygraph_.getHighlightSeries()&&this.highlightSeries_.hasOwnProperty(e))return this.highlightSeries_[e];if(!this.series_.hasOwnProperty(t))throw'Unknown series: '+t;var a=this.series_[t],i=a.options;return i.hasOwnProperty(e)?i[e]:this.getForAxis(e,a.yAxis)},e.prototype.numAxes=function(){return this.yAxes_.length},e.prototype.axisForSeries=function(e){return this.series_[e].yAxis},e.prototype.axisOptions=function(e){return this.yAxes_[e].options},e.prototype.seriesForAxis=function(e){return this.yAxes_[e].series},e.prototype.seriesNames=function(){return this.labels_},DEBUG){e.prototype.validateOptions_=function(){if('undefined'===typeof Dygraph.OPTIONS_REFERENCE)throw'Called validateOptions_ in prod build.';for(var e=this,t=function(t){Dygraph.OPTIONS_REFERENCE[t]||e.warnInvalidOption_(t)},a=[this.xAxis_.options,this.yAxes_[0].options,this.yAxes_[1]&&this.yAxes_[1].options,this.global_,this.user_,this.highlightSeries_],n=this.seriesNames(),o=0,i;o<n.length;o++)i=n[o],this.series_.hasOwnProperty(i)&&a.push(this.series_[i].options);for(var o=0,s;o<a.length;o++)if(s=a[o],s)for(var r in s)s.hasOwnProperty(r)&&t(r)};var t={};e.prototype.warnInvalidOption_=function(e){if(!t[e]){t[e]=!0;var a=0<=this.labels_.indexOf(e);if(a)console.warn('Use new-style per-series options (saw '+e+' as top-level options key). See http://bit.ly/1tceaJs');else throw console.warn('Unknown option '+e+' (full list of options at dygraphs.com/options.html'),'invalid option '+e}},e.resetWarnings_=function(){t={}}}return e}()}(),DygraphLayout=function(){'use strict';var e=function(e){this.dygraph_=e,this.points=[],this.setNames=[],this.annotations=[],this.yAxes_=null,this.xTicks_=null,this.yTicks_=null};return e.prototype.addDataset=function(e,t){this.points.push(t),this.setNames.push(e)},e.prototype.getPlotArea=function(){return this.area_},e.prototype.computePlotArea=function(){var t={x:0,y:0};t.w=this.dygraph_.width_-t.x-this.dygraph_.getOption('rightGap'),t.h=this.dygraph_.height_;var a={chart_div:this.dygraph_.graphDiv,reserveSpaceLeft:function(e){var a={x:t.x,y:t.y,w:e,h:t.h};return t.x+=e,t.w-=e,a},reserveSpaceRight:function(e){var a={x:t.x+t.w-e,y:t.y,w:e,h:t.h};return t.w-=e,a},reserveSpaceTop:function(e){var a={x:t.x,y:t.y,w:t.w,h:e};return t.y+=e,t.h-=e,a},reserveSpaceBottom:function(e){var a={x:t.x,y:t.y+t.h-e,w:t.w,h:e};return t.h-=e,a},chartRect:function(){return{x:t.x,y:t.y,w:t.w,h:t.h}}};this.dygraph_.cascadeEvents_('layout',a),this.area_=t},e.prototype.setAnnotations=function(e){this.annotations=[];for(var t=this.dygraph_.getOption('xValueParser')||function(e){return e},n=0,i;n<e.length;n++){if(i={},!e[n].xval&&void 0===e[n].x)return void console.error('Annotations must have an \'x\' property');if(e[n].icon&&!(e[n].hasOwnProperty('width')&&e[n].hasOwnProperty('height')))return void console.error('Must set width and height when setting annotation.icon property');Dygraph.update(i,e[n]),i.xval||(i.xval=t(i.x)),this.annotations.push(i)}},e.prototype.setXTicks=function(e){this.xTicks_=e},e.prototype.setYAxes=function(e){this.yAxes_=e},e.prototype.evaluate=function(){this._xAxis={},this._evaluateLimits(),this._evaluateLineCharts(),this._evaluateLineTicks(),this._evaluateAnnotations()},e.prototype._evaluateLimits=function(){var e=this.dygraph_.xAxisRange();this._xAxis.minval=e[0],this._xAxis.maxval=e[1];var t=e[1]-e[0];this._xAxis.scale=0===t?1:1/t,this.dygraph_.getOptionForAxis('logscale','x')&&(this._xAxis.xlogrange=Dygraph.log10(this._xAxis.maxval)-Dygraph.log10(this._xAxis.minval),this._xAxis.xlogscale=0===this._xAxis.xlogrange?1:1/this._xAxis.xlogrange);for(var a=0,i;a<this.yAxes_.length;a++)i=this.yAxes_[a],i.minyval=i.computedValueRange[0],i.maxyval=i.computedValueRange[1],i.yrange=i.maxyval-i.minyval,i.yscale=0===i.yrange?1:1/i.yrange,this.dygraph_.getOption('logscale')&&(i.ylogrange=Dygraph.log10(i.maxyval)-Dygraph.log10(i.minyval),i.ylogscale=0===i.ylogrange?1:1/i.ylogrange,(!isFinite(i.ylogrange)||isNaN(i.ylogrange))&&console.error('axis '+a+' of graph at '+i.g+' can\'t be displayed in log scale for range ['+i.minyval+' - '+i.maxyval+']'))},e.calcXNormal_=function(e,t,a){return a?(Dygraph.log10(e)-Dygraph.log10(t.minval))*t.xlogscale:(e-t.minval)*t.scale},e.calcYNormal_=function(e,t,a){if(a){var i=1-(Dygraph.log10(t)-Dygraph.log10(e.minyval))*e.ylogscale;return isFinite(i)?i:NaN}return 1-(t-e.minyval)*e.yscale},e.prototype._evaluateLineCharts=function(){for(var t=this.dygraph_.getOption('stackedGraph'),a=this.dygraph_.getOptionForAxis('logscale','x'),i=0;i<this.points.length;i++){for(var n=this.points[i],o=this.setNames[i],s=this.dygraph_.getOption('connectSeparatedPoints',o),r=this.dygraph_.axisPropertiesForSeries(o),l=this.dygraph_.attributes_.getForSeries('logscale',o),d=0,p;d<n.length;d++){p=n[d],p.x=e.calcXNormal_(p.xval,this._xAxis,a);var h=p.yval;t&&(p.y_stacked=e.calcYNormal_(r,p.yval_stacked,l),null!==h&&!isNaN(h)&&(h=p.yval_stacked)),null===h&&(h=NaN,!s&&(p.yval=NaN)),p.y=e.calcYNormal_(r,h,l)}this.dygraph_.dataHandler_.onLineEvaluated(n,r,l)}},e.prototype._evaluateLineTicks=function(){var e,t,a,i;for(this.xticks=[],e=0;e<this.xTicks_.length;e++)t=this.xTicks_[e],a=t.label,i=this.dygraph_.toPercentXCoord(t.v),0<=i&&1>i&&this.xticks.push([i,a]);for(this.yticks=[],e=0;e<this.yAxes_.length;e++)for(var n=this.yAxes_[e],o=0;o<n.ticks.length;o++)t=n.ticks[o],a=t.label,i=this.dygraph_.toPercentYCoord(t.v,e),0<i&&1>=i&&this.yticks.push([e,i,a])},e.prototype._evaluateAnnotations=function(){var e={},t;for(t=0;t<this.annotations.length;t++){var i=this.annotations[t];e[i.xval+','+i.series]=i}if(this.annotated_points=[],this.annotations&&this.annotations.length)for(var a=0,n;a<this.points.length;a++)for(n=this.points[a],t=0;t<n.length;t++){var o=n[t],s=o.xval+','+o.name;s in e&&(o.annotation=e[s],this.annotated_points.push(o))}},e.prototype.removeAllDatasets=function(){delete this.points,delete this.setNames,delete this.setPointsLengths,delete this.setPointsOffsets,this.points=[],this.setNames=[],this.setPointsLengths=[],this.setPointsOffsets=[]},e}(),DygraphCanvasRenderer=function(){'use strict';var t=function(e,t,a,i){if(this.dygraph_=e,this.layout=i,this.element=t,this.elementContext=a,this.height=e.height_,this.width=e.width_,!this.isIE&&!Dygraph.isCanvasSupported(this.element))throw'Canvas is not supported.';if(this.area=i.getPlotArea(),this.dygraph_.isUsingExcanvas_)this._createIEClipArea();else if(!Dygraph.isAndroid()){var n=this.dygraph_.canvas_ctx_;n.beginPath(),n.rect(this.area.x,this.area.y,this.area.w,this.area.h),n.clip(),n=this.dygraph_.hidden_ctx_,n.beginPath(),n.rect(this.area.x,this.area.y,this.area.w,this.area.h),n.clip()}};return t.prototype.clear=function(){var e;if(this.isIE)try{this.clearDelay&&(this.clearDelay.cancel(),this.clearDelay=null),e=this.elementContext}catch(t){return}e=this.elementContext,e.clearRect(0,0,this.width,this.height)},t.prototype.render=function(){this._updatePoints(),this._renderLineChart()},t.prototype._createIEClipArea=function(){function e(e){if(0!==e.w&&0!==e.h){var n=document.createElement('div');n.className=t,n.style.backgroundColor=i,n.style.position='absolute',n.style.left=e.x+'px',n.style.top=e.y+'px',n.style.width=e.w+'px',n.style.height=e.h+'px',a.appendChild(n)}}for(var t='dygraph-clip-div',a=this.dygraph_.graphDiv,n=a.childNodes.length-1;0<=n;n--)a.childNodes[n].className==t&&a.removeChild(a.childNodes[n]);for(var i=document.bgColor,o=this.dygraph_.graphDiv,s;o!=document;){if(s=o.currentStyle.backgroundColor,s&&'transparent'!=s){i=s;break}o=o.parentNode}var r=this.area;e({x:0,y:0,w:r.x,h:this.height}),e({x:r.x,y:0,w:this.width-r.x,h:r.y}),e({x:r.x+r.w,y:0,w:this.width-r.x-r.w,h:this.height}),e({x:r.x,y:r.y+r.h,w:this.width-r.x,h:this.height-r.h-r.y})},t._getIteratorPredicate=function(e){return e?t._predicateThatSkipsEmptyPoints:null},t._predicateThatSkipsEmptyPoints=function(e,t){return null!==e[t].yval},t._drawStyledLine=function(a,e,i,n,o,s,r){var l=a.dygraph,d=l.getBooleanOption('stepPlot',a.setName);Dygraph.isArrayLike(n)||(n=null);var p=l.getBooleanOption('drawGapEdgePoints',a.setName),h=a.points,g=a.setName,c=Dygraph.createIterator(h,0,h.length,t._getIteratorPredicate(l.getBooleanOption('connectSeparatedPoints',g))),u=n&&2<=n.length,y=a.drawingContext;y.save(),u&&y.installPattern(n);var _=t._drawSeries(a,c,i,r,o,p,d,e);t._drawPointsOnLine(a,_,s,e,r),u&&y.uninstallPattern(),y.restore()},t._drawSeries=function(t,e,a,n,o,s,r,l){var d=null,p=null,h=null,g=[],c=!0,u=t.drawingContext,y,_;u.beginPath(),u.strokeStyle=l,u.lineWidth=a;for(var x=e.array_,f=e.end_,m=e.predicate_,b=e.start_;b<f;b++){if(_=x[b],m){for(;b<f&&!m(x,b);)b++;if(b==f)break;_=x[b]}if(null===_.canvasy||_.canvasy!=_.canvasy)r&&null!==d&&(u.moveTo(d,p),u.lineTo(_.canvasx,p)),d=p=null;else{if(y=!1,s||!d){e.nextIdx_=b,e.next(),h=e.hasNext?e.peek.canvasy:null;var i=null===h||h!=h;y=!d&&i,s&&(!c&&!d||e.hasNext&&i)&&(y=!0)}null===d?u.moveTo(_.canvasx,_.canvasy):a&&(r&&(u.moveTo(d,p),u.lineTo(_.canvasx,p)),u.lineTo(_.canvasx,_.canvasy)),(o||y)&&g.push([_.canvasx,_.canvasy,_.idx]),d=_.canvasx,p=_.canvasy}c=!1}return u.stroke(),g},t._drawPointsOnLine=function(t,e,a,i,n){for(var o=t.drawingContext,s=0,r;s<e.length;s++)r=e[s],o.save(),a.call(t.dygraph,t.dygraph,t.setName,o,r[0],r[1],i,n,r[2]),o.restore()},t.prototype._updatePoints=function(){for(var e=this.layout.points,t=e.length,a;t--;){a=e[t];for(var i=a.length,n;i--;)n=a[i],n.canvasx=this.area.w*n.x+this.area.x,n.canvasy=this.area.h*n.y+this.area.y}},t.prototype._renderLineChart=function(e,t){var a=t||this.elementContext,n=this.layout.points,o=this.layout.setNames,s,i;this.colors=this.dygraph_.colorsMap_;var r=this.dygraph_.getOption('plotter'),l=r;Dygraph.isArrayLike(l)||(l=[l]);var d={};for(s=0;s<o.length;s++){i=o[s];var h=this.dygraph_.getOption('plotter',i);h==r||(d[i]=h)}for(s=0;s<l.length;s++)for(var g=l[s],c=s==l.length-1,u=0;u<n.length;u++)if(i=o[u],!(e&&i!=e)){var y=n[u],_=g;if(i in d)if(c)_=d[i];else continue;var p=this.colors[i],x=this.dygraph_.getOption('strokeWidth',i);a.save(),a.strokeStyle=p,a.lineWidth=x,_({points:y,setName:i,drawingContext:a,color:p,strokeWidth:x,dygraph:this.dygraph_,axis:this.dygraph_.axisPropertiesForSeries(i),plotArea:this.area,seriesIndex:u,seriesCount:n.length,singleSeriesName:e,allSeriesPoints:n}),a.restore()}},t._Plotters={linePlotter:function(a){t._linePlotter(a)},fillPlotter:function(a){t._fillPlotter(a)},errorPlotter:function(a){t._errorPlotter(a)}},t._linePlotter=function(a){var e=a.dygraph,i=a.setName,n=a.strokeWidth,o=e.getNumericOption('strokeBorderWidth',i),s=e.getOption('drawPointCallback',i)||Dygraph.Circles.DEFAULT,r=e.getOption('strokePattern',i),l=e.getBooleanOption('drawPoints',i),d=e.getNumericOption('pointSize',i);o&&n&&t._drawStyledLine(a,e.getOption('strokeBorderColor',i),n+2*o,r,l,s,d),t._drawStyledLine(a,a.color,n,r,l,s,d)},t._errorPlotter=function(a){var e=a.dygraph,i=a.setName,n=e.getBooleanOption('errorBars')||e.getBooleanOption('customBars');if(n){var o=e.getBooleanOption('fillGraph',i);o&&console.warn('Can\'t use fillGraph option with error bars');var s=a.drawingContext,r=a.color,l=e.getNumericOption('fillAlpha',i),d=e.getBooleanOption('stepPlot',i),p=a.points,h=Dygraph.createIterator(p,0,p.length,t._getIteratorPredicate(e.getBooleanOption('connectSeparatedPoints',i))),g=NaN,c=NaN,u=[-1,-1],y=Dygraph.toRGB_(r),_='rgba('+y.r+','+y.g+','+y.b+','+l+')',x;s.fillStyle=_,s.beginPath();for(var f=function(e){return null===e||void 0===e||isNaN(e)},m;h.hasNext;){if(m=h.next(),!d&&f(m.y)||d&&!isNaN(c)&&f(c)){g=NaN;continue}x=[m.y_bottom,m.y_top],d&&(c=m.y),isNaN(x[0])&&(x[0]=m.y),isNaN(x[1])&&(x[1]=m.y),x[0]=a.plotArea.h*x[0]+a.plotArea.y,x[1]=a.plotArea.h*x[1]+a.plotArea.y,isNaN(g)||(d?(s.moveTo(g,u[0]),s.lineTo(m.canvasx,u[0]),s.lineTo(m.canvasx,u[1])):(s.moveTo(g,u[0]),s.lineTo(m.canvasx,x[0]),s.lineTo(m.canvasx,x[1])),s.lineTo(g,u[1]),s.closePath()),u=x,g=m.canvasx}s.fill()}},t._fastCanvasProxy=function(e){var t=[],a=null,n=null,o=1,s=2,r=0,l=function(e){if(!(1>=t.length)){for(var a=t.length-1,i;0<a;a--)if(i=t[a],i[0]==s){var n=t[a-1];n[1]==i[1]&&n[2]==i[2]&&t.splice(a,1)}for(var a=0,i;a<t.length-1;)i=t[a],i[0]==s&&t[a+1][0]==s?t.splice(a,1):a++;if(2<t.length&&!e){var r=0;t[0][0]==s&&r++;for(var l=null,d=null,a=r,i;a<t.length;a++)if(i=t[a],i[0]==o)if(null===l&&null===d)l=a,d=a;else{var p=i[2];p<t[l][2]?l=a:p>t[d][2]&&(d=a)}var h=t[l],g=t[d];t.splice(r,t.length-r),l<d?(t.push(h),t.push(g)):l>d?(t.push(g),t.push(h)):t.push(h)}}},i=function(a){l(a);for(var d=0,i=t.length,p;d<i;d++)p=t[d],p[0]==o?e.lineTo(p[1],p[2]):p[0]==s&&e.moveTo(p[1],p[2]);t.length&&(n=t[t.length-1][1]),r+=t.length,t=[]},d=function(e,o,s){var r=Math.round(o);if(null===a||r!=a){var l=1<a-n,d=1<r-a;i(l||d),a=r}t.push([e,o,s])};return{moveTo:function(e,t){d(s,e,t)},lineTo:function(e,t){d(o,e,t)},stroke:function(){i(!0),e.stroke()},fill:function(){i(!0),e.fill()},beginPath:function(){i(!0),e.beginPath()},closePath:function(){i(!0),e.closePath()},_count:function(){return r}}},t._fillPlotter=function(a){if(!a.singleSeriesName&&0===a.seriesIndex){for(var e=a.dygraph,n=e.getLabels().slice(1),o=n.length;0<=o;o--)e.visibility()[o]||n.splice(o,1);var i=function(){for(var t=0;t<n.length;t++)if(e.getBooleanOption('fillGraph',n[t]))return!0;return!1}();if(i)for(var s=a.plotArea,r=a.allSeriesPoints,l=r.length,d=e.getNumericOption('fillAlpha'),p=e.getBooleanOption('stackedGraph'),h=e.getColors(),g={},c=function(e,t,a,n){if(e.lineTo(t,a),p)for(var o=n.length-1,i;0<=o;o--)i=n[o],e.lineTo(i[0],i[1])},u=l-1,y,_;0<=u;u--){var x=a.drawingContext,f=n[u];if(e.getBooleanOption('fillGraph',f)){var m=e.getBooleanOption('stepPlot',f),b=h[u],v=e.axisPropertiesForSeries(f),w=1+v.minyval*v.yscale;0>w?w=0:1<w&&(w=1),w=s.h*w+s.y;var A=r[u],T=Dygraph.createIterator(A,0,A.length,t._getIteratorPredicate(e.getBooleanOption('connectSeparatedPoints',f))),E=NaN,C=[-1,-1],D=Dygraph.toRGB_(b),S='rgba('+D.r+','+D.g+','+D.b+','+d+')',L;x.fillStyle=S,x.beginPath();var P=!0,O;(A.length>2*e.width_||Dygraph.FORCE_FAST_PROXY)&&(x=t._fastCanvasProxy(x));for(var k=[],I;T.hasNext;){if(I=T.next(),!Dygraph.isOK(I.y)&&!m){c(x,E,C[1],k),k=[],E=NaN,null===I.y_stacked||isNaN(I.y_stacked)||(g[I.canvasx]=s.h*I.y_stacked+s.y);continue}if(p){if(!P&&O==I.xval)continue;else P=!1,O=I.xval;y=g[I.canvasx];var R;R=void 0===y?w:_?y[0]:y,L=[I.canvasy,R],g[I.canvasx]=m?-1===C[0]?[I.canvasy,w]:[I.canvasy,C[0]]:I.canvasy}else L=isNaN(I.canvasy)&&m?[s.y+s.h,w]:[I.canvasy,w];isNaN(E)?(x.moveTo(I.canvasx,L[1]),x.lineTo(I.canvasx,L[0])):(m?(x.lineTo(I.canvasx,C[0]),x.lineTo(I.canvasx,L[0])):x.lineTo(I.canvasx,L[0]),p&&(k.push([E,C[1]]),_&&y?k.push([I.canvasx,y[1]]):k.push([I.canvasx,L[1]]))),C=L,E=I.canvasx}_=m,L&&I&&(c(x,I.canvasx,L[1],k),k=[]),x.fill()}}}},t}();'undefined'===typeof DEBUG&&(DEBUG=!0);var Dygraph=function(){'use strict';var e=Math.log,t=Math.min,a=Math.ceil,i=Math.floor,o=Math.pow,s=Math.abs,l=function(e,t,a,i){this.is_initial_draw_=!0,this.readyFns_=[],void 0===i?this.__init__(e,t,a):(console.warn('Using deprecated four-argument dygraph constructor'),this.__old_init__(e,t,a,i))};return l.NAME='Dygraph',l.VERSION='1.1.1',l.__repr__=function(){return'['+l.NAME+' '+l.VERSION+']'},l.toString=function(){return l.__repr__()},l.DEFAULT_ROLL_PERIOD=1,l.DEFAULT_WIDTH=480,l.DEFAULT_HEIGHT=320,l.ANIMATION_STEPS=12,l.ANIMATION_DURATION=200,l.KMB_LABELS=['K','M','B','T','Q'],l.KMG2_BIG_LABELS=['k','M','G','T','P','E','Z','Y'],l.KMG2_SMALL_LABELS=['m','u','n','p','f','a','z','y'],l.numberValueFormatter=function(e,t){var a=t('sigFigs');if(null!==a)return l.floatFormat(e,a);var r=t('digitsAfterDecimal'),d=t('maxNumberWidth'),p=t('labelsKMB'),h=t('labelsKMG2'),g;if(g=0!==e&&(s(e)>=o(10,d)||s(e)<o(10,-r))?e.toExponential(r):''+l.round_(e,r),p||h){var c=[],u=[],y;p&&(y=1e3,c=l.KMB_LABELS),h&&(p&&console.warn('Setting both labelsKMB and labelsKMG2. Pick one!'),y=1024,c=l.KMG2_BIG_LABELS,u=l.KMG2_SMALL_LABELS);for(var _=s(e),x=l.pow(y,c.length),n=c.length-1;0<=n;n--,x/=y)if(_>=x){g=l.round_(e/x,r)+c[n];break}if(h){var f=(e.toExponential()+'').split('e-');2===f.length&&3<=f[1]&&24>=f[1]&&(g=0<f[1]%3?l.round_(f[0]/l.pow(10,f[1]%3),r):(+f[0]).toFixed(2),g+=u[i(f[1]/3)-1])}}return g},l.numberAxisLabelFormatter=function(e,t,a){return l.numberValueFormatter.call(this,e,a)},l.SHORT_MONTH_NAMES_=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],l.dateAxisLabelFormatter=function(e,t,a){var i=a('labelsUTC'),n=i?l.DateAccessorsUTC:l.DateAccessorsLocal,o=n.getFullYear(e),s=n.getMonth(e),r=n.getDate(e),d=n.getHours(e),p=n.getMinutes(e),h=n.getSeconds(e),g=n.getSeconds(e);if(t>=l.DECADAL)return''+o;if(t>=l.MONTHLY)return l.SHORT_MONTH_NAMES_[s]+'&#160;'+o;return 0===3600*d+60*p+h+1e-3*g||t>=l.DAILY?l.zeropad(r)+'&#160;'+l.SHORT_MONTH_NAMES_[s]:l.hmsString_(d,p,h)},l.dateAxisFormatter=l.dateAxisLabelFormatter,l.dateValueFormatter=function(e,t){return l.dateString_(e,t('labelsUTC'))},l.Plotters=DygraphCanvasRenderer._Plotters,l.DEFAULT_ATTRS={highlightCircleSize:3,highlightSeriesOpts:null,highlightSeriesBackgroundAlpha:0.5,labelsDivWidth:250,labelsDivStyles:{},labelsSeparateLines:!1,labelsShowZeroValues:!0,labelsKMB:!1,labelsKMG2:!1,showLabelsOnHighlight:!0,digitsAfterDecimal:2,maxNumberWidth:6,sigFigs:null,strokeWidth:1,strokeBorderWidth:0,strokeBorderColor:'white',axisTickSize:3,axisLabelFontSize:14,rightGap:5,showRoller:!1,xValueParser:l.dateParser,delimiter:',',sigma:2,errorBars:!1,fractions:!1,wilsonInterval:!0,customBars:!1,fillGraph:!1,fillAlpha:0.15,connectSeparatedPoints:!1,stackedGraph:!1,stackedGraphNaNFill:'all',hideOverlayOnMouseOut:!0,legend:'onmouseover',stepPlot:!1,avoidMinZero:!1,xRangePad:0,yRangePad:null,drawAxesAtZero:!1,titleHeight:28,xLabelHeight:18,yLabelWidth:18,drawXAxis:!0,drawYAxis:!0,axisLineColor:'black',axisLineWidth:0.3,gridLineWidth:0.3,axisLabelColor:'black',axisLabelWidth:50,drawYGrid:!0,drawXGrid:!0,gridLineColor:'rgb(128,128,128)',interactionModel:null,animatedZooms:!1,showRangeSelector:!1,rangeSelectorHeight:40,rangeSelectorPlotStrokeColor:'#808FAB',rangeSelectorPlotFillColor:'#A7B1C4',showInRangeSelector:null,plotter:[l.Plotters.fillPlotter,l.Plotters.errorPlotter,l.Plotters.linePlotter],plugins:[],axes:{x:{pixelsPerLabel:70,axisLabelWidth:60,axisLabelFormatter:l.dateAxisLabelFormatter,valueFormatter:l.dateValueFormatter,drawGrid:!0,drawAxis:!0,independentTicks:!0,ticker:null},y:{axisLabelWidth:50,pixelsPerLabel:30,valueFormatter:l.numberValueFormatter,axisLabelFormatter:l.numberAxisLabelFormatter,drawGrid:!0,drawAxis:!0,independentTicks:!0,ticker:null},y2:{axisLabelWidth:50,pixelsPerLabel:30,valueFormatter:l.numberValueFormatter,axisLabelFormatter:l.numberAxisLabelFormatter,drawAxis:!0,drawGrid:!1,independentTicks:!1,ticker:null}}},l.HORIZONTAL=1,l.VERTICAL=2,l.PLUGINS=[],l.addedAnnotationCSS=!1,l.prototype.__old_init__=function(e,t,a,n){if(null!==a){for(var o=['Date'],s=0;s<a.length;s++)o.push(a[s]);l.update(n,{labels:o})}this.__init__(e,t,n)},l.prototype.__init__=function(e,t,a){if(/MSIE/.test(navigator.userAgent)&&!window.opera&&'undefined'!=typeof G_vmlCanvasManager&&'complete'!=document.readyState){var n=this;return void setTimeout(function(){n.__init__(e,t,a)},100)}if((null===a||void 0===a)&&(a={}),a=l.mapLegacyOptions_(a),'string'==typeof e&&(e=document.getElementById(e)),!e)return void console.error('Constructing dygraph with a non-existent div!');this.isUsingExcanvas_='undefined'!=typeof G_vmlCanvasManager,this.maindiv_=e,this.file_=t,this.rollPeriod_=a.rollPeriod||l.DEFAULT_ROLL_PERIOD,this.previousVerticalX_=-1,this.fractions_=a.fractions||!1,this.dateWindow_=a.dateWindow||null,this.annotations_=[],this.zoomed_x_=!1,this.zoomed_y_=!1,e.innerHTML='',''===e.style.width&&a.width&&(e.style.width=a.width+'px'),''===e.style.height&&a.height&&(e.style.height=a.height+'px'),''===e.style.height&&0===e.clientHeight&&(e.style.height=l.DEFAULT_HEIGHT+'px',''===e.style.width&&(e.style.width=l.DEFAULT_WIDTH+'px')),this.width_=e.clientWidth||a.width||0,this.height_=e.clientHeight||a.height||0,a.stackedGraph&&(a.fillGraph=!0),this.user_attrs_={},l.update(this.user_attrs_,a),this.attrs_={},l.updateDeep(this.attrs_,l.DEFAULT_ATTRS),this.boundaryIds_=[],this.setIndexByName_={},this.datasetIndex_=[],this.registeredEvents_=[],this.eventListeners_={},this.attributes_=new DygraphOptions(this),this.createInterface_(),this.plugins_=[];for(var o=l.PLUGINS.concat(this.getOption('plugins')),s=0;s<o.length;s++){var i=o[s],r;r='undefined'===typeof i.activate?new i:i;var d={plugin:r,events:{},options:{},pluginOptions:{}},p=r.activate(this);for(var h in p)p.hasOwnProperty(h)&&(d.events[h]=p[h]);this.plugins_.push(d)}for(var s=0,g;s<this.plugins_.length;s++)for(var h in g=this.plugins_[s],g.events)if(g.events.hasOwnProperty(h)){var c=g.events[h],u=[g.plugin,c];h in this.eventListeners_?this.eventListeners_[h].push(u):this.eventListeners_[h]=[u]}this.createDragInterface_(),this.start_()},l.prototype.cascadeEvents_=function(t,a){if(!(t in this.eventListeners_))return!1;var n={dygraph:this,cancelable:!1,defaultPrevented:!1,preventDefault:function(){if(!n.cancelable)throw'Cannot call preventDefault on non-cancelable event.';n.defaultPrevented=!0},propagationStopped:!1,stopPropagation:function(){n.propagationStopped=!0}};l.update(n,a);var e=this.eventListeners_[t];if(e)for(var o=e.length-1;0<=o;o--){var i=e[o][0],s=e[o][1];if(s.call(i,n),n.propagationStopped)break}return n.defaultPrevented},l.prototype.getPluginInstance_=function(e){for(var t=0,a;t<this.plugins_.length;t++)if(a=this.plugins_[t],a.plugin instanceof e)return a.plugin;return null},l.prototype.isZoomed=function(e){if(null===e||void 0===e)return this.zoomed_x_||this.zoomed_y_;if('x'===e)return this.zoomed_x_;if('y'===e)return this.zoomed_y_;throw'axis parameter is ['+e+'] must be null, \'x\' or \'y\'.'},l.prototype.toString=function(){var e=this.maindiv_,t=e&&e.id?e.id:e;return'[Dygraph '+t+']'},l.prototype.attr_=function(e,t){return DEBUG&&('undefined'===typeof l.OPTIONS_REFERENCE?console.error('Must include options reference JS for testing'):!l.OPTIONS_REFERENCE.hasOwnProperty(e)&&(console.error('Dygraphs is using property '+e+', which has no entry in the Dygraphs.OPTIONS_REFERENCE listing.'),l.OPTIONS_REFERENCE[e]=!0)),t?this.attributes_.getForSeries(e,t):this.attributes_.get(e)},l.prototype.getOption=function(e,t){return this.attr_(e,t)},l.prototype.getNumericOption=function(e,t){return this.getOption(e,t)},l.prototype.getStringOption=function(e,t){return this.getOption(e,t)},l.prototype.getBooleanOption=function(e,t){return this.getOption(e,t)},l.prototype.getFunctionOption=function(e,t){return this.getOption(e,t)},l.prototype.getOptionForAxis=function(e,t){return this.attributes_.getForAxis(e,t)},l.prototype.optionsViewForAxis_=function(e){var t=this;return function(a){var i=t.user_attrs_.axes;return i&&i[e]&&i[e].hasOwnProperty(a)?i[e][a]:'x'===e&&'logscale'===a?!1:'undefined'==typeof t.user_attrs_[a]?(i=t.attrs_.axes,i&&i[e]&&i[e].hasOwnProperty(a))?i[e][a]:'y'==e&&t.axes_[0].hasOwnProperty(a)?t.axes_[0][a]:'y2'==e&&t.axes_[1].hasOwnProperty(a)?t.axes_[1][a]:t.attr_(a):t.user_attrs_[a]}},l.prototype.rollPeriod=function(){return this.rollPeriod_},l.prototype.xAxisRange=function(){return this.dateWindow_?this.dateWindow_:this.xAxisExtremes()},l.prototype.xAxisExtremes=function(){var e=this.getNumericOption('xRangePad')/this.plotter_.area.w;if(0===this.numRows())return[0-e,1+e];var t=this.rawData_[0][0],a=this.rawData_[this.rawData_.length-1][0];if(e){var i=a-t;t-=i*e,a+=i*e}return[t,a]},l.prototype.yAxisRange=function(e){if('undefined'==typeof e&&(e=0),0>e||e>=this.axes_.length)return null;var t=this.axes_[e];return[t.computedValueRange[0],t.computedValueRange[1]]},l.prototype.yAxisRanges=function(){for(var e=[],t=0;t<this.axes_.length;t++)e.push(this.yAxisRange(t));return e},l.prototype.toDomCoords=function(e,t,a){return[this.toDomXCoord(e),this.toDomYCoord(t,a)]},l.prototype.toDomXCoord=function(e){if(null===e)return null;var t=this.plotter_.area,a=this.xAxisRange();return t.x+(e-a[0])/(a[1]-a[0])*t.w},l.prototype.toDomYCoord=function(e,t){var a=this.toPercentYCoord(e,t);if(null===a)return null;var i=this.plotter_.area;return i.y+a*i.h},l.prototype.toDataCoords=function(e,t,a){return[this.toDataXCoord(e),this.toDataYCoord(t,a)]},l.prototype.toDataXCoord=function(e){if(null===e)return null;var t=this.plotter_.area,a=this.xAxisRange();if(!this.attributes_.getForAxis('logscale','x'))return a[0]+(e-t.x)/t.w*(a[1]-a[0]);var i=(e-t.x)/t.w,n=l.log10(a[0]),s=l.log10(a[1]),r=o(l.LOG_SCALE,n+i*(s-n));return r},l.prototype.toDataYCoord=function(e,t){if(null===e)return null;var a=this.plotter_.area,i=this.yAxisRange(t);if('undefined'==typeof t&&(t=0),!this.attributes_.getForAxis('logscale',t))return i[0]+(a.y+a.h-e)/a.h*(i[1]-i[0]);var n=(e-a.y)/a.h,s=l.log10(i[0]),r=l.log10(i[1]),d=o(l.LOG_SCALE,r-n*(r-s));return d},l.prototype.toPercentYCoord=function(e,t){if(null===e)return null;'undefined'==typeof t&&(t=0);var a=this.yAxisRange(t),i=this.attributes_.getForAxis('logscale',t),n;if(i){var o=l.log10(a[0]),s=l.log10(a[1]);n=(s-l.log10(e))/(s-o)}else n=(a[1]-e)/(a[1]-a[0]);return n},l.prototype.toPercentXCoord=function(e){if(null===e)return null;var t=this.xAxisRange(),a=this.attributes_.getForAxis('logscale','x'),i;if(!0===a){var n=l.log10(t[0]),o=l.log10(t[1]);i=(l.log10(e)-n)/(o-n)}else i=(e-t[0])/(t[1]-t[0]);return i},l.prototype.numColumns=function(){return this.rawData_?this.rawData_[0]?this.rawData_[0].length:this.attr_('labels').length:0},l.prototype.numRows=function(){return this.rawData_?this.rawData_.length:0},l.prototype.getValue=function(e,t){return 0>e||e>this.rawData_.length?null:0>t||t>this.rawData_[e].length?null:this.rawData_[e][t]},l.prototype.createInterface_=function(){var e=this.maindiv_;this.graphDiv=document.createElement('div'),this.graphDiv.style.textAlign='left',this.graphDiv.style.position='relative',e.appendChild(this.graphDiv),this.canvas_=l.createCanvas(),this.canvas_.style.position='absolute',this.hidden_=this.createPlotKitCanvas_(this.canvas_),this.canvas_ctx_=l.getContext(this.canvas_),this.hidden_ctx_=l.getContext(this.hidden_),this.resizeElements_(),this.graphDiv.appendChild(this.hidden_),this.graphDiv.appendChild(this.canvas_),this.mouseEventElement_=this.createMouseEventElement_(),this.layout_=new DygraphLayout(this);var t=this;this.mouseMoveHandler_=function(a){t.mouseMove_(a)},this.mouseOutHandler_=function(a){var e=a.target||a.fromElement,i=a.relatedTarget||a.toElement;l.isNodeContainedBy(e,t.graphDiv)&&!l.isNodeContainedBy(i,t.graphDiv)&&t.mouseOut_(a)},this.addAndTrackEvent(window,'mouseout',this.mouseOutHandler_),this.addAndTrackEvent(this.mouseEventElement_,'mousemove',this.mouseMoveHandler_),this.resizeHandler_||(this.resizeHandler_=function(){t.resize()},this.addAndTrackEvent(window,'resize',this.resizeHandler_))},l.prototype.resizeElements_=function(){this.graphDiv.style.width=this.width_+'px',this.graphDiv.style.height=this.height_+'px';var e=l.getContextPixelRatio(this.canvas_ctx_);this.canvas_.width=this.width_*e,this.canvas_.height=this.height_*e,this.canvas_.style.width=this.width_+'px',this.canvas_.style.height=this.height_+'px',1!==e&&this.canvas_ctx_.scale(e,e);var t=l.getContextPixelRatio(this.hidden_ctx_);this.hidden_.width=this.width_*t,this.hidden_.height=this.height_*t,this.hidden_.style.width=this.width_+'px',this.hidden_.style.height=this.height_+'px',1!==t&&this.hidden_ctx_.scale(t,t)},l.prototype.destroy=function(){this.canvas_ctx_.restore(),this.hidden_ctx_.restore();for(var e=this.plugins_.length-1,t;0<=e;e--)t=this.plugins_.pop(),t.plugin.destroy&&t.plugin.destroy();var a=function(e){for(;e.hasChildNodes();)a(e.firstChild),e.removeChild(e.firstChild)};this.removeTrackedEvents_(),l.removeEvent(window,'mouseout',this.mouseOutHandler_),l.removeEvent(this.mouseEventElement_,'mousemove',this.mouseMoveHandler_),l.removeEvent(window,'resize',this.resizeHandler_),this.resizeHandler_=null,a(this.maindiv_);var i=function(e){for(var t in e)'object'===typeof e[t]&&(e[t]=null)};i(this.layout_),i(this.plotter_),i(this)},l.prototype.createPlotKitCanvas_=function(e){var t=l.createCanvas();return t.style.position='absolute',t.style.top=e.style.top,t.style.left=e.style.left,t.width=this.width_,t.height=this.height_,t.style.width=this.width_+'px',t.style.height=this.height_+'px',t},l.prototype.createMouseEventElement_=function(){if(this.isUsingExcanvas_){var e=document.createElement('div');return e.style.position='absolute',e.style.backgroundColor='white',e.style.filter='alpha(opacity=0)',e.style.width=this.width_+'px',e.style.height=this.height_+'px',this.graphDiv.appendChild(e),e}return this.canvas_},l.prototype.setColors_=function(){var e=this.getLabels(),t=e.length-1;this.colors_=[],this.colorsMap_={};for(var n=this.getNumericOption('colorSaturation')||1,o=this.getNumericOption('colorValue')||0.5,s=a(t/2),r=this.getOption('colors'),d=this.visibility(),p=0;p<t;p++)if(d[p]){var i=e[p+1],h=this.attributes_.getForSeries('color',i);if(!h)if(r)h=r[p%r.length];else{var g=p%2?s+(p+1)/2:a((p+1)/2);h=l.hsvToRGB(1*g/(1+t),n,o)}this.colors_.push(h),this.colorsMap_[i]=h}},l.prototype.getColors=function(){return this.colors_},l.prototype.getPropertiesForSeries=function(e){for(var t=-1,a=this.getLabels(),n=1;n<a.length;n++)if(a[n]==e){t=n;break}return-1==t?null:{name:e,column:t,visible:this.visibility()[t-1],color:this.colorsMap_[e],axis:1+this.attributes_.axisForSeries(e)}},l.prototype.createRollInterface_=function(){this.roller_||(this.roller_=document.createElement('input'),this.roller_.type='text',this.roller_.style.display='none',this.graphDiv.appendChild(this.roller_));var e=this.getBooleanOption('showRoller')?'block':'none',t=this.plotter_.area,a={position:'absolute',zIndex:10,top:t.y+t.h-25+'px',left:t.x+1+'px',display:e};for(var i in this.roller_.size='2',this.roller_.value=this.rollPeriod_,a)a.hasOwnProperty(i)&&(this.roller_.style[i]=a[i]);var n=this;this.roller_.onchange=function(){n.adjustRoll(n.roller_.value)}},l.prototype.createDragInterface_=function(){var e={isZooming:!1,isPanning:!1,is2DPan:!1,dragStartX:null,dragStartY:null,dragEndX:null,dragEndY:null,dragDirection:null,prevEndX:null,prevEndY:null,prevDragDirection:null,cancelNextDblclick:!1,initialLeftmostDate:null,xUnitsPerPixel:null,dateRange:null,px:0,py:0,boundedDates:null,boundedValues:null,tarp:new l.IFrameTarp,initializeMouseDown:function(e,t,a){e.preventDefault?e.preventDefault():(e.returnValue=!1,e.cancelBubble=!0);var i=l.findPos(t.canvas_);a.px=i.x,a.py=i.y,a.dragStartX=l.dragGetX_(e,a),a.dragStartY=l.dragGetY_(e,a),a.cancelNextDblclick=!1,a.tarp.cover()},destroy:function(){var e=this;if((e.isZooming||e.isPanning)&&(e.isZooming=!1,e.dragStartX=null,e.dragStartY=null),e.isPanning){e.isPanning=!1,e.draggingDate=null,e.dateRange=null;for(var t=0;t<a.axes_.length;t++)delete a.axes_[t].draggingValue,delete a.axes_[t].dragValueRange}e.tarp.uncover()}},t=this.getOption('interactionModel'),a=this,i=function(t){return function(i){t(i,a,e)}};for(var n in t)t.hasOwnProperty(n)&&this.addAndTrackEvent(this.mouseEventElement_,n,i(t[n]));if(!t.willDestroyContextMyself){var o=function(){e.destroy()};this.addAndTrackEvent(document,'mouseup',o)}},l.prototype.drawZoomRect_=function(e,a,i,n,o,r,d,p){var h=this.canvas_ctx_;r==l.HORIZONTAL?h.clearRect(t(a,d),this.layout_.getPlotArea().y,s(a-d),this.layout_.getPlotArea().h):r==l.VERTICAL&&h.clearRect(this.layout_.getPlotArea().x,t(n,p),this.layout_.getPlotArea().w,s(n-p)),e==l.HORIZONTAL?i&&a&&(h.fillStyle='rgba(128,128,128,0.33)',h.fillRect(t(a,i),this.layout_.getPlotArea().y,s(i-a),this.layout_.getPlotArea().h)):e==l.VERTICAL&&o&&n&&(h.fillStyle='rgba(128,128,128,0.33)',h.fillRect(this.layout_.getPlotArea().x,t(n,o),this.layout_.getPlotArea().w,s(o-n))),this.isUsingExcanvas_&&(this.currentZoomRectArgs_=[e,a,i,n,o,0,0,0])},l.prototype.clearZoomRect_=function(){this.currentZoomRectArgs_=null,this.canvas_ctx_.clearRect(0,0,this.width_,this.height_)},l.prototype.doZoomX_=function(e,t){this.currentZoomRectArgs_=null;var a=this.toDataXCoord(e),i=this.toDataXCoord(t);this.doZoomXDates_(a,i)},l.prototype.doZoomXDates_=function(e,t){var a=this.xAxisRange();this.zoomed_x_=!0;var i=this;this.doAnimatedZoom(a,[e,t],null,null,function(){i.getFunctionOption('zoomCallback')&&i.getFunctionOption('zoomCallback').call(i,e,t,i.yAxisRanges())})},l.prototype.doZoomY_=function(e,t){this.currentZoomRectArgs_=null;for(var a=this.yAxisRanges(),n=[],o=0;o<this.axes_.length;o++){var i=this.toDataYCoord(e,o),s=this.toDataYCoord(t,o);n.push([s,i])}this.zoomed_y_=!0;var r=this;this.doAnimatedZoom(null,null,a,n,function(){if(r.getFunctionOption('zoomCallback')){var e=r.xAxisRange();r.getFunctionOption('zoomCallback').call(r,e[0],e[1],r.yAxisRanges())}})},l.zoomAnimationFunction=function(e,t){var a=1.5;return(1-o(a,-e))/(1-o(a,-t))},l.prototype.resetZoom=function(){var e=!1,t=!1,a=!1;null!==this.dateWindow_&&(e=!0,t=!0);for(var n=0;n<this.axes_.length;n++)'undefined'!==typeof this.axes_[n].valueWindow&&null!==this.axes_[n].valueWindow&&(e=!0,a=!0);if(this.clearSelection(),e){this.zoomed_x_=!1,this.zoomed_y_=!1;var o=this.rawData_[0][0],s=this.rawData_[this.rawData_.length-1][0];if(!this.getBooleanOption('animatedZooms')){for(this.dateWindow_=null,n=0;n<this.axes_.length;n++)null!==this.axes_[n].valueWindow&&delete this.axes_[n].valueWindow;return this.drawGraph_(),void(this.getFunctionOption('zoomCallback')&&this.getFunctionOption('zoomCallback').call(this,o,s,this.yAxisRanges()))}var i=null,r=null,l=null,d=null;if(t&&(i=this.xAxisRange(),r=[o,s]),a){l=this.yAxisRanges();var p=this.gatherDatasets_(this.rolledSeries_,null),h=p.extremes;for(this.computeYAxisRanges_(h),d=[],n=0;n<this.axes_.length;n++){var g=this.axes_[n];d.push(null!==g.valueRange&&void 0!==g.valueRange?g.valueRange:g.extremeRange)}}var c=this;this.doAnimatedZoom(i,r,l,d,function(){c.dateWindow_=null;for(var e=0;e<c.axes_.length;e++)null!==c.axes_[e].valueWindow&&delete c.axes_[e].valueWindow;c.getFunctionOption('zoomCallback')&&c.getFunctionOption('zoomCallback').call(c,o,s,c.yAxisRanges())})}},l.prototype.doAnimatedZoom=function(e,t,a,i,n){var o=this.getBooleanOption('animatedZooms')?l.ANIMATION_STEPS:1,s=[],r=[],d,p;if(null!==e&&null!==t)for(d=1;d<=o;d++)p=l.zoomAnimationFunction(d,o),s[d-1]=[e[0]*(1-p)+p*t[0],e[1]*(1-p)+p*t[1]];if(null!==a&&null!==i)for(d=1;d<=o;d++){p=l.zoomAnimationFunction(d,o);for(var h=[],g=0;g<this.axes_.length;g++)h.push([a[g][0]*(1-p)+p*i[g][0],a[g][1]*(1-p)+p*i[g][1]]);r[d-1]=h}var c=this;l.repeatAndCleanup(function(e){if(r.length)for(var t=0,a;t<c.axes_.length;t++)a=r[e][t],c.axes_[t].valueWindow=[a[0],a[1]];s.length&&(c.dateWindow_=s[e]),c.drawGraph_()},o,l.ANIMATION_DURATION/o,n)},l.prototype.getArea=function(){return this.plotter_.area},l.prototype.eventToDomCoords=function(e){if(e.offsetX&&e.offsetY)return[e.offsetX,e.offsetY];var t=l.findPos(this.mouseEventElement_),a=l.pageX(e)-t.x,i=l.pageY(e)-t.y;return[a,i]},l.prototype.findClosestRow=function(e){for(var t=Infinity,a=-1,n=this.layout_.points,o=0;o<n.length;o++)for(var i=n[o],r=i.length,d=0,p;d<r;d++)if(p=i[d],l.isValidPoint(p,!0)){var h=s(p.canvasx-e);h<t&&(t=h,a=p.idx)}return a},l.prototype.findClosestPoint=function(e,t){for(var a=Infinity,n=this.layout_.points.length-1,o,s,r,d,p,h,g,c;0<=n;--n){c=this.layout_.points[n];for(var u=0;u<c.length;++u)d=c[u],l.isValidPoint(d)&&(s=d.canvasx-e,r=d.canvasy-t,o=s*s+r*r,o<a&&(a=o,p=d,h=n,g=d.idx))}var i=this.layout_.setNames[h];return{row:g,seriesName:i,point:p}},l.prototype.findStackedPoint=function(e,t){for(var a=this.findClosestRow(e),i=0,n,o;i<this.layout_.points.length;++i){var s=this.getLeftBoundary_(i),d=a-s,p=this.layout_.points[i];if(!(d>=p.length)){var h=p[d];if(l.isValidPoint(h)){var g=h.canvasy;if(e>h.canvasx&&d+1<p.length){var c=p[d+1];if(l.isValidPoint(c)){var u=c.canvasx-h.canvasx;if(0<u){var y=(e-h.canvasx)/u;g+=y*(c.canvasy-h.canvasy)}}}else if(e<h.canvasx&&0<d){var r=p[d-1];if(l.isValidPoint(r)){var u=h.canvasx-r.canvasx;if(0<u){var y=(h.canvasx-e)/u;g+=y*(r.canvasy-h.canvasy)}}}(0===i||g<t)&&(n=h,o=i)}}}var _=this.layout_.setNames[o];return{row:a,seriesName:_,point:n}},l.prototype.mouseMove_=function(e){var t=this.layout_.points;if(void 0!==t&&null!==t){var a=this.eventToDomCoords(e),i=a[0],n=a[1],o=this.getOption('highlightSeriesOpts'),s=!1;if(o&&!this.isSeriesLocked()){var r;r=this.getBooleanOption('stackedGraph')?this.findStackedPoint(i,n):this.findClosestPoint(i,n),s=this.setSelection(r.row,r.seriesName)}else{var l=this.findClosestRow(i);s=this.setSelection(l)}var d=this.getFunctionOption('highlightCallback');d&&s&&d.call(this,e,this.lastx_,this.selPoints_,this.lastRow_,this.highlightSet_)}},l.prototype.getLeftBoundary_=function(e){if(this.boundaryIds_[e])return this.boundaryIds_[e][0];for(var t=0;t<this.boundaryIds_.length;t++)if(void 0!==this.boundaryIds_[t])return this.boundaryIds_[t][0];return 0},l.prototype.animateSelection_=function(e){var t=10;void 0===this.fadeLevel&&(this.fadeLevel=0),void 0===this.animateId&&(this.animateId=0);var a=this.fadeLevel,i=0>e?a:t-a;if(0>=i)return void(this.fadeLevel&&this.updateSelection_(1));var n=++this.animateId,o=this;l.repeatAndCleanup(function(){o.animateId!=n||(o.fadeLevel+=e,0===o.fadeLevel?o.clearSelection():o.updateSelection_(o.fadeLevel/t))},i,30,function(){})},l.prototype.updateSelection_=function(e){this.cascadeEvents_('select',{selectedRow:this.lastRow_,selectedX:this.lastx_,selectedPoints:this.selPoints_});var t=this.canvas_ctx_,a;if(this.getOption('highlightSeriesOpts')){t.clearRect(0,0,this.width_,this.height_);var i=1-this.getNumericOption('highlightSeriesBackgroundAlpha');if(i){if(void 0===e)return void this.animateSelection_(1);i*=e,t.fillStyle='rgba(255,255,255,'+i+')',t.fillRect(0,0,this.width_,this.height_)}this.plotter_._renderLineChart(this.highlightSet_,t)}else if(0<=this.previousVerticalX_){var n=0,o=this.attr_('labels');for(a=1;a<o.length;a++){var s=this.getNumericOption('highlightCircleSize',o[a]);s>n&&(n=s)}var r=this.previousVerticalX_;t.clearRect(r-n-1,0,2*n+2,this.height_)}if(this.isUsingExcanvas_&&this.currentZoomRectArgs_&&l.prototype.drawZoomRect_.apply(this,this.currentZoomRectArgs_),0<this.selPoints_.length){var d=this.selPoints_[0].canvasx;for(t.save(),a=0;a<this.selPoints_.length;a++){var p=this.selPoints_[a];if(l.isOK(p.canvasy)){var h=this.getNumericOption('highlightCircleSize',p.name),g=this.getFunctionOption('drawHighlightPointCallback',p.name),c=this.plotter_.colors[p.name];g||(g=l.Circles.DEFAULT),t.lineWidth=this.getNumericOption('strokeWidth',p.name),t.strokeStyle=c,t.fillStyle=c,g.call(this,this,p.name,t,d,p.canvasy,c,h,p.idx)}}t.restore(),this.previousVerticalX_=d}},l.prototype.setSelection=function(e,t,a){this.selPoints_=[];var i=!1;if(!1!==e&&0<=e){e!=this.lastRow_&&(i=!0),this.lastRow_=e;for(var n=0;n<this.layout_.points.length;++n){var o=this.layout_.points[n],s=e-this.getLeftBoundary_(n);if(s<o.length&&o[s].idx==e){var r=o[s];null!==r.yval&&this.selPoints_.push(r)}else for(var l=0,r;l<o.length;++l)if(r=o[l],r.idx==e){null!==r.yval&&this.selPoints_.push(r);break}}}else 0<=this.lastRow_&&(i=!0),this.lastRow_=-1;return this.lastx_=this.selPoints_.length?this.selPoints_[0].xval:-1,void 0!==t&&(this.highlightSet_!==t&&(i=!0),this.highlightSet_=t),void 0!==a&&(this.lockedSet_=a),i&&this.updateSelection_(void 0),i},l.prototype.mouseOut_=function(e){this.getFunctionOption('unhighlightCallback')&&this.getFunctionOption('unhighlightCallback').call(this,e),this.getBooleanOption('hideOverlayOnMouseOut')&&!this.lockedSet_&&this.clearSelection()},l.prototype.clearSelection=function(){return this.cascadeEvents_('deselect',{}),this.lockedSet_=!1,this.fadeLevel?void this.animateSelection_(-1):void(this.canvas_ctx_.clearRect(0,0,this.width_,this.height_),this.fadeLevel=0,this.selPoints_=[],this.lastx_=-1,this.lastRow_=-1,this.highlightSet_=null)},l.prototype.getSelection=function(){if(!this.selPoints_||1>this.selPoints_.length)return-1;for(var e=0,t;e<this.layout_.points.length;e++){t=this.layout_.points[e];for(var a=0;a<t.length;a++)if(t[a].x==this.selPoints_[0].x)return t[a].idx}return-1},l.prototype.getHighlightSeries=function(){return this.highlightSet_},l.prototype.isSeriesLocked=function(){return this.lockedSet_},l.prototype.loadedEvent_=function(e){this.rawData_=this.parseCSV_(e),this.cascadeDataDidUpdateEvent_(),this.predraw_()},l.prototype.addXTicks_=function(){var e=this.dateWindow_?[this.dateWindow_[0],this.dateWindow_[1]]:this.xAxisExtremes();var t=this.optionsViewForAxis_('x'),a=t('ticker')(e[0],e[1],this.plotter_.area.w,t,this);this.layout_.setXTicks(a)},l.prototype.getHandlerClass_=function(){var e;return e=this.attr_('dataHandler')?this.attr_('dataHandler'):this.fractions_?this.getBooleanOption('errorBars')?l.DataHandlers.FractionsBarsHandler:l.DataHandlers.DefaultFractionHandler:this.getBooleanOption('customBars')?l.DataHandlers.CustomBarsHandler:this.getBooleanOption('errorBars')?l.DataHandlers.ErrorBarsHandler:l.DataHandlers.DefaultHandler,e},l.prototype.predraw_=function(){var e=new Date;this.dataHandler_=new(this.getHandlerClass_()),this.layout_.computePlotArea(),this.computeYAxes_(),this.is_initial_draw_||(this.canvas_ctx_.restore(),this.hidden_ctx_.restore()),this.canvas_ctx_.save(),this.hidden_ctx_.save(),this.plotter_=new DygraphCanvasRenderer(this,this.hidden_,this.hidden_ctx_,this.layout_),this.createRollInterface_(),this.cascadeEvents_('predraw'),this.rolledSeries_=[null];for(var t=1,a;t<this.numColumns();t++)a=this.dataHandler_.extractSeries(this.rawData_,t,this.attributes_),1<this.rollPeriod_&&(a=this.dataHandler_.rollingAverage(a,this.rollPeriod_,this.attributes_)),this.rolledSeries_.push(a);this.drawGraph_();var i=new Date;this.drawingTimeMs_=i-e},l.PointType=void 0,l.stackPoints_=function(e,t,a,n){for(var o=null,s=null,r=null,l=-1,d=function(t){if(!(l>=t))for(var a=t;a<e.length;++a)if(r=null,!isNaN(e[a].yval)&&null!==e[a].yval){l=a,r=e[a];break}},p=0;p<e.length;++p){var i=e[p],h=i.xval;void 0===t[h]&&(t[h]=0);var g=i.yval;isNaN(g)||null===g?'none'==n?g=0:(d(p),g=s&&r&&'none'!=n?s.yval+(r.yval-s.yval)*((h-s.xval)/(r.xval-s.xval)):s&&'all'==n?s.yval:r&&'all'==n?r.yval:0):s=i;var c=t[h];o!=h&&(c+=g,t[h]=c),o=h,i.yval_stacked=c,c>a[1]&&(a[1]=c),c<a[0]&&(a[0]=c)}},l.prototype.gatherDatasets_=function(e,t){var a=[],i=[],n=[],o={},s=e.length-1,r,d,p,h,g,c;for(r=s;1<=r;r--)if(this.visibility()[r-1]){if(t){c=e[r];var u=t[0],y=t[1];for(p=null,h=null,d=0;d<c.length;d++)c[d][0]>=u&&null===p&&(p=d),c[d][0]<=y&&(h=d);null===p&&(p=0);for(var _=p,x=!0;x&&0<_;)_--,x=null===c[_][1];null===h&&(h=c.length-1);var f=h;for(x=!0;x&&f<c.length-1;)f++,x=null===c[f][1];_!==p&&(p=_),f!==h&&(h=f),a[r-1]=[p,h],c=c.slice(p,h+1)}else c=e[r],a[r-1]=[0,c.length-1];var m=this.attr_('labels')[r],b=this.dataHandler_.getExtremeYValues(c,t,this.getBooleanOption('stepPlot',m)),v=this.dataHandler_.seriesToPoints(c,m,a[r-1][0]);this.getBooleanOption('stackedGraph')&&(g=this.attributes_.axisForSeries(m),void 0===n[g]&&(n[g]=[]),l.stackPoints_(v,n[g],b,this.getBooleanOption('stackedGraphNaNFill'))),o[m]=b,i[r]=v}return{points:i,extremes:o,boundaryIds:a}},l.prototype.drawGraph_=function(){var e=new Date,t=this.is_initial_draw_;this.is_initial_draw_=!1,this.layout_.removeAllDatasets(),this.setColors_(),this.attrs_.pointSize=0.5*this.getNumericOption('highlightCircleSize');var a=this.gatherDatasets_(this.rolledSeries_,this.dateWindow_),n=a.points,o=a.extremes;this.boundaryIds_=a.boundaryIds,this.setIndexByName_={};var s=this.attr_('labels');0<s.length&&(this.setIndexByName_[s[0]]=0);for(var r=0,l=1;l<n.length;l++)this.setIndexByName_[s[l]]=l,this.visibility()[l-1]&&(this.layout_.addDataset(s[l],n[l]),this.datasetIndex_[l]=r++);this.computeYAxisRanges_(o),this.layout_.setYAxes(this.axes_),this.addXTicks_();var i=this.zoomed_x_;if(this.zoomed_x_=i,this.layout_.evaluate(),this.renderGraph_(t),this.getStringOption('timingName')){var d=new Date;console.log(this.getStringOption('timingName')+' - drawGraph: '+(d-e)+'ms')}},l.prototype.renderGraph_=function(t){this.cascadeEvents_('clearChart'),this.plotter_.clear(),this.getFunctionOption('underlayCallback')&&this.getFunctionOption('underlayCallback').call(this,this.hidden_ctx_,this.layout_.getPlotArea(),this,this);var a={canvas:this.hidden_,drawingContext:this.hidden_ctx_};if(this.cascadeEvents_('willDrawChart',a),this.plotter_.render(),this.cascadeEvents_('didDrawChart',a),this.lastRow_=-1,this.canvas_.getContext('2d').clearRect(0,0,this.width_,this.height_),null!==this.getFunctionOption('drawCallback')&&this.getFunctionOption('drawCallback').call(this,this,t),t)for(this.readyFired_=!0;0<this.readyFns_.length;){var e=this.readyFns_.pop();e(this)}},l.prototype.computeYAxes_=function(){var e,a,i,n,o;if(void 0!==this.axes_&&!1===this.user_attrs_.hasOwnProperty('valueRange'))for(e=[],i=0;i<this.axes_.length;i++)e.push(this.axes_[i].valueWindow);for(this.axes_=[],a=0;a<this.attributes_.numAxes();a++)n={g:this},l.update(n,this.attributes_.axisOptions(a)),this.axes_[a]=n;if(o=this.attr_('valueRange'),o&&(this.axes_[0].valueRange=o),void 0!==e){var s=t(e.length,this.axes_.length);for(i=0;i<s;i++)this.axes_[i].valueWindow=e[i]}for(a=0;a<this.axes_.length;a++)if(0===a)n=this.optionsViewForAxis_('y'+(a?'2':'')),o=n('valueRange'),o&&(this.axes_[a].valueRange=o);else{var r=this.user_attrs_.axes;r&&r.y2&&(o=r.y2.valueRange,o&&(this.axes_[a].valueRange=o))}},l.prototype.numAxes=function(){return this.attributes_.numAxes()},l.prototype.axisPropertiesForSeries=function(e){return this.axes_[this.attributes_.axisForSeries(e)]},l.prototype.computeYAxisRanges_=function(a){for(var n=Math.exp,o=function(e){return isNaN(parseFloat(e))},r=this.attributes_.numAxes(),l=0,i,d,p,h,g;l<r;l++){var c=this.axes_[l],u=this.attributes_.getForAxis('logscale',l),y=this.attributes_.getForAxis('includeZero',l),_=this.attributes_.getForAxis('independentTicks',l);if(p=this.attributes_.seriesForAxis(l),i=!0,h=0.1,null!==this.getNumericOption('yRangePad')&&(i=!1,h=this.getNumericOption('yRangePad')/this.plotter_.area.h),0===p.length)c.extremeRange=[0,1];else{for(var x=Infinity,f=-Infinity,m=0,b,v;m<p.length;m++)a.hasOwnProperty(p[m])&&(b=a[p[m]][0],null!==b&&(x=t(b,x)),v=a[p[m]][1],null!==v&&(f=Math.max(v,f)));y&&!u&&(0<x&&(x=0),0>f&&(f=0)),x==Infinity&&(x=0),f==-Infinity&&(f=1),d=f-x,0===d&&(0===f?(f=1,d=1):d=s(f));var w,A;if(!u)w=f+h*d,A=x-h*d,i&&!this.getBooleanOption('avoidMinZero')&&(0>A&&0<=x&&(A=0),0<w&&0>=f&&(w=0));else if(i)w=f+h*d,A=x;else{var T=n(e(d)*h);w=f*T,A=x/T}c.extremeRange=[A,w]}if(c.valueWindow)c.computedValueRange=[c.valueWindow[0],c.valueWindow[1]];else if(c.valueRange){var E=o(c.valueRange[0])?c.extremeRange[0]:c.valueRange[0],C=o(c.valueRange[1])?c.extremeRange[1]:c.valueRange[1];if(!i)if(c.logscale){var T=n(e(d)*h);E*=T,C/=T}else d=C-E,E-=d*h,C+=d*h;c.computedValueRange=[E,C]}else c.computedValueRange=c.extremeRange;if(_){c.independentTicks=_;var D=this.optionsViewForAxis_('y'+(l?'2':'')),S=D('ticker');c.ticks=S(c.computedValueRange[0],c.computedValueRange[1],this.plotter_.area.h,D,this),g||(g=c)}}if(void 0===g)throw'Configuration Error: At least one axis has to have the "independentTicks" option activated.';for(var l=0,c;l<r;l++)if(c=this.axes_[l],!c.independentTicks){for(var D=this.optionsViewForAxis_('y'+(l?'2':'')),S=D('ticker'),L=g.ticks,P=g.computedValueRange[1]-g.computedValueRange[0],O=c.computedValueRange[1]-c.computedValueRange[0],I=[],R=0;R<L.length;R++){var k=(L[R].v-g.computedValueRange[0])/P,F=c.computedValueRange[0]+k*O;I.push(F)}c.ticks=S(c.computedValueRange[0],c.computedValueRange[1],this.plotter_.area.h,D,this,I)}},l.prototype.detectTypeFromString_=function(e){var t=!1,a=e.indexOf('-');0<a&&'e'!=e[a-1]&&'E'!=e[a-1]||0<=e.indexOf('/')||isNaN(parseFloat(e))?t=!0:8==e.length&&'19700101'<e&&'20371231'>e&&(t=!0),this.setXAxisOptions_(t)},l.prototype.setXAxisOptions_=function(e){e?(this.attrs_.xValueParser=l.dateParser,this.attrs_.axes.x.valueFormatter=l.dateValueFormatter,this.attrs_.axes.x.ticker=l.dateTicker,this.attrs_.axes.x.axisLabelFormatter=l.dateAxisLabelFormatter):(this.attrs_.xValueParser=function(e){return parseFloat(e)},this.attrs_.axes.x.valueFormatter=function(e){return e},this.attrs_.axes.x.ticker=l.numericTicks,this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter)},l.prototype.parseCSV_=function(e){var t=[],a=l.detectLineDelimiter(e),n=e.split(a||'\n'),o=this.getStringOption('delimiter'),s,r;-1==n[0].indexOf(o)&&0<=n[0].indexOf('\t')&&(o='\t');var d=0;'labels'in this.user_attrs_||(d=1,this.attrs_.labels=n[0].split(o),this.attributes_.reparseSeries());for(var p=0,h=!1,g=this.attr_('labels').length,c=!1,u=d,i,y;u<n.length;u++)if(y=n[u],p=u,0!==y.length&&'#'!=y[0]){var _=y.split(o);if(!(2>_.length)){var x=[];if(h||(this.detectTypeFromString_(_[0]),i=this.getFunctionOption('xValueParser'),h=!0),x[0]=i(_[0],this),this.fractions_)for(r=1;r<_.length;r++)s=_[r].split('/'),2==s.length?x[r]=[l.parseFloat_(s[0],u,y),l.parseFloat_(s[1],u,y)]:(console.error('Expected fractional "num/den" values in CSV data but found a value \''+_[r]+'\' on line '+(1+u)+' (\''+y+'\') which is not of this form.'),x[r]=[0,0]);else if(this.getBooleanOption('errorBars'))for(1!=_.length%2&&console.error('Expected alternating (value, stdev.) pairs in CSV data but line '+(1+u)+' has an odd number of values ('+(_.length-1)+'): \''+y+'\''),r=1;r<_.length;r+=2)x[(r+1)/2]=[l.parseFloat_(_[r],u,y),l.parseFloat_(_[r+1],u,y)];else if(this.getBooleanOption('customBars'))for(r=1;r<_.length;r++){var f=_[r];/^ *$/.test(f)?x[r]=[null,null,null]:(s=f.split(';'),3==s.length?x[r]=[l.parseFloat_(s[0],u,y),l.parseFloat_(s[1],u,y),l.parseFloat_(s[2],u,y)]:console.warn('When using customBars, values must be either blank or "low;center;high" tuples (got "'+f+'" on line '+(1+u)))}else for(r=1;r<_.length;r++)x[r]=l.parseFloat_(_[r],u,y);if(0<t.length&&x[0]<t[t.length-1][0]&&(c=!0),x.length!=g&&console.error('Number of columns in line '+u+' ('+x.length+') does not agree with number of labels ('+g+') '+y),0===u&&this.attr_('labels')){var m=!0;for(r=0;m&&r<x.length;r++)x[r]&&(m=!1);if(m){console.warn('The dygraphs \'labels\' option is set, but the first row of CSV data (\''+y+'\') appears to also contain labels. Will drop the CSV labels and use the option labels.');continue}}t.push(x)}}return c&&(console.warn('CSV is out of order; order it correctly to speed loading.'),t.sort(function(e,t){return e[0]-t[0]})),t},l.prototype.parseArray_=function(e){if(0===e.length)return console.error('Can\'t plot empty data set'),null;if(0===e[0].length)return console.error('Data set cannot contain an empty row'),null;var t;if(null===this.attr_('labels')){for(console.warn('Using default labels. Set labels explicitly via \'labels\' in the options parameter'),this.attrs_.labels=['X'],t=1;t<e[0].length;t++)this.attrs_.labels.push('Y'+t);this.attributes_.reparseSeries()}else{var a=this.attr_('labels');if(a.length!=e[0].length)return console.error('Mismatch between number of labels ('+a+') and number of columns in array ('+e[0].length+')'),null}if(l.isDateLike(e[0][0])){this.attrs_.axes.x.valueFormatter=l.dateValueFormatter,this.attrs_.axes.x.ticker=l.dateTicker,this.attrs_.axes.x.axisLabelFormatter=l.dateAxisLabelFormatter;var i=l.clone(e);for(t=0;t<e.length;t++){if(0===i[t].length)return console.error('Row '+(1+t)+' of data is empty'),null;if(null===i[t][0]||'function'!=typeof i[t][0].getTime||isNaN(i[t][0].getTime()))return console.error('x value in row '+(1+t)+' is not a Date'),null;i[t][0]=i[t][0].getTime()}return i}return this.attrs_.axes.x.valueFormatter=function(e){return e},this.attrs_.axes.x.ticker=l.numericTicks,this.attrs_.axes.x.axisLabelFormatter=l.numberAxisLabelFormatter,e},l.prototype.parseDataTable_=function(e){var t=function(e){var t=String.fromCharCode,a=t(65+e%26);for(e=i(e/26);0<e;)a=t(65+(e-1)%26)+a.toLowerCase(),e=i((e-1)/26);return a},a=e.getNumberOfColumns(),n=e.getNumberOfRows(),o=e.getColumnType(0);if('date'==o||'datetime'==o)this.attrs_.xValueParser=l.dateParser,this.attrs_.axes.x.valueFormatter=l.dateValueFormatter,this.attrs_.axes.x.ticker=l.dateTicker,this.attrs_.axes.x.axisLabelFormatter=l.dateAxisLabelFormatter;else if('number'==o)this.attrs_.xValueParser=function(e){return parseFloat(e)},this.attrs_.axes.x.valueFormatter=function(e){return e},this.attrs_.axes.x.ticker=l.numericTicks,this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter;else return console.error('only \'date\', \'datetime\' and \'number\' types are supported for column 1 of DataTable input (Got \''+o+'\')'),null;var s=[],r={},d=!1,p,h;for(p=1;p<a;p++){var g=e.getColumnType(p);if('number'==g)s.push(p);else if('string'==g&&this.getBooleanOption('displayAnnotations')){var c=s[s.length-1];r.hasOwnProperty(c)?r[c].push(p):r[c]=[p],d=!0}else console.error('Only \'number\' is supported as a dependent type with Gviz. \'string\' is only supported if displayAnnotations is true')}var u=[e.getColumnLabel(0)];for(p=0;p<s.length;p++)u.push(e.getColumnLabel(s[p])),this.getBooleanOption('errorBars')&&(p+=1);this.attrs_.labels=u,a=u.length;var y=[],_=!1,x=[];for(p=0;p<n;p++){var f=[];if('undefined'===typeof e.getValue(p,0)||null===e.getValue(p,0)){console.warn('Ignoring row '+p+' of DataTable because of undefined or null first column.');continue}if('date'==o||'datetime'==o?f.push(e.getValue(p,0).getTime()):f.push(e.getValue(p,0)),!this.getBooleanOption('errorBars')){for(h=0;h<s.length;h++){var m=s[h];if(f.push(e.getValue(p,m)),d&&r.hasOwnProperty(m)&&null!==e.getValue(p,r[m][0])){for(var b={series:e.getColumnLabel(m),xval:f[0],shortText:t(x.length),text:''},v=0;v<r[m].length;v++)v&&(b.text+='\n'),b.text+=e.getValue(p,r[m][v]);x.push(b)}}for(h=0;h<f.length;h++)isFinite(f[h])||(f[h]=null)}else for(h=0;h<a-1;h++)f.push([e.getValue(p,1+2*h),e.getValue(p,2+2*h)]);0<y.length&&f[0]<y[y.length-1][0]&&(_=!0),y.push(f)}_&&(console.warn('DataTable is out of order; order it correctly to speed loading.'),y.sort(function(e,t){return e[0]-t[0]})),this.rawData_=y,0<x.length&&this.setAnnotations(x,!0),this.attributes_.reparseSeries()},l.prototype.cascadeDataDidUpdateEvent_=function(){this.cascadeEvents_('dataDidUpdate',{})},l.prototype.start_=function(){var e=this.file_;if('function'==typeof e&&(e=e()),l.isArrayLike(e))this.rawData_=this.parseArray_(e),this.cascadeDataDidUpdateEvent_(),this.predraw_();else if('object'==typeof e&&'function'==typeof e.getColumnRange)this.parseDataTable_(e),this.cascadeDataDidUpdateEvent_(),this.predraw_();else if('string'==typeof e){var t=l.detectLineDelimiter(e);if(t)this.loadedEvent_(e);else{var a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject('Microsoft.XMLHTTP');var i=this;a.onreadystatechange=function(){4==a.readyState&&(200===a.status||0===a.status)&&i.loadedEvent_(a.responseText)},a.open('GET',e,!0),a.send(null)}}else console.error('Unknown data format: '+typeof e)},l.prototype.updateOptions=function(e,t){'undefined'==typeof t&&(t=!1);var a=e.file,i=l.mapLegacyOptions_(e);'rollPeriod'in i&&(this.rollPeriod_=i.rollPeriod),'dateWindow'in i&&(this.dateWindow_=i.dateWindow,!('isZoomedIgnoreProgrammaticZoom'in i)&&(this.zoomed_x_=null!==i.dateWindow)),'valueRange'in i&&!('isZoomedIgnoreProgrammaticZoom'in i)&&(this.zoomed_y_=null!==i.valueRange);var n=l.isPixelChangingOptionList(this.attr_('labels'),i);l.updateDeep(this.user_attrs_,i),this.attributes_.reparseSeries(),a?(this.cascadeEvents_('dataWillUpdate',{}),this.file_=a,!t&&this.start_()):!t&&(n?this.predraw_():this.renderGraph_(!1))},l.mapLegacyOptions_=function(e){var t={};for(var a in e)e.hasOwnProperty(a)&&'file'!=a&&e.hasOwnProperty(a)&&(t[a]=e[a]);var i=function(e,a,i){t.axes||(t.axes={}),t.axes[e]||(t.axes[e]={}),t.axes[e][a]=i},n=function(a,n,o){'undefined'!=typeof e[a]&&(console.warn('Option '+a+' is deprecated. Use the '+o+' option for the '+n+' axis instead. (e.g. { axes : { '+n+' : { '+o+' : ... } } } (see http://dygraphs.com/per-axis.html for more information.'),i(n,o,e[a]),delete t[a])};return n('xValueFormatter','x','valueFormatter'),n('pixelsPerXLabel','x','pixelsPerLabel'),n('xAxisLabelFormatter','x','axisLabelFormatter'),n('xTicker','x','ticker'),n('yValueFormatter','y','valueFormatter'),n('pixelsPerYLabel','y','pixelsPerLabel'),n('yAxisLabelFormatter','y','axisLabelFormatter'),n('yTicker','y','ticker'),n('drawXGrid','x','drawGrid'),n('drawXAxis','x','drawAxis'),n('drawYGrid','y','drawGrid'),n('drawYAxis','y','drawAxis'),n('xAxisLabelWidth','x','axisLabelWidth'),n('yAxisLabelWidth','y','axisLabelWidth'),t},l.prototype.resize=function(e,t){if(!this.resize_lock){this.resize_lock=!0,null===e!=(null===t)&&(console.warn('Dygraph.resize() should be called with zero parameters or two non-NULL parameters. Pretending it was zero.'),e=t=null);var a=this.width_,i=this.height_;e?(this.maindiv_.style.width=e+'px',this.maindiv_.style.height=t+'px',this.width_=e,this.height_=t):(this.width_=this.maindiv_.clientWidth,this.height_=this.maindiv_.clientHeight),(a!=this.width_||i!=this.height_)&&(this.resizeElements_(),this.predraw_()),this.resize_lock=!1}},l.prototype.adjustRoll=function(e){this.rollPeriod_=e,this.predraw_()},l.prototype.visibility=function(){for(this.getOption('visibility')||(this.attrs_.visibility=[]);this.getOption('visibility').length<this.numColumns()-1;)this.attrs_.visibility.push(!0);return this.getOption('visibility')},l.prototype.setVisibility=function(e,t){var a=this.visibility();0>e||e>=a.length?console.warn('invalid series number in setVisibility: '+e):(a[e]=t,this.predraw_())},l.prototype.size=function(){return{width:this.width_,height:this.height_}},l.prototype.setAnnotations=function(e,t){return l.addAnnotationRule(),this.annotations_=e,this.layout_?void(this.layout_.setAnnotations(this.annotations_),!t&&this.predraw_()):void console.warn('Tried to setAnnotations before dygraph was ready. Try setting them in a ready() block. See dygraphs.com/tests/annotation.html')},l.prototype.annotations=function(){return this.annotations_},l.prototype.getLabels=function(){var e=this.attr_('labels');return e?e.slice():null},l.prototype.indexFromSetName=function(e){return this.setIndexByName_[e]},l.prototype.ready=function(e){this.is_initial_draw_?this.readyFns_.push(e):e.call(this,this)},l.addAnnotationRule=function(){if(!l.addedAnnotationCSS){var e='border: 1px solid black; background-color: white; text-align: center;',t=document.createElement('style');t.type='text/css',document.getElementsByTagName('head')[0].appendChild(t);for(var a=0;a<document.styleSheets.length;a++)if(!document.styleSheets[a].disabled){var i=document.styleSheets[a];try{if(i.insertRule){var n=i.cssRules?i.cssRules.length:0;i.insertRule('.dygraphDefaultAnnotation { '+e+' }',n)}else i.addRule&&i.addRule('.dygraphDefaultAnnotation',e);return void(l.addedAnnotationCSS=!0)}catch(e){}}console.warn('Unable to add default annotation CSS rule; display may be off.')}},'object'===typeof exports&&'undefined'!==typeof module&&(module.exports=l),l}();(function(){'use strict';function e(e){var t=s.exec(e);if(!t)return null;var a=parseInt(t[1],10),i=parseInt(t[2],10),n=parseInt(t[3],10);return t[4]?{r:a,g:i,b:n,a:parseFloat(t[4])}:{r:a,g:i,b:n}}var t=Math.log,a=Math.min,n=Math.floor,i=Math.pow;Dygraph.LOG_SCALE=10,Dygraph.LN_TEN=t(Dygraph.LOG_SCALE),Dygraph.log10=function(e){return t(e)/Dygraph.LN_TEN},Dygraph.DOTTED_LINE=[2,2],Dygraph.DASHED_LINE=[7,3],Dygraph.DOT_DASH_LINE=[7,2,2,2],Dygraph.getContext=function(e){return e.getContext('2d')},Dygraph.addEvent=function(e,t,a){e.addEventListener?e.addEventListener(t,a,!1):(e[t+a]=function(){a(window.event)},e.attachEvent('on'+t,e[t+a]))},Dygraph.prototype.addAndTrackEvent=function(e,t,a){Dygraph.addEvent(e,t,a),this.registeredEvents_.push({elem:e,type:t,fn:a})},Dygraph.removeEvent=function(e,t,a){if(e.removeEventListener)e.removeEventListener(t,a,!1);else{try{e.detachEvent('on'+t,e[t+a])}catch(t){}e[t+a]=null}},Dygraph.prototype.removeTrackedEvents_=function(){if(this.registeredEvents_)for(var e=0,t;e<this.registeredEvents_.length;e++)t=this.registeredEvents_[e],Dygraph.removeEvent(t.elem,t.type,t.fn);this.registeredEvents_=[]},Dygraph.cancelEvent=function(t){return t=t?t:window.event,t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.cancel=!0,t.returnValue=!1,!1},Dygraph.hsvToRGB=function(e,a,o){var s,r,l;if(0===a)s=o,r=o,l=o;else{var d=n(6*e),i=6*e-d,h=o*(1-a),p=o*(1-a*i),g=o*(1-a*(1-i));1===d?(s=p,r=o,l=h):2===d?(s=h,r=o,l=g):3===d?(s=h,r=p,l=o):4===d?(s=g,r=h,l=o):5===d?(s=o,r=h,l=p):6===d||0===d?(s=o,r=g,l=h):void 0}return s=n(255*s+0.5),r=n(255*r+0.5),l=n(255*l+0.5),'rgb('+s+','+r+','+l+')'},Dygraph.findPos=function(e){var t=0,a=0;if(e.offsetParent)for(var i=e;;){var n='0',o='0';if(window.getComputedStyle){var s=window.getComputedStyle(i,null);n=s.borderLeft||'0',o=s.borderTop||'0'}if(t+=parseInt(n,10),a+=parseInt(o,10),t+=i.offsetLeft,a+=i.offsetTop,!i.offsetParent)break;i=i.offsetParent}else e.x&&(t+=e.x),e.y&&(a+=e.y);for(;e&&e!=document.body;)t-=e.scrollLeft,a-=e.scrollTop,e=e.parentNode;return{x:t,y:a}},Dygraph.pageX=function(t){if(t.pageX)return!t.pageX||0>t.pageX?0:t.pageX;var e=document.documentElement,a=document.body;return t.clientX+(e.scrollLeft||a.scrollLeft)-(e.clientLeft||0)},Dygraph.pageY=function(t){if(t.pageY)return!t.pageY||0>t.pageY?0:t.pageY;var e=document.documentElement,a=document.body;return t.clientY+(e.scrollTop||a.scrollTop)-(e.clientTop||0)},Dygraph.dragGetX_=function(t,e){return Dygraph.pageX(t)-e.px},Dygraph.dragGetY_=function(t,e){return Dygraph.pageY(t)-e.py},Dygraph.isOK=function(e){return!!e&&!isNaN(e)},Dygraph.isValidPoint=function(e,t){return!!e&&null!==e.yval&&(null===e.x||void 0===e.x?!1:null===e.y||void 0===e.y?!1:isNaN(e.x)||!t&&isNaN(e.y)?!1:!0)},Dygraph.floatFormat=function(e,t){var i=a(Math.max(1,t||2),21);return 1e-3>Math.abs(e)&&0!==e?e.toExponential(i-1):e.toPrecision(i)},Dygraph.zeropad=function(e){return 10>e?'0'+e:''+e},Dygraph.DateAccessorsLocal={getFullYear:function(e){return e.getFullYear()},getMonth:function(e){return e.getMonth()},getDate:function(e){return e.getDate()},getHours:function(e){return e.getHours()},getMinutes:function(e){return e.getMinutes()},getSeconds:function(e){return e.getSeconds()},getMilliseconds:function(e){return e.getMilliseconds()},getDay:function(e){return e.getDay()},makeDate:function(e,t,a,i,n,o,s){return new Date(e,t,a,i,n,o,s)}},Dygraph.DateAccessorsUTC={getFullYear:function(e){return e.getUTCFullYear()},getMonth:function(e){return e.getUTCMonth()},getDate:function(e){return e.getUTCDate()},getHours:function(e){return e.getUTCHours()},getMinutes:function(e){return e.getUTCMinutes()},getSeconds:function(e){return e.getUTCSeconds()},getMilliseconds:function(e){return e.getUTCMilliseconds()},getDay:function(e){return e.getUTCDay()},makeDate:function(e,t,a,i,n,o,s){return new Date(Date.UTC(e,t,a,i,n,o,s))}},Dygraph.hmsString_=function(e,t,a){var i=Dygraph.zeropad,n=i(e)+':'+i(t);return a&&(n+=':'+i(a)),n},Dygraph.dateString_=function(e,t){var a=Dygraph.zeropad,i=t?Dygraph.DateAccessorsUTC:Dygraph.DateAccessorsLocal,n=new Date(e),o=i.getFullYear(n),s=i.getMonth(n),r=i.getDate(n),l=i.getHours(n),d=i.getMinutes(n),p=i.getSeconds(n),h=a(s+1),g=a(r),c=''+o+'/'+h+'/'+g;return 3600*l+60*d+p&&(c+=' '+Dygraph.hmsString_(l,d,p)),c},Dygraph.round_=function(e,t){var a=i(10,t);return Math.round(e*a)/a},Dygraph.binarySearch=function(e,t,a,i,n){if((null===i||void 0===i||null===n||void 0===n)&&(i=0,n=t.length-1),i>n)return-1;(null===a||void 0===a)&&(a=0);var o=function(e){return 0<=e&&e<t.length},s=parseInt((i+n)/2,10),r=t[s],l;return r==e?s:r>e?0<a&&(l=s-1,o(l)&&t[l]<e)?s:Dygraph.binarySearch(e,t,a,i,s-1):r<e?0>a&&(l=s+1,o(l)&&t[l]>e)?s:Dygraph.binarySearch(e,t,a,s+1,n):-1},Dygraph.dateParser=function(e){var t,a;if((-1==e.search('-')||-1!=e.search('T')||-1!=e.search('Z'))&&(a=Dygraph.dateStrToMillis(e),a&&!isNaN(a)))return a;if(-1!=e.search('-')){for(t=e.replace('-','/','g');-1!=t.search('-');)t=t.replace('-','/');a=Dygraph.dateStrToMillis(t)}else 8==e.length?(t=e.substr(0,4)+'/'+e.substr(4,2)+'/'+e.substr(6,2),a=Dygraph.dateStrToMillis(t)):a=Dygraph.dateStrToMillis(e);return(!a||isNaN(a))&&console.error('Couldn\'t parse '+e+' as a date'),a},Dygraph.dateStrToMillis=function(e){return new Date(e).getTime()},Dygraph.update=function(e,t){if('undefined'!=typeof t&&null!==t)for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e},Dygraph.updateDeep=function(e,t){function a(e){return'object'===typeof Node?e instanceof Node:'object'===typeof e&&'number'===typeof e.nodeType&&'string'===typeof e.nodeName}if('undefined'!=typeof t&&null!==t)for(var i in t)t.hasOwnProperty(i)&&(null===t[i]?e[i]=null:Dygraph.isArrayLike(t[i])?e[i]=t[i].slice():a(t[i])?e[i]=t[i]:'object'==typeof t[i]?(('object'!=typeof e[i]||null===e[i])&&(e[i]={}),Dygraph.updateDeep(e[i],t[i])):e[i]=t[i]);return e},Dygraph.isArrayLike=function(e){var t=typeof e;return'object'!=t&&('function'!=t||'function'!=typeof e.item)||null===e||'number'!=typeof e.length||3===e.nodeType?!1:!0},Dygraph.isDateLike=function(e){return'object'!=typeof e||null===e||'function'!=typeof e.getTime?!1:!0},Dygraph.clone=function(e){for(var t=[],a=0;a<e.length;a++)Dygraph.isArrayLike(e[a])?t.push(Dygraph.clone(e[a])):t.push(e[a]);return t},Dygraph.createCanvas=function(){var e=document.createElement('canvas'),t=/MSIE/.test(navigator.userAgent)&&!window.opera;return t&&'undefined'!=typeof G_vmlCanvasManager&&(e=G_vmlCanvasManager.initElement(e)),e},Dygraph.getContextPixelRatio=function(e){try{var t=window.devicePixelRatio,a=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return void 0===t?1:t/a}catch(t){return 1}},Dygraph.isAndroid=function(){return /Android/.test(navigator.userAgent)},Dygraph.Iterator=function(e,t,i,n){t=t||0,i=i||e.length,this.hasNext=!0,this.peek=null,this.start_=t,this.array_=e,this.predicate_=n,this.end_=a(e.length,t+i),this.nextIdx_=t-1,this.next()},Dygraph.Iterator.prototype.next=function(){if(!this.hasNext)return null;for(var e=this.peek,t=this.nextIdx_+1,a=!1;t<this.end_;){if(!this.predicate_||this.predicate_(this.array_,t)){this.peek=this.array_[t],a=!0;break}t++}return this.nextIdx_=t,a||(this.hasNext=!1,this.peek=null),e},Dygraph.createIterator=function(e,t,a,i){return new Dygraph.Iterator(e,t,a,i)},Dygraph.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),Dygraph.repeatAndCleanup=function(e,t,a,i){var o=0,s=new Date().getTime(),r;if(e(o),1==t)return void i();var l=t-1;(function d(){o>=t||Dygraph.requestAnimFrame.call(window,function(){var t=new Date().getTime();r=o,o=n((t-s)/a);var p=o-r,h=o+p>l;h||o>=l?(e(l),i()):(0!==p&&e(o),d())})})()};var o={annotationClickHandler:!0,annotationDblClickHandler:!0,annotationMouseOutHandler:!0,annotationMouseOverHandler:!0,axisLabelColor:!0,axisLineColor:!0,axisLineWidth:!0,clickCallback:!0,drawCallback:!0,drawHighlightPointCallback:!0,drawPoints:!0,drawPointCallback:!0,drawXGrid:!0,drawYGrid:!0,fillAlpha:!0,gridLineColor:!0,gridLineWidth:!0,hideOverlayOnMouseOut:!0,highlightCallback:!0,highlightCircleSize:!0,interactionModel:!0,isZoomedIgnoreProgrammaticZoom:!0,labelsDiv:!0,labelsDivStyles:!0,labelsDivWidth:!0,labelsKMB:!0,labelsKMG2:!0,labelsSeparateLines:!0,labelsShowZeroValues:!0,legend:!0,panEdgeFraction:!0,pixelsPerYLabel:!0,pointClickCallback:!0,pointSize:!0,rangeSelectorPlotFillColor:!0,rangeSelectorPlotStrokeColor:!0,showLabelsOnHighlight:!0,showRoller:!0,strokeWidth:!0,underlayCallback:!0,unhighlightCallback:!0,zoomCallback:!0};Dygraph.isPixelChangingOptionList=function(e,t){var a={};if(e)for(var n=1;n<e.length;n++)a[e[n]]=!0;var i=function(e){for(var t in e)if(e.hasOwnProperty(t)&&!o[t])return!0;return!1};for(var s in t)if(t.hasOwnProperty(s))if('highlightSeriesOpts'==s||a[s]&&!t.series){if(i(t[s]))return!0;}else if('series'==s||'axes'==s){var r=t[s];for(var l in r)if(r.hasOwnProperty(l)&&i(r[l]))return!0}else if(!o[s])return!0;return!1},Dygraph.Circles={DEFAULT:function(e,t,a,i,n,o,s){a.beginPath(),a.fillStyle=o,a.arc(i,n,s,0,2*Math.PI,!1),a.fill()}},Dygraph.IFrameTarp=function(){this.tarps=[]},Dygraph.IFrameTarp.prototype.cover=function(){for(var e=document.getElementsByTagName('iframe'),t=0;t<e.length;t++){var a=e[t],i=Dygraph.findPos(a),n=i.x,o=i.y,s=a.offsetWidth,r=a.offsetHeight,l=document.createElement('div');l.style.position='absolute',l.style.left=n+'px',l.style.top=o+'px',l.style.width=s+'px',l.style.height=r+'px',l.style.zIndex=999,document.body.appendChild(l),this.tarps.push(l)}},Dygraph.IFrameTarp.prototype.uncover=function(){for(var e=0;e<this.tarps.length;e++)this.tarps[e].parentNode.removeChild(this.tarps[e]);this.tarps=[]},Dygraph.detectLineDelimiter=function(e){for(var t=0,a;t<e.length;t++){if(a=e.charAt(t),'\r'===a)return t+1<e.length&&'\n'===e.charAt(t+1)?'\r\n':a;if('\n'===a)return t+1<e.length&&'\r'===e.charAt(t+1)?'\n\r':a}return null},Dygraph.isNodeContainedBy=function(e,t){if(null===t||null===e)return!1;for(var a=e;a&&a!==t;)a=a.parentNode;return a===t},Dygraph.pow=function(e,t){return 0>t?1/i(e,-t):i(e,t)};var s=/^rgba?\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(?:,\s*([01](?:\.\d+)?))?\)$/;Dygraph.toRGB_=function(t){var a=e(t);if(a)return a;var i=document.createElement('div');i.style.backgroundColor=t,i.style.visibility='hidden',document.body.appendChild(i);var n;return n=window.getComputedStyle?window.getComputedStyle(i,null).backgroundColor:i.currentStyle.backgroundColor,document.body.removeChild(i),e(n)},Dygraph.isCanvasSupported=function(e){var t;try{t=e||document.createElement('canvas'),t.getContext('2d')}catch(t){var a=navigator.appVersion.match(/MSIE (\d\.\d)/),i=-1!=navigator.userAgent.toLowerCase().indexOf('opera');return!a||6>a[1]||i?!1:!0}return!0},Dygraph.parseFloat_=function(e,t,a){var i=parseFloat(e);if(!isNaN(i))return i;if(/^ *$/.test(e))return null;if(/^ *nan *$/i.test(e))return NaN;var n='Unable to parse \''+e+'\' as a number';return void 0!==a&&void 0!==t&&(n+=' on line '+(1+(t||0))+' (\''+a+'\') of CSV.'),console.error(n),null}})(),function(){'use strict';Dygraph.GVizChart=function(e){this.container=e},Dygraph.GVizChart.prototype.draw=function(e,t){this.container.innerHTML='','undefined'!=typeof this.date_graph&&this.date_graph.destroy(),this.date_graph=new Dygraph(this.container,e,t)},Dygraph.GVizChart.prototype.setSelection=function(e){var t=!1;e.length&&(t=e[0].row),this.date_graph.setSelection(t)},Dygraph.GVizChart.prototype.getSelection=function(){var e=[],t=this.date_graph.getSelection();if(0>t)return e;for(var a=this.date_graph.layout_.points,i=0;i<a.length;++i)e.push({row:t,column:i+1});return e}}(),function(){'use strict';var e=Math.max,a=Math.min,t=Math.pow,i=Math.abs;Dygraph.Interaction={},Dygraph.Interaction.maybeTreatMouseOpAsClick=function(e,t,a){a.dragEndX=Dygraph.dragGetX_(e,a),a.dragEndY=Dygraph.dragGetY_(e,a);var n=i(a.dragEndX-a.dragStartX),o=i(a.dragEndY-a.dragStartY);2>n&&2>o&&t.lastx_!==void 0&&-1!=t.lastx_&&Dygraph.Interaction.treatMouseOpAsClick(t,e,a),a.regionWidth=n,a.regionHeight=o},Dygraph.Interaction.startPan=function(e,t,a){var n,i;a.isPanning=!0;var o=t.xAxisRange();if(t.getOptionForAxis('logscale','x')?(a.initialLeftmostDate=Dygraph.log10(o[0]),a.dateRange=Dygraph.log10(o[1])-Dygraph.log10(o[0])):(a.initialLeftmostDate=o[0],a.dateRange=o[1]-o[0]),a.xUnitsPerPixel=a.dateRange/(t.plotter_.area.w-1),t.getNumericOption('panEdgeFraction')){var s=t.width_*t.getNumericOption('panEdgeFraction'),r=t.xAxisExtremes(),l=t.toDomXCoord(r[0])-s,d=t.toDomXCoord(r[1])+s,p=t.toDataXCoord(l),h=t.toDataXCoord(d);a.boundedDates=[p,h];var g=[],c=t.height_*t.getNumericOption('panEdgeFraction');for(n=0;n<t.axes_.length;n++){i=t.axes_[n];var u=i.extremeRange,y=t.toDomYCoord(u[0],n)+c,_=t.toDomYCoord(u[1],n)-c,x=t.toDataYCoord(y,n),f=t.toDataYCoord(_,n);g[n]=[x,f]}a.boundedValues=g}for(a.is2DPan=!1,a.axes=[],n=0;n<t.axes_.length;n++){i=t.axes_[n];var m={},b=t.yAxisRange(n),v=t.attributes_.getForAxis('logscale',n);v?(m.initialTopValue=Dygraph.log10(b[1]),m.dragValueRange=Dygraph.log10(b[1])-Dygraph.log10(b[0])):(m.initialTopValue=b[1],m.dragValueRange=b[1]-b[0]),m.unitsPerPixel=m.dragValueRange/(t.plotter_.area.h-1),a.axes.push(m),(i.valueWindow||i.valueRange)&&(a.is2DPan=!0)}},Dygraph.Interaction.movePan=function(n,o,s){s.dragEndX=Dygraph.dragGetX_(n,s),s.dragEndY=Dygraph.dragGetY_(n,s);var r=s.initialLeftmostDate-(s.dragEndX-s.dragStartX)*s.xUnitsPerPixel;s.boundedDates&&(r=e(r,s.boundedDates[0]));var l=r+s.dateRange;if(s.boundedDates&&l>s.boundedDates[1]&&(r-=l-s.boundedDates[1],l=r+s.dateRange),o.dateWindow_=o.getOptionForAxis('logscale','x')?[t(Dygraph.LOG_SCALE,r),t(Dygraph.LOG_SCALE,l)]:[r,l],s.is2DPan)for(var d=s.dragEndY-s.dragStartY,p=0;p<o.axes_.length;p++){var i=o.axes_[p],h=s.axes[p],g=d*h.unitsPerPixel,c=s.boundedValues?s.boundedValues[p]:null,u=h.initialTopValue+g;c&&(u=a(u,c[1]));var y=u-h.dragValueRange;c&&y<c[0]&&(u-=y-c[0],y=u-h.dragValueRange),i.valueWindow=o.attributes_.getForAxis('logscale',p)?[t(Dygraph.LOG_SCALE,y),t(Dygraph.LOG_SCALE,u)]:[y,u]}o.drawGraph_(!1)},Dygraph.Interaction.endPan=Dygraph.Interaction.maybeTreatMouseOpAsClick,Dygraph.Interaction.startZoom=function(e,t,a){a.isZooming=!0,a.zoomMoved=!1},Dygraph.Interaction.moveZoom=function(e,t,a){a.zoomMoved=!0,a.dragEndX=Dygraph.dragGetX_(e,a),a.dragEndY=Dygraph.dragGetY_(e,a);var n=i(a.dragStartX-a.dragEndX),o=i(a.dragStartY-a.dragEndY);a.dragDirection=n<o/2?Dygraph.VERTICAL:Dygraph.HORIZONTAL,t.drawZoomRect_(a.dragDirection,a.dragStartX,a.dragEndX,a.dragStartY,a.dragEndY,a.prevDragDirection,a.prevEndX,a.prevEndY),a.prevEndX=a.dragEndX,a.prevEndY=a.dragEndY,a.prevDragDirection=a.dragDirection},Dygraph.Interaction.treatMouseOpAsClick=function(a,n,o){for(var s=a.getFunctionOption('clickCallback'),r=a.getFunctionOption('pointClickCallback'),l=null,d=-1,h=Number.MAX_VALUE,g=0;g<a.selPoints_.length;g++){var i=a.selPoints_[g],p=t(i.canvasx-o.dragEndX,2)+t(i.canvasy-o.dragEndY,2);!isNaN(p)&&(-1==d||p<h)&&(h=p,d=g)}var c=a.getNumericOption('highlightCircleSize')+2;if(h<=c*c&&(l=a.selPoints_[d]),l){var u={cancelable:!0,point:l,canvasx:o.dragEndX,canvasy:o.dragEndY},e=a.cascadeEvents_('pointClick',u);if(e)return;r&&r.call(a,n,l)}var u={cancelable:!0,xval:a.lastx_,pts:a.selPoints_,canvasx:o.dragEndX,canvasy:o.dragEndY};!a.cascadeEvents_('click',u)&&s&&s.call(a,n,a.lastx_,a.selPoints_)},Dygraph.Interaction.endZoom=function(t,i,n){i.clearZoomRect_(),n.isZooming=!1,Dygraph.Interaction.maybeTreatMouseOpAsClick(t,i,n);var o=i.getArea();if(10<=n.regionWidth&&n.dragDirection==Dygraph.HORIZONTAL){var s=a(n.dragStartX,n.dragEndX),r=e(n.dragStartX,n.dragEndX);s=e(s,o.x),r=a(r,o.x+o.w),s<r&&i.doZoomX_(s,r),n.cancelNextDblclick=!0}else if(10<=n.regionHeight&&n.dragDirection==Dygraph.VERTICAL){var l=a(n.dragStartY,n.dragEndY),d=e(n.dragStartY,n.dragEndY);l=e(l,o.y),d=a(d,o.y+o.h),l<d&&i.doZoomY_(l,d),n.cancelNextDblclick=!0}n.dragStartX=null,n.dragStartY=null},Dygraph.Interaction.startTouch=function(e,a,n){e.preventDefault(),1<e.touches.length&&(n.startTimeForDoubleTapMs=null);for(var o=[],s=0,r;s<e.touches.length;s++)r=e.touches[s],o.push({pageX:r.pageX,pageY:r.pageY,dataX:a.toDataXCoord(r.pageX),dataY:a.toDataYCoord(r.pageY)});if(n.initialTouches=o,1==o.length)n.initialPinchCenter=o[0],n.touchDirections={x:!0,y:!0};else if(2<=o.length){n.initialPinchCenter={pageX:0.5*(o[0].pageX+o[1].pageX),pageY:0.5*(o[0].pageY+o[1].pageY),dataX:0.5*(o[0].dataX+o[1].dataX),dataY:0.5*(o[0].dataY+o[1].dataY)};var t=180/Math.PI*Math.atan2(n.initialPinchCenter.pageY-o[0].pageY,o[0].pageX-n.initialPinchCenter.pageX);t=i(t),90<t&&(t=90-t),n.touchDirections={x:t<90-45/2,y:t>45/2}}n.initialRange={x:a.xAxisRange(),y:a.yAxisRange()}},Dygraph.Interaction.moveTouch=function(n,o,s){s.startTimeForDoubleTapMs=null;var r=[],l;for(l=0;l<n.touches.length;l++){var i=n.touches[l];r.push({pageX:i.pageX,pageY:i.pageY})}var t=s.initialTouches,d=s.initialPinchCenter,p;p=1==r.length?r[0]:{pageX:0.5*(r[0].pageX+r[1].pageX),pageY:0.5*(r[0].pageY+r[1].pageY)};var h={pageX:p.pageX-d.pageX,pageY:p.pageY-d.pageY},g=s.initialRange.x[1]-s.initialRange.x[0],c=s.initialRange.y[0]-s.initialRange.y[1];h.dataX=h.pageX/o.plotter_.area.w*g,h.dataY=h.pageY/o.plotter_.area.h*c;var u,y;if(1==r.length)u=1,y=1;else if(2<=r.length){var _=t[1].pageX-d.pageX;u=(r[1].pageX-p.pageX)/_;var x=t[1].pageY-d.pageY;y=(r[1].pageY-p.pageY)/x}u=a(8,e(0.125,u)),y=a(8,e(0.125,y));var f=!1;if(s.touchDirections.x&&(o.dateWindow_=[d.dataX-h.dataX+(s.initialRange.x[0]-d.dataX)/u,d.dataX-h.dataX+(s.initialRange.x[1]-d.dataX)/u],f=!0),s.touchDirections.y)for(l=0;1>l;l++){var m=o.axes_[l],b=o.attributes_.getForAxis('logscale',l);b||(m.valueWindow=[d.dataY-h.dataY+(s.initialRange.y[0]-d.dataY)/y,d.dataY-h.dataY+(s.initialRange.y[1]-d.dataY)/y],f=!0)}if(o.drawGraph_(!1),f&&1<r.length&&o.getFunctionOption('zoomCallback')){var v=o.xAxisRange();o.getFunctionOption('zoomCallback').call(o,v[0],v[1],o.yAxisRanges())}},Dygraph.Interaction.endTouch=function(e,a,n){if(0!==e.touches.length)Dygraph.Interaction.startTouch(e,a,n);else if(1==e.changedTouches.length){var o=new Date().getTime(),s=e.changedTouches[0];n.startTimeForDoubleTapMs&&500>o-n.startTimeForDoubleTapMs&&n.doubleTapX&&50>i(n.doubleTapX-s.screenX)&&n.doubleTapY&&50>i(n.doubleTapY-s.screenY)?a.resetZoom():(n.startTimeForDoubleTapMs=o,n.doubleTapX=s.screenX,n.doubleTapY=s.screenY)}};var n=function(e,t,a){return e<t?t-e:e>a?e-a:0},o=function(t,a){var i=Dygraph.findPos(a.canvas_),o={left:i.x,right:i.x+a.canvas_.offsetWidth,top:i.y,bottom:i.y+a.canvas_.offsetHeight},s={x:Dygraph.pageX(t),y:Dygraph.pageY(t)},r=n(s.x,o.left,o.right),l=n(s.y,o.top,o.bottom);return e(r,l)};Dygraph.Interaction.defaultModel={mousedown:function(e,t,a){if(!(e.button&&2==e.button)){a.initializeMouseDown(e,t,a),e.altKey||e.shiftKey?Dygraph.startPan(e,t,a):Dygraph.startZoom(e,t,a);var i=function(e){if(a.isZooming){var i=o(e,t);i<100?Dygraph.moveZoom(e,t,a):null!==a.dragEndX&&(a.dragEndX=null,a.dragEndY=null,t.clearZoomRect_())}else a.isPanning&&Dygraph.movePan(e,t,a)},n=function(e){a.isZooming?null===a.dragEndX?Dygraph.Interaction.maybeTreatMouseOpAsClick(e,t,a):Dygraph.endZoom(e,t,a):a.isPanning&&Dygraph.endPan(e,t,a),Dygraph.removeEvent(document,'mousemove',i),Dygraph.removeEvent(document,'mouseup',n),a.destroy()};t.addAndTrackEvent(document,'mousemove',i),t.addAndTrackEvent(document,'mouseup',n)}},willDestroyContextMyself:!0,touchstart:function(e,t,a){Dygraph.Interaction.startTouch(e,t,a)},touchmove:function(e,t,a){Dygraph.Interaction.moveTouch(e,t,a)},touchend:function(e,t,a){Dygraph.Interaction.endTouch(e,t,a)},dblclick:function(t,a,i){if(i.cancelNextDblclick)return void(i.cancelNextDblclick=!1);var n={canvasx:i.dragEndX,canvasy:i.dragEndY};a.cascadeEvents_('dblclick',n)||t.altKey||t.shiftKey||a.resetZoom()}},Dygraph.DEFAULT_ATTRS.interactionModel=Dygraph.Interaction.defaultModel,Dygraph.defaultInteractionModel=Dygraph.Interaction.defaultModel,Dygraph.endZoom=Dygraph.Interaction.endZoom,Dygraph.moveZoom=Dygraph.Interaction.moveZoom,Dygraph.startZoom=Dygraph.Interaction.startZoom,Dygraph.endPan=Dygraph.Interaction.endPan,Dygraph.movePan=Dygraph.Interaction.movePan,Dygraph.startPan=Dygraph.Interaction.startPan,Dygraph.Interaction.nonInteractiveModel_={mousedown:function(e,t,a){a.initializeMouseDown(e,t,a)},mouseup:Dygraph.Interaction.maybeTreatMouseOpAsClick},Dygraph.Interaction.dragIsPanInteractionModel={mousedown:function(e,t,a){a.initializeMouseDown(e,t,a),Dygraph.startPan(e,t,a)},mousemove:function(e,t,a){a.isPanning&&Dygraph.movePan(e,t,a)},mouseup:function(e,t,a){a.isPanning&&Dygraph.endPan(e,t,a)}}}(),function(){'use strict';var e=Math.log,t=Math.ceil,n=Math.floor,o=Math.pow,s=Math.abs;Dygraph.TickList=void 0,Dygraph.Ticker=void 0,Dygraph.numericLinearTicks=function(e,t,a,i,n,o){return Dygraph.numericTicks(e,t,a,function(e){return'logscale'!==e&&i(e)},n,o)},Dygraph.numericTicks=function(r,a,l,d,p,h){var g=d('pixelsPerLabel'),c=[],u,i,y,_;if(h)for(u=0;u<h.length;u++)c.push({v:h[u]});else{if(d('logscale')){_=n(l/g);var x=Dygraph.binarySearch(r,Dygraph.PREFERRED_LOG_TICK_VALUES,1),f=Dygraph.binarySearch(a,Dygraph.PREFERRED_LOG_TICK_VALUES,-1);-1==x&&(x=0),-1==f&&(f=Dygraph.PREFERRED_LOG_TICK_VALUES.length-1);var m=null;if(f-x>=_/4){for(var b=f;b>=x;b--){var v=Dygraph.PREFERRED_LOG_TICK_VALUES[b],w=e(v/r)/e(a/r)*l,A={v:v};null===m?m={tickValue:v,pixel_coord:w}:s(w-m.pixel_coord)>=g?m={tickValue:v,pixel_coord:w}:A.label='',c.push(A)}c.reverse()}}if(0===c.length){var T=d('labelsKMG2'),E,C;T?(E=[1,2,4,8,16,32,64,128,256],C=16):(E=[1,2,5,10,20,50,100],C=10);var D=t(l/g),S=s(a-r)/D,L=n(e(S)/e(C)),P=o(C,L),O,k,I,R;for(i=0;i<E.length&&(O=P*E[i],k=n(r/O)*O,I=t(a/O)*O,_=s(I-k)/O,R=l/_,!(R>g));i++);for(k>I&&(O*=-1),u=0;u<=_;u++)y=k+u*O,c.push({v:y})}}var F=d('axisLabelFormatter');for(u=0;u<c.length;u++)void 0===c[u].label&&(c[u].label=F.call(p,c[u].v,0,d,p));return c},Dygraph.dateTicker=function(e,t,a,i,n){var o=Dygraph.pickDateTickGranularity(e,t,a,i);return 0<=o?Dygraph.getDateAxis(e,t,o,i,n):[]},Dygraph.SECONDLY=0,Dygraph.TWO_SECONDLY=1,Dygraph.FIVE_SECONDLY=2,Dygraph.TEN_SECONDLY=3,Dygraph.THIRTY_SECONDLY=4,Dygraph.MINUTELY=5,Dygraph.TWO_MINUTELY=6,Dygraph.FIVE_MINUTELY=7,Dygraph.TEN_MINUTELY=8,Dygraph.THIRTY_MINUTELY=9,Dygraph.HOURLY=10,Dygraph.TWO_HOURLY=11,Dygraph.SIX_HOURLY=12,Dygraph.DAILY=13,Dygraph.TWO_DAILY=14,Dygraph.WEEKLY=15,Dygraph.MONTHLY=16,Dygraph.QUARTERLY=17,Dygraph.BIANNUAL=18,Dygraph.ANNUAL=19,Dygraph.DECADAL=20,Dygraph.CENTENNIAL=21,Dygraph.NUM_GRANULARITIES=22,Dygraph.DATEFIELD_Y=0,Dygraph.DATEFIELD_M=1,Dygraph.DATEFIELD_D=2,Dygraph.DATEFIELD_HH=3,Dygraph.DATEFIELD_MM=4,Dygraph.DATEFIELD_SS=5,Dygraph.DATEFIELD_MS=6,Dygraph.NUM_DATEFIELDS=7,Dygraph.TICK_PLACEMENT=[],Dygraph.TICK_PLACEMENT[Dygraph.SECONDLY]={datefield:Dygraph.DATEFIELD_SS,step:1,spacing:1000},Dygraph.TICK_PLACEMENT[Dygraph.TWO_SECONDLY]={datefield:Dygraph.DATEFIELD_SS,step:2,spacing:2000},Dygraph.TICK_PLACEMENT[Dygraph.FIVE_SECONDLY]={datefield:Dygraph.DATEFIELD_SS,step:5,spacing:5000},Dygraph.TICK_PLACEMENT[Dygraph.TEN_SECONDLY]={datefield:Dygraph.DATEFIELD_SS,step:10,spacing:10000},Dygraph.TICK_PLACEMENT[Dygraph.THIRTY_SECONDLY]={datefield:Dygraph.DATEFIELD_SS,step:30,spacing:30000},Dygraph.TICK_PLACEMENT[Dygraph.MINUTELY]={datefield:Dygraph.DATEFIELD_MM,step:1,spacing:60000},Dygraph.TICK_PLACEMENT[Dygraph.TWO_MINUTELY]={datefield:Dygraph.DATEFIELD_MM,step:2,spacing:120000},Dygraph.TICK_PLACEMENT[Dygraph.FIVE_MINUTELY]={datefield:Dygraph.DATEFIELD_MM,step:5,spacing:300000},Dygraph.TICK_PLACEMENT[Dygraph.TEN_MINUTELY]={datefield:Dygraph.DATEFIELD_MM,step:10,spacing:600000},Dygraph.TICK_PLACEMENT[Dygraph.THIRTY_MINUTELY]={datefield:Dygraph.DATEFIELD_MM,step:30,spacing:1800000},Dygraph.TICK_PLACEMENT[Dygraph.HOURLY]={datefield:Dygraph.DATEFIELD_HH,step:1,spacing:3600000},Dygraph.TICK_PLACEMENT[Dygraph.TWO_HOURLY]={datefield:Dygraph.DATEFIELD_HH,step:2,spacing:7200000},Dygraph.TICK_PLACEMENT[Dygraph.SIX_HOURLY]={datefield:Dygraph.DATEFIELD_HH,step:6,spacing:21600000},Dygraph.TICK_PLACEMENT[Dygraph.DAILY]={datefield:Dygraph.DATEFIELD_D,step:1,spacing:86400000},Dygraph.TICK_PLACEMENT[Dygraph.TWO_DAILY]={datefield:Dygraph.DATEFIELD_D,step:2,spacing:172800000},Dygraph.TICK_PLACEMENT[Dygraph.WEEKLY]={datefield:Dygraph.DATEFIELD_D,step:7,spacing:604800000},Dygraph.TICK_PLACEMENT[Dygraph.MONTHLY]={datefield:Dygraph.DATEFIELD_M,step:1,spacing:2629817280},Dygraph.TICK_PLACEMENT[Dygraph.QUARTERLY]={datefield:Dygraph.DATEFIELD_M,step:3,spacing:365.2524*21600000},Dygraph.TICK_PLACEMENT[Dygraph.BIANNUAL]={datefield:Dygraph.DATEFIELD_M,step:6,spacing:365.2524*43200000},Dygraph.TICK_PLACEMENT[Dygraph.ANNUAL]={datefield:Dygraph.DATEFIELD_Y,step:1,spacing:365.2524*86400000},Dygraph.TICK_PLACEMENT[Dygraph.DECADAL]={datefield:Dygraph.DATEFIELD_Y,step:10,spacing:315578073600},Dygraph.TICK_PLACEMENT[Dygraph.CENTENNIAL]={datefield:Dygraph.DATEFIELD_Y,step:100,spacing:3155780736000},Dygraph.PREFERRED_LOG_TICK_VALUES=function(){for(var e=[],t=-39,a;39>=t;t++){a=o(10,t);for(var i=1,n;9>=i;i++)n=a*i,e.push(n)}return e}(),Dygraph.pickDateTickGranularity=function(e,t,a,n){for(var o=n('pixelsPerLabel'),s=0,i;s<Dygraph.NUM_GRANULARITIES;s++)if(i=Dygraph.numDateTicks(e,t,s),a/i>=o)return s;return-1},Dygraph.numDateTicks=function(e,t,a){var i=Dygraph.TICK_PLACEMENT[a].spacing;return Math.round(1*(t-e)/i)},Dygraph.getDateAxis=function(e,t,a,i,n){var o=i('axisLabelFormatter'),s=i('labelsUTC'),r=s?Dygraph.DateAccessorsUTC:Dygraph.DateAccessorsLocal,l=Dygraph.TICK_PLACEMENT[a].datefield,d=Dygraph.TICK_PLACEMENT[a].step,p=Dygraph.TICK_PLACEMENT[a].spacing,h=new Date(e),g=[];g[Dygraph.DATEFIELD_Y]=r.getFullYear(h),g[Dygraph.DATEFIELD_M]=r.getMonth(h),g[Dygraph.DATEFIELD_D]=r.getDate(h),g[Dygraph.DATEFIELD_HH]=r.getHours(h),g[Dygraph.DATEFIELD_MM]=r.getMinutes(h),g[Dygraph.DATEFIELD_SS]=r.getSeconds(h),g[Dygraph.DATEFIELD_MS]=r.getMilliseconds(h);var c=g[l]%d;a==Dygraph.WEEKLY&&(c=r.getDay(h)),g[l]-=c;for(var u=l+1;u<Dygraph.NUM_DATEFIELDS;u++)g[u]=u===Dygraph.DATEFIELD_D?1:0;var y=[],_=r.makeDate.apply(null,g),x=_.getTime();if(a<=Dygraph.HOURLY)for(x<e&&(x+=p,_=new Date(x));x<=t;)y.push({v:x,label:o.call(n,_,a,i,n)}),x+=p,_=new Date(x);else for(x<e&&(g[l]+=d,_=r.makeDate.apply(null,g),x=_.getTime());x<=t;)(a>=Dygraph.DAILY||0===r.getHours(_)%d)&&y.push({v:x,label:o.call(n,_,a,i,n)}),g[l]+=d,_=r.makeDate.apply(null,g),x=_.getTime();return y},Dygraph&&Dygraph.DEFAULT_ATTRS&&Dygraph.DEFAULT_ATTRS.axes&&Dygraph.DEFAULT_ATTRS.axes.x&&Dygraph.DEFAULT_ATTRS.axes.y&&Dygraph.DEFAULT_ATTRS.axes.y2&&(Dygraph.DEFAULT_ATTRS.axes.x.ticker=Dygraph.dateTicker,Dygraph.DEFAULT_ATTRS.axes.y.ticker=Dygraph.numericTicks,Dygraph.DEFAULT_ATTRS.axes.y2.ticker=Dygraph.numericTicks)}(),Dygraph.Plugins={},Dygraph.Plugins.Annotations=function(){'use strict';var e=function(){this.annotations_=[]};return e.prototype.toString=function(){return'Annotations Plugin'},e.prototype.activate=function(){return{clearChart:this.clearChart,didDrawChart:this.didDrawChart}},e.prototype.detachLabels=function(){for(var e=0,t;e<this.annotations_.length;e++)t=this.annotations_[e],t.parentNode&&t.parentNode.removeChild(t),this.annotations_[e]=null;this.annotations_=[]},e.prototype.clearChart=function(){this.detachLabels()},e.prototype.didDrawChart=function(t){var e=t.dygraph,n=e.layout_.annotated_points;if(n&&0!==n.length)for(var o=t.canvas.parentNode,s={position:'absolute',fontSize:e.getOption('axisLabelFontSize')+'px',zIndex:10,overflow:'hidden'},r=function(t,i,n){return function(o){var s=n.annotation;s.hasOwnProperty(t)?s[t](s,n,e,o):e.getOption(i)&&e.getOption(i)(s,n,e,o)}},l=t.dygraph.plotter_.area,d={},h=0,i;h<n.length;h++)if(i=n[h],!(i.canvasx<l.x||i.canvasx>l.x+l.w||i.canvasy<l.y||i.canvasy>l.y+l.h)){var p=i.annotation,a=6;p.hasOwnProperty('tickHeight')&&(a=p.tickHeight);var g=document.createElement('div');for(var c in s)s.hasOwnProperty(c)&&(g.style[c]=s[c]);p.hasOwnProperty('icon')||(g.className='dygraphDefaultAnnotation'),p.hasOwnProperty('cssClass')&&(g.className+=' '+p.cssClass);var u=p.hasOwnProperty('width')?p.width:16,_=p.hasOwnProperty('height')?p.height:16;if(p.hasOwnProperty('icon')){var x=document.createElement('img');x.src=p.icon,x.width=u,x.height=_,g.appendChild(x)}else i.annotation.hasOwnProperty('shortText')&&g.appendChild(document.createTextNode(i.annotation.shortText));var f=i.canvasx-u/2;g.style.left=f+'px';var m=0;if(p.attachAtBottom){var b=l.y+l.h-_-a;d[f]?b-=d[f]:d[f]=0,d[f]+=a+_,m=b}else m=i.canvasy-_-a;g.style.top=m+'px',g.style.width=u+'px',g.style.height=_+'px',g.title=i.annotation.text,g.style.color=e.colorsMap_[i.name],g.style.borderColor=e.colorsMap_[i.name],p.div=g,e.addAndTrackEvent(g,'click',r('clickHandler','annotationClickHandler',i,this)),e.addAndTrackEvent(g,'mouseover',r('mouseOverHandler','annotationMouseOverHandler',i,this)),e.addAndTrackEvent(g,'mouseout',r('mouseOutHandler','annotationMouseOutHandler',i,this)),e.addAndTrackEvent(g,'dblclick',r('dblClickHandler','annotationDblClickHandler',i,this)),o.appendChild(g),this.annotations_.push(g);var y=t.drawingContext;if(y.save(),y.strokeStyle=e.colorsMap_[i.name],y.beginPath(),!p.attachAtBottom)y.moveTo(i.canvasx,i.canvasy),y.lineTo(i.canvasx,i.canvasy-2-a);else{var b=m+_;y.moveTo(i.canvasx,b),y.lineTo(i.canvasx,b+a)}y.closePath(),y.stroke(),y.restore()}},e.prototype.destroy=function(){this.detachLabels()},e}(),Dygraph.Plugins.Axes=function(){'use strict';var e=Math.round,t=function(){this.xlabels_=[],this.ylabels_=[]};return t.prototype.toString=function(){return'Axes Plugin'},t.prototype.activate=function(){return{layout:this.layout,clearChart:this.clearChart,willDrawChart:this.willDrawChart}},t.prototype.layout=function(t){var e=t.dygraph;if(e.getOptionForAxis('drawAxis','y')){var a=e.getOptionForAxis('axisLabelWidth','y')+2*e.getOptionForAxis('axisTickSize','y');t.reserveSpaceLeft(a)}if(e.getOptionForAxis('drawAxis','x')){var i;i=e.getOption('xAxisHeight')?e.getOption('xAxisHeight'):e.getOptionForAxis('axisLabelFontSize','x')+2*e.getOptionForAxis('axisTickSize','x'),t.reserveSpaceBottom(i)}if(2!=e.numAxes())2<e.numAxes()&&e.error('Only two y-axes are supported at this time. (Trying to use '+e.numAxes()+')');else if(e.getOptionForAxis('drawAxis','y2')){var a=e.getOptionForAxis('axisLabelWidth','y2')+2*e.getOptionForAxis('axisTickSize','y2');t.reserveSpaceRight(a)}},t.prototype.detachLabels=function(){function e(e){for(var t=0,a;t<e.length;t++)a=e[t],a.parentNode&&a.parentNode.removeChild(a)}e(this.xlabels_),e(this.ylabels_),this.xlabels_=[],this.ylabels_=[]},t.prototype.clearChart=function(){this.detachLabels()},t.prototype.willDrawChart=function(t){function a(t){return e(t)+0.5}function n(t){return e(t)-0.5}var o=t.dygraph;if(o.getOptionForAxis('drawAxis','x')||o.getOptionForAxis('drawAxis','y')||o.getOptionForAxis('drawAxis','y2')){var s=t.drawingContext,l=t.canvas.parentNode,d=o.width_,p=o.height_,h=function(e){return{position:'absolute',fontSize:o.getOptionForAxis('axisLabelFontSize',e)+'px',zIndex:10,color:o.getOptionForAxis('axisLabelColor',e),width:o.getOptionForAxis('axisLabelWidth',e)+'px',lineHeight:'normal',overflow:'hidden'}},g={x:h('x'),y:h('y'),y2:h('y2')},c=function(e,t,a){var i=document.createElement('div'),n=g['y2'==a?'y2':t];for(var o in n)n.hasOwnProperty(o)&&(i.style[o]=n[o]);var s=document.createElement('div');return s.className='dygraph-axis-label dygraph-axis-label-'+t+(a?' dygraph-axis-label-'+a:''),s.innerHTML=e,i.appendChild(s),i},u,_,x,y,f;s.save();var i=o.layout_,m=t.dygraph.plotter_.area,b=function(e){return function(t){return o.getOptionForAxis(t,e)}};if(o.getOptionForAxis('drawAxis','y')){if(i.yticks&&0<i.yticks.length){var v=o.numAxes(),w=[b('y'),b('y2')];for(f=0;f<i.yticks.length;f++){if(y=i.yticks[f],'function'==typeof y)return;_=m.x;var A=1,T='y1',E=w[0];1==y[0]&&(_=m.x+m.w,A=-1,T='y2',E=w[1]);var C=E('axisLabelFontSize');x=m.y+y[1]*m.h,u=c(y[2],'y',2==v?T:null);var D=x-C/2;0>D&&(D=0),D+C+3>p?u.style.bottom='0':u.style.top=D+'px',0===y[0]?(u.style.left=m.x-E('axisLabelWidth')-E('axisTickSize')+'px',u.style.textAlign='right'):1==y[0]&&(u.style.left=m.x+m.w+E('axisTickSize')+'px',u.style.textAlign='left'),u.style.width=E('axisLabelWidth')+'px',l.appendChild(u),this.ylabels_.push(u)}var S=this.ylabels_[0],C=o.getOptionForAxis('axisLabelFontSize','y'),L=parseInt(S.style.top,10)+C;L>p-C&&(S.style.top=parseInt(S.style.top,10)-C/2+'px')}var P;if(o.getOption('drawAxesAtZero')){var O=o.toPercentXCoord(0);(1<O||0>O||isNaN(O))&&(O=0),P=a(m.x+O*m.w)}else P=a(m.x);s.strokeStyle=o.getOptionForAxis('axisLineColor','y'),s.lineWidth=o.getOptionForAxis('axisLineWidth','y'),s.beginPath(),s.moveTo(P,n(m.y)),s.lineTo(P,n(m.y+m.h)),s.closePath(),s.stroke(),2==o.numAxes()&&(s.strokeStyle=o.getOptionForAxis('axisLineColor','y2'),s.lineWidth=o.getOptionForAxis('axisLineWidth','y2'),s.beginPath(),s.moveTo(n(m.x+m.w),n(m.y)),s.lineTo(n(m.x+m.w),n(m.y+m.h)),s.closePath(),s.stroke())}if(o.getOptionForAxis('drawAxis','x')){if(i.xticks){var E=b('x');for(f=0;f<i.xticks.length;f++){y=i.xticks[f],_=m.x+y[0]*m.w,x=m.y+m.h,u=c(y[1],'x'),u.style.textAlign='center',u.style.top=x+E('axisTickSize')+'px';var r=_-E('axisLabelWidth')/2;r+E('axisLabelWidth')>d&&(r=d-E('axisLabelWidth'),u.style.textAlign='right'),0>r&&(r=0,u.style.textAlign='left'),u.style.left=r+'px',u.style.width=E('axisLabelWidth')+'px',l.appendChild(u),this.xlabels_.push(u)}}s.strokeStyle=o.getOptionForAxis('axisLineColor','x'),s.lineWidth=o.getOptionForAxis('axisLineWidth','x'),s.beginPath();var k;if(o.getOption('drawAxesAtZero')){var O=o.toPercentYCoord(0,0);(1<O||0>O)&&(O=1),k=n(m.y+O*m.h)}else k=n(m.y+m.h);s.moveTo(a(m.x),k),s.lineTo(a(m.x+m.w),k),s.closePath(),s.stroke()}s.restore()}},t}(),Dygraph.Plugins.ChartLabels=function(){'use strict';var e=function(){this.title_div_=null,this.xlabel_div_=null,this.ylabel_div_=null,this.y2label_div_=null};e.prototype.toString=function(){return'ChartLabels Plugin'},e.prototype.activate=function(){return{layout:this.layout,didDrawChart:this.didDrawChart}};var t=function(e){var t=document.createElement('div');return t.style.position='absolute',t.style.left=e.x+'px',t.style.top=e.y+'px',t.style.width=e.w+'px',t.style.height=e.h+'px',t};e.prototype.detachLabels_=function(){for(var e=[this.title_div_,this.xlabel_div_,this.ylabel_div_,this.y2label_div_],t=0,a;t<e.length;t++)a=e[t],a&&a.parentNode&&a.parentNode.removeChild(a);this.title_div_=null,this.xlabel_div_=null,this.ylabel_div_=null,this.y2label_div_=null};var a=function(e,t,a,i,n){var o=document.createElement('div');o.style.position='absolute',o.style.left=1==a?'0px':t.x+'px',o.style.top=t.y+'px',o.style.width=t.w+'px',o.style.height=t.h+'px',o.style.fontSize=e.getOption('yLabelWidth')-2+'px';var s=document.createElement('div');s.style.position='absolute',s.style.width=t.h+'px',s.style.height=t.w+'px',s.style.top=t.h/2-t.w/2+'px',s.style.left=t.w/2-t.h/2+'px',s.style.textAlign='center';var r='rotate('+(1==a?'-':'')+'90deg)';s.style.transform=r,s.style.WebkitTransform=r,s.style.MozTransform=r,s.style.OTransform=r,s.style.msTransform=r,'undefined'!==typeof document.documentMode&&9>document.documentMode&&(s.style.filter='progid:DXImageTransform.Microsoft.BasicImage(rotation='+(1==a?'3':'1')+')',s.style.left='0px',s.style.top='0px');var l=document.createElement('div');return l.className=i,l.innerHTML=n,s.appendChild(l),o.appendChild(s),o};return e.prototype.layout=function(i){this.detachLabels_();var e=i.dygraph,n=i.chart_div;if(e.getOption('title')){var o=i.reserveSpaceTop(e.getOption('titleHeight'));this.title_div_=t(o),this.title_div_.style.textAlign='center',this.title_div_.style.fontSize=e.getOption('titleHeight')-8+'px',this.title_div_.style.fontWeight='bold',this.title_div_.style.zIndex=10;var s=document.createElement('div');s.className='dygraph-label dygraph-title',s.innerHTML=e.getOption('title'),this.title_div_.appendChild(s),n.appendChild(this.title_div_)}if(e.getOption('xlabel')){var r=i.reserveSpaceBottom(e.getOption('xLabelHeight'));this.xlabel_div_=t(r),this.xlabel_div_.style.textAlign='center',this.xlabel_div_.style.fontSize=e.getOption('xLabelHeight')-2+'px';var s=document.createElement('div');s.className='dygraph-label dygraph-xlabel',s.innerHTML=e.getOption('xlabel'),this.xlabel_div_.appendChild(s),n.appendChild(this.xlabel_div_)}if(e.getOption('ylabel')){var l=i.reserveSpaceLeft(0);this.ylabel_div_=a(e,l,1,'dygraph-label dygraph-ylabel',e.getOption('ylabel')),n.appendChild(this.ylabel_div_)}if(e.getOption('y2label')&&2==e.numAxes()){var d=i.reserveSpaceRight(0);this.y2label_div_=a(e,d,2,'dygraph-label dygraph-y2label',e.getOption('y2label')),n.appendChild(this.y2label_div_)}},e.prototype.didDrawChart=function(t){var e=t.dygraph;this.title_div_&&(this.title_div_.children[0].innerHTML=e.getOption('title')),this.xlabel_div_&&(this.xlabel_div_.children[0].innerHTML=e.getOption('xlabel')),this.ylabel_div_&&(this.ylabel_div_.children[0].children[0].innerHTML=e.getOption('ylabel')),this.y2label_div_&&(this.y2label_div_.children[0].children[0].innerHTML=e.getOption('y2label'))},e.prototype.clearChart=function(){},e.prototype.destroy=function(){this.detachLabels_()},e}(),Dygraph.Plugins.Grid=function(){'use strict';var e=Math.round,t=function(){};return t.prototype.toString=function(){return'Gridline Plugin'},t.prototype.activate=function(){return{willDrawChart:this.willDrawChart}},t.prototype.willDrawChart=function(t){function a(t){return e(t)+0.5}function n(t){return e(t)-0.5}var o=t.dygraph,s=t.drawingContext,r=o.layout_,l=t.dygraph.plotter_.area,d,p,h,i;if(o.getOptionForAxis('drawGrid','y')){for(var g=['y','y2'],c=[],u=[],y=[],_=[],x=[],h=0;h<g.length;h++)y[h]=o.getOptionForAxis('drawGrid',g[h]),y[h]&&(c[h]=o.getOptionForAxis('gridLineColor',g[h]),u[h]=o.getOptionForAxis('gridLineWidth',g[h]),x[h]=o.getOptionForAxis('gridLinePattern',g[h]),_[h]=x[h]&&2<=x[h].length);for(i=r.yticks,s.save(),h=0;h<i.length;h++){var f=i[h][0];y[f]&&(_[f]&&s.installPattern(x[f]),s.strokeStyle=c[f],s.lineWidth=u[f],d=a(l.x),p=n(l.y+i[h][1]*l.h),s.beginPath(),s.moveTo(d,p),s.lineTo(d+l.w,p),s.closePath(),s.stroke(),_[f]&&s.uninstallPattern())}s.restore()}if(o.getOptionForAxis('drawGrid','x')){i=r.xticks,s.save();var x=o.getOptionForAxis('gridLinePattern','x'),_=x&&2<=x.length;for(_&&s.installPattern(x),s.strokeStyle=o.getOptionForAxis('gridLineColor','x'),s.lineWidth=o.getOptionForAxis('gridLineWidth','x'),h=0;h<i.length;h++)d=a(l.x+i[h][0]*l.w),p=n(l.y+l.h),s.beginPath(),s.moveTo(d,p),s.lineTo(d,l.y),s.closePath(),s.stroke();_&&s.uninstallPattern(),s.restore()}},t.prototype.destroy=function(){},t}(),Dygraph.Plugins.Legend=function(){'use strict';var t=function(){this.legend_div_=null,this.is_generated_div_=!1};t.prototype.toString=function(){return'Legend Plugin'};var e;t.prototype.activate=function(e){var t=e.getOption('labelsDivWidth'),a=e.getOption('labelsDiv'),i;if(a&&null!==a)i='string'==typeof a||a instanceof String?document.getElementById(a):a;else{var n={position:'absolute',fontSize:'14px',zIndex:10,width:t+'px',top:'0px',left:e.size().width-t-2+'px',background:'white',lineHeight:'normal',textAlign:'left',overflow:'hidden'};for(var o in Dygraph.update(n,e.getOption('labelsDivStyles')),i=document.createElement('div'),i.className='dygraph-legend',n)if(n.hasOwnProperty(o))try{i.style[o]=n[o]}catch(t){console.warn('You are using unsupported css properties for your browser in labelsDivStyles')}e.graphDiv.appendChild(i),this.is_generated_div_=!0}return this.legend_div_=i,this.one_em_width_=10,{select:this.select,deselect:this.deselect,predraw:this.predraw,didDrawChart:this.didDrawChart}};var a=function(e){var t=document.createElement('span');t.setAttribute('style','margin: 0; padding: 0 0 0 1em; border: 0;'),e.appendChild(t);var a=t.offsetWidth;return e.removeChild(t),a},n=function(e){return e.replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/</g,'&lt;').replace(/>/g,'&gt;')};return t.prototype.select=function(a){var e=a.selectedX,i=a.selectedPoints,n=a.selectedRow,o=a.dygraph.getOption('legend');if('never'===o)return void(this.legend_div_.style.display='none');if('follow'===o){var s=a.dygraph.plotter_.area,r=a.dygraph.getOption('labelsDivWidth'),l=a.dygraph.getOptionForAxis('axisLabelWidth','y'),d=i[0].x*s.w+20,p=i[0].y*s.h-20;d+r+1>window.scrollX+window.innerWidth&&(d=d-40-r-(l-s.x)),a.dygraph.graphDiv.appendChild(this.legend_div_),this.legend_div_.style.left=l+d+'px',this.legend_div_.style.top=p+'px'}var h=t.generateLegendHTML(a.dygraph,e,i,this.one_em_width_,n);this.legend_div_.innerHTML=h,this.legend_div_.style.display=''},t.prototype.deselect=function(i){var e=i.dygraph.getOption('legend');'always'!==e&&(this.legend_div_.style.display='none');var n=a(this.legend_div_);this.one_em_width_=n;var o=t.generateLegendHTML(i.dygraph,void 0,void 0,n,null);this.legend_div_.innerHTML=o},t.prototype.didDrawChart=function(t){this.deselect(t)},t.prototype.predraw=function(t){if(this.is_generated_div_){t.dygraph.graphDiv.appendChild(this.legend_div_);var e=t.dygraph.plotter_.area,a=t.dygraph.getOption('labelsDivWidth');this.legend_div_.style.left=e.x+e.w-a-1+'px',this.legend_div_.style.top=e.y+'px',this.legend_div_.style.width=a+'px'}},t.prototype.destroy=function(){this.legend_div_=null},t.generateLegendHTML=function(t,a,o,s,r){if(!0!==t.getOption('showLabelsOnHighlight'))return'';var l=t.getLabels(),d,p,h,i,g;if('undefined'===typeof a){if('always'!=t.getOption('legend'))return'';for(p=t.getOption('labelsSeparateLines'),d='',h=1;h<l.length;h++){var c=t.getPropertiesForSeries(l[h]);c.visible&&(''!==d&&(d+=p?'<br/>':' '),g=t.getOption('strokePattern',l[h]),i=e(g,c.color,s),d+='<span style=\'font-weight: bold; color: '+c.color+';\'>'+i+' '+n(l[h])+'</span>')}return d}var u=t.optionsViewForAxis_('x'),y=u('valueFormatter');d=y.call(t,a,u,l[0],t,r,0),''!==d&&(d+=':');var _=[],f=t.numAxes();for(h=0;h<f;h++)_[h]=t.optionsViewForAxis_('y'+(h?1+h:''));var m=t.getOption('labelsShowZeroValues');p=t.getOption('labelsSeparateLines');var b=t.getHighlightSeries();for(h=0;h<o.length;h++){var v=o[h];if((0!==v.yval||m)&&Dygraph.isOK(v.canvasy)){p&&(d+='<br/>');var c=t.getPropertiesForSeries(v.name),w=_[c.axis-1],A=w('valueFormatter'),T=A.call(t,v.yval,w,v.name,t,r,l.indexOf(v.name)),E=v.name==b?' class=\'highlight\'':'';d+='<span'+E+'> <b><span style=\'color: '+c.color+';\'>'+n(v.name)+'</span></b>:&#160;'+T+'</span>'}}return d},e=function(e,t,a){var n=/MSIE/.test(navigator.userAgent)&&!window.opera;if(n)return'&mdash;';if(!e||1>=e.length)return'<div style="display: inline-block; position: relative; bottom: .5ex; padding-left: 1em; height: 1px; border-bottom: 2px solid '+t+';"></div>';var o=0,s=0,r=[],l,i,d,p,h;for(l=0;l<=e.length;l++)o+=e[l%e.length];if(h=Math.floor(a/(o-e[0])),1<h){for(l=0;l<e.length;l++)r[l]=e[l]/a;s=r.length}else{for(h=1,l=0;l<e.length;l++)r[l]=e[l]/o;s=r.length+1}var g='';for(i=0;i<h;i++)for(l=0;l<s;l+=2)d=r[l%r.length],p=l<e.length?r[(l+1)%r.length]:0,g+='<div style="display: inline-block; position: relative; bottom: .5ex; margin-right: '+p+'em; padding-left: '+d+'em; height: 1px; border-bottom: 2px solid '+t+';"></div>';return g},t}(),Dygraph.Plugins.RangeSelector=function(){'use strict';var e=Number.MAX_VALUE,t=Math.max,a=Math.min,i=Math.abs,n=Math.round,o=function(){this.isIE_=/MSIE/.test(navigator.userAgent)&&!window.opera,this.hasTouchInterface_='undefined'!=typeof TouchEvent,this.isMobileDevice_=/mobile|android/gi.test(navigator.appVersion),this.interfaceCreated_=!1};return o.prototype.toString=function(){return'RangeSelector Plugin'},o.prototype.activate=function(e){return this.dygraph_=e,this.isUsingExcanvas_=e.isUsingExcanvas_,this.getOption_('showRangeSelector')&&this.createInterface_(),{layout:this.reserveSpace_,predraw:this.renderStaticLayer_,didDrawChart:this.renderInteractiveLayer_}},o.prototype.destroy=function(){this.bgcanvas_=null,this.fgcanvas_=null,this.leftZoomHandle_=null,this.rightZoomHandle_=null,this.iePanOverlay_=null},o.prototype.getOption_=function(e,t){return this.dygraph_.getOption(e,t)},o.prototype.setDefaultOption_=function(e,t){this.dygraph_.attrs_[e]=t},o.prototype.createInterface_=function(){this.createCanvases_(),this.isUsingExcanvas_&&this.createIEPanOverlay_(),this.createZoomHandles_(),this.initInteraction_(),this.getOption_('animatedZooms')&&(console.warn('Animated zooms and range selector are not compatible; disabling animatedZooms.'),this.dygraph_.updateOptions({animatedZooms:!1},!0)),this.interfaceCreated_=!0,this.addToGraph_()},o.prototype.addToGraph_=function(){var e=this.graphDiv_=this.dygraph_.graphDiv;e.appendChild(this.bgcanvas_),e.appendChild(this.fgcanvas_),e.appendChild(this.leftZoomHandle_),e.appendChild(this.rightZoomHandle_)},o.prototype.removeFromGraph_=function(){var e=this.graphDiv_;e.removeChild(this.bgcanvas_),e.removeChild(this.fgcanvas_),e.removeChild(this.leftZoomHandle_),e.removeChild(this.rightZoomHandle_),this.graphDiv_=null},o.prototype.reserveSpace_=function(t){this.getOption_('showRangeSelector')&&t.reserveSpaceBottom(this.getOption_('rangeSelectorHeight')+4)},o.prototype.renderStaticLayer_=function(){this.updateVisibility_()&&(this.resize_(),this.drawStaticLayer_())},o.prototype.renderInteractiveLayer_=function(){!this.updateVisibility_()||this.isChangingRange_||(this.placeZoomHandles_(),this.drawInteractiveLayer_())},o.prototype.updateVisibility_=function(){var e=this.getOption_('showRangeSelector');if(e)this.interfaceCreated_?(!this.graphDiv_||!this.graphDiv_.parentNode)&&this.addToGraph_():this.createInterface_();else if(this.graphDiv_){this.removeFromGraph_();var t=this.dygraph_;setTimeout(function(){t.width_=0,t.resize()},1)}return e},o.prototype.resize_=function(){function e(e,t,a){var i=Dygraph.getContextPixelRatio(t);e.style.top=a.y+'px',e.style.left=a.x+'px',e.width=a.w*i,e.height=a.h*i,e.style.width=a.w+'px',e.style.height=a.h+'px',1!=i&&t.scale(i,i)}var t=this.dygraph_.layout_.getPlotArea(),a=0;this.dygraph_.getOptionForAxis('drawAxis','x')&&(a=this.getOption_('xAxisHeight')||this.getOption_('axisLabelFontSize')+2*this.getOption_('axisTickSize')),this.canvasRect_={x:t.x,y:t.y+t.h+a+4,w:t.w,h:this.getOption_('rangeSelectorHeight')},e(this.bgcanvas_,this.bgcanvas_ctx_,this.canvasRect_),e(this.fgcanvas_,this.fgcanvas_ctx_,this.canvasRect_)},o.prototype.createCanvases_=function(){this.bgcanvas_=Dygraph.createCanvas(),this.bgcanvas_.className='dygraph-rangesel-bgcanvas',this.bgcanvas_.style.position='absolute',this.bgcanvas_.style.zIndex=9,this.bgcanvas_ctx_=Dygraph.getContext(this.bgcanvas_),this.fgcanvas_=Dygraph.createCanvas(),this.fgcanvas_.className='dygraph-rangesel-fgcanvas',this.fgcanvas_.style.position='absolute',this.fgcanvas_.style.zIndex=9,this.fgcanvas_.style.cursor='default',this.fgcanvas_ctx_=Dygraph.getContext(this.fgcanvas_)},o.prototype.createIEPanOverlay_=function(){this.iePanOverlay_=document.createElement('div'),this.iePanOverlay_.style.position='absolute',this.iePanOverlay_.style.backgroundColor='white',this.iePanOverlay_.style.filter='alpha(opacity=0)',this.iePanOverlay_.style.display='none',this.iePanOverlay_.style.cursor='move',this.fgcanvas_.appendChild(this.iePanOverlay_)},o.prototype.createZoomHandles_=function(){var e=new Image;e.className='dygraph-rangesel-zoomhandle',e.style.position='absolute',e.style.zIndex=10,e.style.visibility='hidden',e.style.cursor='col-resize',/MSIE 7/.test(navigator.userAgent)?(e.width=7,e.height=14,e.style.backgroundColor='white',e.style.border='1px solid #333333'):(e.width=9,e.height=16,e.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAQCAYAAADESFVDAAAAAXNSR0IArs4c6QAAAAZiS0dEANAAzwDP4Z7KegAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9sHGw0cMqdt1UwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAaElEQVQoz+3SsRFAQBCF4Z9WJM8KCDVwownl6YXsTmCUsyKGkZzcl7zkz3YLkypgAnreFmDEpHkIwVOMfpdi9CEEN2nGpFdwD03yEqDtOgCaun7sqSTDH32I1pQA2Pb9sZecAxc5r3IAb21d6878xsAAAAAASUVORK5CYII='),this.isMobileDevice_&&(e.width*=2,e.height*=2),this.leftZoomHandle_=e,this.rightZoomHandle_=e.cloneNode(!1)},o.prototype.initInteraction_=function(){var n=this,o=document,s=0,r=null,l=!1,d=!1,p=!this.isMobileDevice_&&!this.isUsingExcanvas_,h=new Dygraph.IFrameTarp,e,g,c,u,y,_,x,f,m,b,v,w,A,T;e=function(e){var t=n.dygraph_.xAxisExtremes(),a=(t[1]-t[0])/n.canvasRect_.w,i=t[0]+(e.leftHandlePos-n.canvasRect_.x)*a,o=t[0]+(e.rightHandlePos-n.canvasRect_.x)*a;return[i,o]},g=function(t){return Dygraph.cancelEvent(t),l=!0,s=t.clientX,r=t.target?t.target:t.srcElement,('mousedown'===t.type||'dragstart'===t.type)&&(Dygraph.addEvent(o,'mousemove',c),Dygraph.addEvent(o,'mouseup',u)),n.fgcanvas_.style.cursor='col-resize',h.cover(),!0},c=function(o){if(!l)return!1;Dygraph.cancelEvent(o);var e=o.clientX-s;if(4>i(e))return!0;s=o.clientX;var d=n.getZoomHandleStatus_(),h;r==n.leftZoomHandle_?(h=d.leftHandlePos+e,h=a(h,d.rightHandlePos-r.width-3),h=t(h,n.canvasRect_.x)):(h=d.rightHandlePos+e,h=a(h,n.canvasRect_.x+n.canvasRect_.w),h=t(h,d.leftHandlePos+r.width+3));var g=r.width/2;return r.style.left=h-g+'px',n.drawInteractiveLayer_(),p&&y(),!0},u=function(){return!!l&&(l=!1,h.uncover(),Dygraph.removeEvent(o,'mousemove',c),Dygraph.removeEvent(o,'mouseup',u),n.fgcanvas_.style.cursor='default',p||y(),!0)},y=function(){try{var t=n.getZoomHandleStatus_();if(n.isChangingRange_=!0,!t.isZoomed)n.dygraph_.resetZoom();else{var a=e(t);n.dygraph_.doZoomXDates_(a[0],a[1])}}finally{n.isChangingRange_=!1}},_=function(t){if(n.isUsingExcanvas_)return t.srcElement==n.iePanOverlay_;var e=n.leftZoomHandle_.getBoundingClientRect(),a=e.left+e.width/2;e=n.rightZoomHandle_.getBoundingClientRect();var i=e.left+e.width/2;return t.clientX>a&&t.clientX<i},x=function(t){return!d&&_(t)&&n.getZoomHandleStatus_().isZoomed&&(Dygraph.cancelEvent(t),d=!0,s=t.clientX,'mousedown'===t.type&&(Dygraph.addEvent(o,'mousemove',f),Dygraph.addEvent(o,'mouseup',m)),!0)},f=function(t){if(!d)return!1;Dygraph.cancelEvent(t);var e=t.clientX-s;if(4>i(e))return!0;s=t.clientX;var a=n.getZoomHandleStatus_(),o=a.leftHandlePos,r=a.rightHandlePos,l=r-o;o+e<=n.canvasRect_.x?(o=n.canvasRect_.x,r=o+l):r+e>=n.canvasRect_.x+n.canvasRect_.w?(r=n.canvasRect_.x+n.canvasRect_.w,o=r-l):(o+=e,r+=e);var h=n.leftZoomHandle_.width/2;return n.leftZoomHandle_.style.left=o-h+'px',n.rightZoomHandle_.style.left=r-h+'px',n.drawInteractiveLayer_(),p&&b(),!0},m=function(){return!!d&&(d=!1,Dygraph.removeEvent(o,'mousemove',f),Dygraph.removeEvent(o,'mouseup',m),p||b(),!0)},b=function(){try{n.isChangingRange_=!0,n.dygraph_.dateWindow_=e(n.getZoomHandleStatus_()),n.dygraph_.drawGraph_(!1)}finally{n.isChangingRange_=!1}},v=function(t){if(!(l||d)){var e=_(t)?'move':'default';e!=n.fgcanvas_.style.cursor&&(n.fgcanvas_.style.cursor=e)}},w=function(t){'touchstart'==t.type&&1==t.targetTouches.length?g(t.targetTouches[0])&&Dygraph.cancelEvent(t):'touchmove'==t.type&&1==t.targetTouches.length?c(t.targetTouches[0])&&Dygraph.cancelEvent(t):u(t)},A=function(t){'touchstart'==t.type&&1==t.targetTouches.length?x(t.targetTouches[0])&&Dygraph.cancelEvent(t):'touchmove'==t.type&&1==t.targetTouches.length?f(t.targetTouches[0])&&Dygraph.cancelEvent(t):m(t)},T=function(e,t){for(var a=['touchstart','touchend','touchmove','touchcancel'],o=0;o<a.length;o++)n.dygraph_.addAndTrackEvent(e,a[o],t)},this.setDefaultOption_('interactionModel',Dygraph.Interaction.dragIsPanInteractionModel),this.setDefaultOption_('panEdgeFraction',1e-4);var E=window.opera?'mousedown':'dragstart';this.dygraph_.addAndTrackEvent(this.leftZoomHandle_,E,g),this.dygraph_.addAndTrackEvent(this.rightZoomHandle_,E,g),this.isUsingExcanvas_?this.dygraph_.addAndTrackEvent(this.iePanOverlay_,'mousedown',x):(this.dygraph_.addAndTrackEvent(this.fgcanvas_,'mousedown',x),this.dygraph_.addAndTrackEvent(this.fgcanvas_,'mousemove',v)),this.hasTouchInterface_&&(T(this.leftZoomHandle_,w),T(this.rightZoomHandle_,w),T(this.fgcanvas_,A))},o.prototype.drawStaticLayer_=function(){var e=this.bgcanvas_ctx_;e.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);try{this.drawMiniPlot_()}catch(e){console.warn(e)}var t=0.5;this.bgcanvas_ctx_.lineWidth=1,e.strokeStyle='gray',e.beginPath(),e.moveTo(t,t),e.lineTo(t,this.canvasRect_.h-t),e.lineTo(this.canvasRect_.w-t,this.canvasRect_.h-t),e.lineTo(this.canvasRect_.w-t,t),e.stroke()},o.prototype.drawMiniPlot_=function(){var e=this.getOption_('rangeSelectorPlotFillColor'),a=this.getOption_('rangeSelectorPlotStrokeColor');if(e||a){var o=this.getOption_('stepPlot'),s=this.computeCombinedSeriesAndLimits_(),r=s.yMax-s.yMin,l=this.bgcanvas_ctx_,d=0.5,p=this.dygraph_.xAxisExtremes(),h=t(p[1]-p[0],1e-30),g=(this.canvasRect_.w-d)/h,c=(this.canvasRect_.h-d)/r,u=this.canvasRect_.w-d,_=this.canvasRect_.h-d,f=null,m=null;l.beginPath(),l.moveTo(d,_);for(var b=0;b<s.data.length;b++){var i=s.data[b],v=null===i[0]?NaN:(i[0]-p[0])*g,x=null===i[1]?NaN:_-(i[1]-s.yMin)*c;(o||null===f||n(v)!=n(f))&&(isFinite(v)&&isFinite(x)?(null===f?l.lineTo(v,_):o&&l.lineTo(v,m),l.lineTo(v,x),f=v,m=x):(null!==f&&(o?(l.lineTo(v,m),l.lineTo(v,_)):l.lineTo(f,_)),f=m=null))}if(l.lineTo(u,_),l.closePath(),e){var y=this.bgcanvas_ctx_.createLinearGradient(0,0,0,_);y.addColorStop(0,'white'),y.addColorStop(1,e),this.bgcanvas_ctx_.fillStyle=y,l.fill()}a&&(this.bgcanvas_ctx_.strokeStyle=a,this.bgcanvas_ctx_.lineWidth=1.5,l.stroke())}},o.prototype.computeCombinedSeriesAndLimits_=function(){var n=this.dygraph_,o=this.getOption_('logscale'),s=n.numColumns(),r=n.getLabels(),l=Array(s),d=!1,p;for(p=1;p<s;p++){var i=this.getOption_('showInRangeSelector',r[p]);l[p]=i,null!==i&&(d=!0)}if(!d)for(p=0;p<l.length;p++)l[p]=!0;var h=[],g=n.dataHandler_,c=n.attributes_;for(p=1;p<n.numColumns();p++)if(l[p]){var u=g.extractSeries(n.rawData_,p,c);1<n.rollPeriod()&&(u=g.rollingAverage(u,n.rollPeriod(),c)),h.push(u)}var _=[];for(p=0;p<h[0].length;p++){for(var x=0,f=0,m=0,b;m<h.length;m++)b=h[m][p][1],null===b||isNaN(b)||(f++,x+=b);_.push([h[0][p][0],x/f])}var y=e,v=-e;for(p=0;p<_.length;p++){var w=_[p][1];null!==w&&isFinite(w)&&(!o||0<w)&&(y=a(y,w),v=t(v,w))}var A=0.25;if(o)for(v=Dygraph.log10(v),v+=v*A,y=Dygraph.log10(y),p=0;p<_.length;p++)_[p][1]=Dygraph.log10(_[p][1]);else{var T=v-y,E;E=T<=Number.MIN_VALUE?v*A:T*A,v+=E,y-=E}return{data:_,yMin:y,yMax:v}},o.prototype.placeZoomHandles_=function(){var e=this.dygraph_.xAxisExtremes(),a=this.dygraph_.xAxisRange(),i=e[1]-e[0],n=t(0,(a[0]-e[0])/i),o=t(0,(e[1]-a[1])/i),s=this.canvasRect_.x+this.canvasRect_.w*n,r=this.canvasRect_.x+this.canvasRect_.w*(1-o),l=t(this.canvasRect_.y,this.canvasRect_.y+(this.canvasRect_.h-this.leftZoomHandle_.height)/2),d=this.leftZoomHandle_.width/2;this.leftZoomHandle_.style.left=s-d+'px',this.leftZoomHandle_.style.top=l+'px',this.rightZoomHandle_.style.left=r-d+'px',this.rightZoomHandle_.style.top=this.leftZoomHandle_.style.top,this.leftZoomHandle_.style.visibility='visible',this.rightZoomHandle_.style.visibility='visible'},o.prototype.drawInteractiveLayer_=function(){var e=this.fgcanvas_ctx_;e.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);var i=1,n=this.canvasRect_.w-i,o=this.canvasRect_.h-i,s=this.getZoomHandleStatus_();if(e.strokeStyle='black',!s.isZoomed)e.beginPath(),e.moveTo(i,i),e.lineTo(i,o),e.lineTo(n,o),e.lineTo(n,i),e.stroke(),this.iePanOverlay_&&(this.iePanOverlay_.style.display='none');else{var r=t(i,s.leftHandlePos-this.canvasRect_.x),l=a(n,s.rightHandlePos-this.canvasRect_.x);e.fillStyle='rgba(240, 240, 240, 0.6)',e.fillRect(0,0,r,this.canvasRect_.h),e.fillRect(l,0,this.canvasRect_.w-l,this.canvasRect_.h),e.beginPath(),e.moveTo(i,i),e.lineTo(r,i),e.lineTo(r,o),e.lineTo(l,o),e.lineTo(l,i),e.lineTo(n,i),e.stroke(),this.isUsingExcanvas_&&(this.iePanOverlay_.style.width=l-r+'px',this.iePanOverlay_.style.left=r+'px',this.iePanOverlay_.style.height=o+'px',this.iePanOverlay_.style.display='inline')}},o.prototype.getZoomHandleStatus_=function(){var e=this.leftZoomHandle_.width/2,t=parseFloat(this.leftZoomHandle_.style.left)+e,a=parseFloat(this.rightZoomHandle_.style.left)+e;return{leftHandlePos:t,rightHandlePos:a,isZoomed:t-1>this.canvasRect_.x||a+1<this.canvasRect_.x+this.canvasRect_.w}},o}(),Dygraph.PLUGINS.push(Dygraph.Plugins.Legend,Dygraph.Plugins.Axes,Dygraph.Plugins.RangeSelector,Dygraph.Plugins.ChartLabels,Dygraph.Plugins.Annotations,Dygraph.Plugins.Grid),Dygraph.OPTIONS_REFERENCE={xValueParser:{default:'parseFloat() or Date.parse()*',labels:['CSV parsing'],type:'function(str) -> number',description:'A function which parses x-values (i.e. the dependent series). Must return a number, even when the values are dates. In this case, millis since epoch are used. This is used primarily for parsing CSV data. *=Dygraphs is slightly more accepting in the dates which it will parse. See code for details.'},stackedGraph:{default:'false',labels:['Data Line display'],type:'boolean',description:'If set, stack series on top of one another rather than drawing them independently. The first series specified in the input data will wind up on top of the chart and the last will be on bottom. NaN values are drawn as white areas without a line on top, see stackedGraphNaNFill for details.'},stackedGraphNaNFill:{default:'all',labels:['Data Line display'],type:'string',description:'Controls handling of NaN values inside a stacked graph. NaN values are interpolated/extended for stacking purposes, but the actual point value remains NaN in the legend display. Valid option values are "all" (interpolate internally, repeat leftmost and rightmost value as needed), "inside" (interpolate internally only, use zero outside leftmost and rightmost value), and "none" (treat NaN as zero everywhere).'},pointSize:{default:'1',labels:['Data Line display'],type:'integer',description:'The size of the dot to draw on each point in pixels (see drawPoints). A dot is always drawn when a point is "isolated", i.e. there is a missing point on either side of it. This also controls the size of those dots.'},labelsDivStyles:{default:'null',labels:['Legend'],type:'{}',description:'Additional styles to apply to the currently-highlighted points div. For example, { \'fontWeight\': \'bold\' } will make the labels bold. In general, it is better to use CSS to style the .dygraph-legend class than to use this property.'},drawPoints:{default:'false',labels:['Data Line display'],type:'boolean',description:'Draw a small dot at each point, in addition to a line going through the point. This makes the individual data points easier to see, but can increase visual clutter in the chart. The small dot can be replaced with a custom rendering by supplying a <a href=\'#drawPointCallback\'>drawPointCallback</a>.'},drawGapEdgePoints:{default:'false',labels:['Data Line display'],type:'boolean',description:'Draw points at the edges of gaps in the data. This improves visibility of small data segments or other data irregularities.'},drawPointCallback:{default:'null',labels:['Data Line display'],type:'function(g, seriesName, canvasContext, cx, cy, color, pointSize)',parameters:[['g','the reference graph'],['seriesName','the name of the series'],['canvasContext','the canvas to draw on'],['cx','center x coordinate'],['cy','center y coordinate'],['color','series color'],['pointSize','the radius of the image.'],['idx','the row-index of the point in the data.']],description:'Draw a custom item when drawPoints is enabled. Default is a small dot matching the series color. This method should constrain drawing to within pointSize pixels from (cx, cy).  Also see <a href=\'#drawHighlightPointCallback\'>drawHighlightPointCallback</a>'},height:{default:'320',labels:['Overall display'],type:'integer',description:'Height, in pixels, of the chart. If the container div has been explicitly sized, this will be ignored.'},zoomCallback:{default:'null',labels:['Callbacks'],type:'function(minDate, maxDate, yRanges)',parameters:[['minDate','milliseconds since epoch'],['maxDate','milliseconds since epoch.'],['yRanges','is an array of [bottom, top] pairs, one for each y-axis.']],description:'A function to call when the zoom window is changed (either by zooming in or out).'},pointClickCallback:{snippet:'function(e, point){<br>&nbsp;&nbsp;alert(point);<br>}',default:'null',labels:['Callbacks','Interactive Elements'],type:'function(e, point)',parameters:[['e','the event object for the click'],['point','the point that was clicked See <a href=\'#point_properties\'>Point properties</a> for details']],description:'A function to call when a data point is clicked. and the point that was clicked.'},color:{default:'(see description)',labels:['Data Series Colors'],type:'string',example:'red',description:'A per-series color definition. Used in conjunction with, and overrides, the colors option.'},colors:{default:'(see description)',labels:['Data Series Colors'],type:'array<string>',example:'[\'red\', \'#00FF00\']',description:'List of colors for the data series. These can be of the form "#AABBCC" or "rgb(255,100,200)" or "yellow", etc. If not specified, equally-spaced points around a color wheel are used. Overridden by the \'color\' option.'},connectSeparatedPoints:{default:'false',labels:['Data Line display'],type:'boolean',description:'Usually, when Dygraphs encounters a missing value in a data series, it interprets this as a gap and draws it as such. If, instead, the missing values represents an x-value for which only a different series has data, then you\'ll want to connect the dots by setting this to true. To explicitly include a gap with this option set, use a value of NaN.'},highlightCallback:{default:'null',labels:['Callbacks'],type:'function(event, x, points, row, seriesName)',description:'When set, this callback gets called every time a new point is highlighted.',parameters:[['event','the JavaScript mousemove event'],['x','the x-coordinate of the highlighted points'],['points','an array of highlighted points: <code>[ {name: \'series\', yval: y-value}, &hellip; ]</code>'],['row','integer index of the highlighted row in the data table, starting from 0'],['seriesName','name of the highlighted series, only present if highlightSeriesOpts is set.']]},drawHighlightPointCallback:{default:'null',labels:['Data Line display'],type:'function(g, seriesName, canvasContext, cx, cy, color, pointSize)',parameters:[['g','the reference graph'],['seriesName','the name of the series'],['canvasContext','the canvas to draw on'],['cx','center x coordinate'],['cy','center y coordinate'],['color','series color'],['pointSize','the radius of the image.'],['idx','the row-index of the point in the data.']],description:'Draw a custom item when a point is highlighted.  Default is a small dot matching the series color. This method should constrain drawing to within pointSize pixels from (cx, cy) Also see <a href=\'#drawPointCallback\'>drawPointCallback</a>'},highlightSeriesOpts:{default:'null',labels:['Interactive Elements'],type:'Object',description:'When set, the options from this object are applied to the timeseries closest to the mouse pointer for interactive highlighting. See also \'highlightCallback\'. Example: highlightSeriesOpts: { strokeWidth: 3 }.'},highlightSeriesBackgroundAlpha:{default:'0.5',labels:['Interactive Elements'],type:'float',description:'Fade the background while highlighting series. 1=fully visible background (disable fading), 0=hiddden background (show highlighted series only).'},includeZero:{default:'false',labels:['Axis display'],type:'boolean',description:'Usually, dygraphs will use the range of the data plus some padding to set the range of the y-axis. If this option is set, the y-axis will always include zero, typically as the lowest value. This can be used to avoid exaggerating the variance in the data'},rollPeriod:{default:'1',labels:['Error Bars','Rolling Averages'],type:'integer &gt;= 1',description:'Number of days over which to average data. Discussed extensively above.'},unhighlightCallback:{default:'null',labels:['Callbacks'],type:'function(event)',parameters:[['event','the mouse event']],description:'When set, this callback gets called every time the user stops highlighting any point by mousing out of the graph.'},axisTickSize:{default:'3.0',labels:['Axis display'],type:'number',description:'The size of the line to display next to each tick mark on x- or y-axes.'},labelsSeparateLines:{default:'false',labels:['Legend'],type:'boolean',description:'Put <code>&lt;br/&gt;</code> between lines in the label string. Often used in conjunction with <strong>labelsDiv</strong>.'},xValueFormatter:{default:'',labels:['Deprecated'],type:'',description:'Prefer axes: { x: { valueFormatter } }'},valueFormatter:{default:'Depends on the type of your data.',labels:['Legend','Value display/formatting'],type:'function(num or millis, opts, seriesName, dygraph, row, col)',description:'Function to provide a custom display format for the values displayed on mouseover. This does not affect the values that appear on tick marks next to the axes. To format those, see axisLabelFormatter. This is usually set on a <a href=\'per-axis.html\'>per-axis</a> basis. .',parameters:[['num_or_millis','The value to be formatted. This is always a number. For date axes, it\'s millis since epoch. You can call new Date(millis) to get a Date object.'],['opts','This is a function you can call to access various options (e.g. opts(\'labelsKMB\')). It returns per-axis values for the option when available.'],['seriesName','The name of the series from which the point came, e.g. \'X\', \'Y\', \'A\', etc.'],['dygraph','The dygraph object for which the formatting is being done'],['row','The row of the data from which this point comes. g.getValue(row, 0) will return the x-value for this point.'],['col','The column of the data from which this point comes. g.getValue(row, col) will return the original y-value for this point. This can be used to get the full confidence interval for the point, or access un-rolled values for the point.']]},pixelsPerYLabel:{default:'',labels:['Deprecated'],type:'integer',description:'Prefer axes: { y: { pixelsPerLabel } }'},annotationMouseOverHandler:{default:'null',labels:['Annotations'],type:'function(annotation, point, dygraph, event)',description:'If provided, this function is called whenever the user mouses over an annotation.'},annotationMouseOutHandler:{default:'null',labels:['Annotations'],type:'function(annotation, point, dygraph, event)',parameters:[['annotation','the annotation left'],['point','the point associated with the annotation'],['dygraph','the reference graph'],['event','the mouse event']],description:'If provided, this function is called whenever the user mouses out of an annotation.'},annotationClickHandler:{default:'null',labels:['Annotations'],type:'function(annotation, point, dygraph, event)',parameters:[['annotation','the annotation left'],['point','the point associated with the annotation'],['dygraph','the reference graph'],['event','the mouse event']],description:'If provided, this function is called whenever the user clicks on an annotation.'},annotationDblClickHandler:{default:'null',labels:['Annotations'],type:'function(annotation, point, dygraph, event)',parameters:[['annotation','the annotation left'],['point','the point associated with the annotation'],['dygraph','the reference graph'],['event','the mouse event']],description:'If provided, this function is called whenever the user double-clicks on an annotation.'},drawCallback:{default:'null',labels:['Callbacks'],type:'function(dygraph, is_initial)',parameters:[['dygraph','The graph being drawn'],['is_initial','True if this is the initial draw, false for subsequent draws.']],description:'When set, this callback gets called every time the dygraph is drawn. This includes the initial draw, after zooming and repeatedly while panning.'},labelsKMG2:{default:'false',labels:['Value display/formatting'],type:'boolean',description:'Show k/M/G for kilo/Mega/Giga on y-axis. This is different than <code>labelsKMB</code> in that it uses base 2, not 10.'},delimiter:{default:',',labels:['CSV parsing'],type:'string',description:'The delimiter to look for when separating fields of a CSV file. Setting this to a tab is not usually necessary, since tab-delimited data is auto-detected.'},axisLabelFontSize:{default:'14',labels:['Axis display'],type:'integer',description:'Size of the font (in pixels) to use in the axis labels, both x- and y-axis.'},underlayCallback:{default:'null',labels:['Callbacks'],type:'function(context, area, dygraph)',parameters:[['context','the canvas drawing context on which to draw'],['area','An object with {x,y,w,h} properties describing the drawing area.'],['dygraph','the reference graph']],description:'When set, this callback gets called before the chart is drawn. It details on how to use this.'},width:{default:'480',labels:['Overall display'],type:'integer',description:'Width, in pixels, of the chart. If the container div has been explicitly sized, this will be ignored.'},interactionModel:{default:'...',labels:['Interactive Elements'],type:'Object',description:'TODO(konigsberg): document this'},ticker:{default:'Dygraph.dateTicker or Dygraph.numericTicks',labels:['Axis display'],type:'function(min, max, pixels, opts, dygraph, vals) -> [{v: ..., label: ...}, ...]',parameters:[['min',''],['max',''],['pixels',''],['opts',''],['dygraph','the reference graph'],['vals','']],description:'This lets you specify an arbitrary function to generate tick marks on an axis. The tick marks are an array of (value, label) pairs. The built-in functions go to great lengths to choose good tick marks so, if you set this option, you\'ll most likely want to call one of them and modify the result. See dygraph-tickers.js for an extensive discussion. This is set on a <a href=\'per-axis.html\'>per-axis</a> basis.'},xAxisLabelWidth:{default:'',labels:['Deprecated'],type:'integer',description:'Prefer axes: { x: { axisLabelWidth } }'},xAxisHeight:{default:'(null)',labels:['Axis display'],type:'integer',description:'Height, in pixels, of the x-axis. If not set explicitly, this is computed based on axisLabelFontSize and axisTickSize.'},showLabelsOnHighlight:{default:'true',labels:['Interactive Elements','Legend'],type:'boolean',description:'Whether to show the legend upon mouseover.'},axis:{default:'(none)',labels:['Axis display'],type:'string',description:'Set to either \'y1\' or \'y2\' to assign a series to a y-axis (primary or secondary). Must be set per-series.'},pixelsPerXLabel:{default:'',labels:['Deprecated'],type:'integer',description:'Prefer axes { x: { pixelsPerLabel } }'},pixelsPerLabel:{default:'70 (x-axis) or 30 (y-axes)',labels:['Axis display','Grid'],type:'integer',description:'Number of pixels to require between each x- and y-label. Larger values will yield a sparser axis with fewer ticks. This is set on a <a href=\'per-axis.html\'>per-axis</a> basis.'},labelsDiv:{default:'null',labels:['Legend'],type:'DOM element or string',example:'<code style=\'font-size: small\'>document.getElementById(\'foo\')</code>or<code>\'foo\'',description:'Show data labels in an external div, rather than on the graph.  This value can either be a div element or a div id.'},fractions:{default:'false',labels:['CSV parsing','Error Bars'],type:'boolean',description:'When set, attempt to parse each cell in the CSV file as "a/b", where a and b are integers. The ratio will be plotted. This allows computation of Wilson confidence intervals (see below).'},logscale:{default:'false',labels:['Axis display'],type:'boolean',description:'When set for the y-axis or x-axis, the graph shows that axis in log scale. Any values less than or equal to zero are not displayed. Showing log scale with ranges that go below zero will result in an unviewable graph.\n\n Not compatible with showZero. connectSeparatedPoints is ignored. This is ignored for date-based x-axes.'},strokeWidth:{default:'1.0',labels:['Data Line display'],type:'float',example:'0.5, 2.0',description:'The width of the lines connecting data points. This can be used to increase the contrast or some graphs.'},strokePattern:{default:'null',labels:['Data Line display'],type:'array<integer>',example:'[10, 2, 5, 2]',description:'A custom pattern array where the even index is a draw and odd is a space in pixels. If null then it draws a solid line. The array should have a even length as any odd lengthed array could be expressed as a smaller even length array. This is used to create dashed lines.'},strokeBorderWidth:{default:'null',labels:['Data Line display'],type:'float',example:'1.0',description:'Draw a border around graph lines to make crossing lines more easily distinguishable. Useful for graphs with many lines.'},strokeBorderColor:{default:'white',labels:['Data Line display'],type:'string',example:'red, #ccffdd',description:'Color for the line border used if strokeBorderWidth is set.'},wilsonInterval:{default:'true',labels:['Error Bars'],type:'boolean',description:'Use in conjunction with the "fractions" option. Instead of plotting +/- N standard deviations, dygraphs will compute a Wilson confidence interval and plot that. This has more reasonable behavior for ratios close to 0 or 1.'},fillGraph:{default:'false',labels:['Data Line display'],type:'boolean',description:'Should the area underneath the graph be filled? This option is not compatible with error bars. This may be set on a <a href=\'per-axis.html\'>per-series</a> basis.'},highlightCircleSize:{default:'3',labels:['Interactive Elements'],type:'integer',description:'The size in pixels of the dot drawn over highlighted points.'},gridLineColor:{default:'rgb(128,128,128)',labels:['Grid'],type:'red, blue',description:'The color of the gridlines. This may be set on a per-axis basis to define each axis\' grid separately.'},gridLinePattern:{default:'null',labels:['Grid'],type:'array<integer>',example:'[10, 2, 5, 2]',description:'A custom pattern array where the even index is a draw and odd is a space in pixels. If null then it draws a solid line. The array should have a even length as any odd lengthed array could be expressed as a smaller even length array. This is used to create dashed gridlines.'},visibility:{default:'[true, true, ...]',labels:['Data Line display'],type:'Array of booleans',description:'Which series should initially be visible? Once the Dygraph has been constructed, you can access and modify the visibility of each series using the <code>visibility</code> and <code>setVisibility</code> methods.'},valueRange:{default:'Full range of the input is shown',labels:['Axis display'],type:'Array of two numbers',example:'[10, 110]',description:'Explicitly set the vertical range of the graph to [low, high]. This may be set on a per-axis basis to define each y-axis separately. If either limit is unspecified, it will be calculated automatically (e.g. [null, 30] to automatically calculate just the lower bound)'},labelsDivWidth:{default:'250',labels:['Legend'],type:'integer',description:'Width (in pixels) of the div which shows information on the currently-highlighted points.'},colorSaturation:{default:'1.0',labels:['Data Series Colors'],type:'float (0.0 - 1.0)',description:'If <strong>colors</strong> is not specified, saturation of the automatically-generated data series colors.'},yAxisLabelWidth:{default:'',labels:['Deprecated'],type:'integer',description:'Prefer axes { y: { axisLabelWidth } }'},hideOverlayOnMouseOut:{default:'true',labels:['Interactive Elements','Legend'],type:'boolean',description:'Whether to hide the legend when the mouse leaves the chart area.'},yValueFormatter:{default:'',labels:['Deprecated'],type:'',description:'Prefer axes: { y: { valueFormatter } }'},legend:{default:'onmouseover',labels:['Legend'],type:'string',description:'When to display the legend. By default, it only appears when a user mouses over the chart. Set it to "always" to always display a legend of some sort. When set to "follow", legend follows highlighted points.'},labelsShowZeroValues:{default:'true',labels:['Legend'],type:'boolean',description:'Show zero value labels in the labelsDiv.'},stepPlot:{default:'false',labels:['Data Line display'],type:'boolean',description:'When set, display the graph as a step plot instead of a line plot. This option may either be set for the whole graph or for single series.'},labelsUTC:{default:'false',labels:['Value display/formatting','Axis display'],type:'boolean',description:'Show date/time labels according to UTC (instead of local time).'},labelsKMB:{default:'false',labels:['Value display/formatting'],type:'boolean',description:'Show K/M/B for thousands/millions/billions on y-axis.'},rightGap:{default:'5',labels:['Overall display'],type:'integer',description:'Number of pixels to leave blank at the right edge of the Dygraph. This makes it easier to highlight the right-most data point.'},avoidMinZero:{default:'false',labels:['Deprecated'],type:'boolean',description:'Deprecated, please use yRangePad instead. When set, the heuristic that fixes the Y axis at zero for a data set with the minimum Y value of zero is disabled. \nThis is particularly useful for data sets that contain many zero values, especially for step plots which may otherwise have lines not visible running along the bottom axis.'},drawAxesAtZero:{default:'false',labels:['Axis display'],type:'boolean',description:'When set, draw the X axis at the Y=0 position and the Y axis at the X=0 position if those positions are inside the graph\'s visible area. Otherwise, draw the axes at the bottom or left graph edge as usual.'},xRangePad:{default:'0',labels:['Axis display'],type:'float',description:'Add the specified amount of extra space (in pixels) around the X-axis value range to ensure points at the edges remain visible.'},yRangePad:{default:'null',labels:['Axis display'],type:'float',description:'If set, add the specified amount of extra space (in pixels) around the Y-axis value range to ensure points at the edges remain visible. If unset, use the traditional Y padding algorithm.'},xAxisLabelFormatter:{default:'',labels:['Deprecated'],type:'',description:'Prefer axes { x: { axisLabelFormatter } }'},axisLabelFormatter:{default:'Depends on the data type',labels:['Axis display'],type:'function(number or Date, granularity, opts, dygraph)',parameters:[['number or date','Either a number (for a numeric axis) or a Date object (for a date axis)'],['granularity','specifies how fine-grained the axis is. For date axes, this is a reference to the time granularity enumeration, defined in dygraph-tickers.js, e.g. Dygraph.WEEKLY.'],['opts','a function which provides access to various options on the dygraph, e.g. opts(\'labelsKMB\').'],['dygraph','the referenced graph']],description:'Function to call to format the tick values that appear along an axis. This is usually set on a <a href=\'per-axis.html\'>per-axis</a> basis.'},clickCallback:{snippet:'function(e, date_millis){<br>&nbsp;&nbsp;alert(new Date(date_millis));<br>}',default:'null',labels:['Callbacks'],type:'function(e, x, points)',parameters:[['e','The event object for the click'],['x','The x value that was clicked (for dates, this is milliseconds since epoch)'],['points','The closest points along that date. See <a href=\'#point_properties\'>Point properties</a> for details.']],description:'A function to call when the canvas is clicked.'},yAxisLabelFormatter:{default:'',labels:['Deprecated'],type:'',description:'Prefer axes: { y: { axisLabelFormatter } }'},labels:{default:'["X", "Y1", "Y2", ...]*',labels:['Legend'],type:'array<string>',description:'A name for each data series, including the independent (X) series. For CSV files and DataTable objections, this is determined by context. For raw data, this must be specified. If it is not, default values are supplied and a warning is logged.'},dateWindow:{default:'Full range of the input is shown',labels:['Axis display'],type:'Array of two numbers',example:'[<br>&nbsp;&nbsp;Date.parse(\'2006-01-01\'),<br>&nbsp;&nbsp;(new Date()).valueOf()<br>]',description:'Initially zoom in on a section of the graph. Is of the form [earliest, latest], where earliest/latest are milliseconds since epoch. If the data for the x-axis is numeric, the values in dateWindow must also be numbers.'},showRoller:{default:'false',labels:['Interactive Elements','Rolling Averages'],type:'boolean',description:'If the rolling average period text box should be shown.'},sigma:{default:'2.0',labels:['Error Bars'],type:'float',description:'When errorBars is set, shade this many standard deviations above/below each point.'},customBars:{default:'false',labels:['CSV parsing','Error Bars'],type:'boolean',description:'When set, parse each CSV cell as "low;middle;high". Error bars will be drawn for each point between low and high, with the series itself going through middle.'},colorValue:{default:'1.0',labels:['Data Series Colors'],type:'float (0.0 - 1.0)',description:'If colors is not specified, value of the data series colors, as in hue/saturation/value. (0.0-1.0, default 0.5)'},errorBars:{default:'false',labels:['CSV parsing','Error Bars'],type:'boolean',description:'Does the data contain standard deviations? Setting this to true alters the input format (see above).'},displayAnnotations:{default:'false',labels:['Annotations'],type:'boolean',description:'Only applies when Dygraphs is used as a GViz chart. Causes string columns following a data series to be interpreted as annotations on points in that series. This is the same format used by Google\'s AnnotatedTimeLine chart.'},panEdgeFraction:{default:'null',labels:['Axis display','Interactive Elements'],type:'float',description:'A value representing the farthest a graph may be panned, in percent of the display. For example, a value of 0.1 means that the graph can only be panned 10% pased the edges of the displayed values. null means no bounds.'},title:{labels:['Chart labels'],type:'string',default:'null',description:'Text to display above the chart. You can supply any HTML for this value, not just text. If you wish to style it using CSS, use the \'dygraph-label\' or \'dygraph-title\' classes.'},titleHeight:{default:'18',labels:['Chart labels'],type:'integer',description:'Height of the chart title, in pixels. This also controls the default font size of the title. If you style the title on your own, this controls how much space is set aside above the chart for the title\'s div.'},xlabel:{labels:['Chart labels'],type:'string',default:'null',description:'Text to display below the chart\'s x-axis. You can supply any HTML for this value, not just text. If you wish to style it using CSS, use the \'dygraph-label\' or \'dygraph-xlabel\' classes.'},xLabelHeight:{labels:['Chart labels'],type:'integer',default:'18',description:'Height of the x-axis label, in pixels. This also controls the default font size of the x-axis label. If you style the label on your own, this controls how much space is set aside below the chart for the x-axis label\'s div.'},ylabel:{labels:['Chart labels'],type:'string',default:'null',description:'Text to display to the left of the chart\'s y-axis. You can supply any HTML for this value, not just text. If you wish to style it using CSS, use the \'dygraph-label\' or \'dygraph-ylabel\' classes. The text will be rotated 90 degrees by default, so CSS rules may behave in unintuitive ways. No additional space is set aside for a y-axis label. If you need more space, increase the width of the y-axis tick labels using the yAxisLabelWidth option. If you need a wider div for the y-axis label, either style it that way with CSS (but remember that it\'s rotated, so width is controlled by the \'height\' property) or set the yLabelWidth option.'},y2label:{labels:['Chart labels'],type:'string',default:'null',description:'Text to display to the right of the chart\'s secondary y-axis. This label is only displayed if a secondary y-axis is present. See <a href=\'http://dygraphs.com/tests/two-axes.html\'>this test</a> for an example of how to do this. The comments for the \'ylabel\' option generally apply here as well. This label gets a \'dygraph-y2label\' instead of a \'dygraph-ylabel\' class.'},yLabelWidth:{labels:['Chart labels'],type:'integer',default:'18',description:'Width of the div which contains the y-axis label. Since the y-axis label appears rotated 90 degrees, this actually affects the height of its div.'},isZoomedIgnoreProgrammaticZoom:{default:'false',labels:['Zooming'],type:'boolean',description:'When this option is passed to updateOptions() along with either the <code>dateWindow</code> or <code>valueRange</code> options, the zoom flags are not changed to reflect a zoomed state. This is primarily useful for when the display area of a chart is changed programmatically and also where manual zooming is allowed and use is made of the <code>isZoomed</code> method to determine this.'},drawXGrid:{default:'true',labels:['Grid','Deprecated'],type:'boolean',description:'Use the per-axis option drawGrid instead. Whether to display vertical gridlines under the chart.'},drawYGrid:{default:'true',labels:['Grid','Deprecated'],type:'boolean',description:'Use the per-axis option drawGrid instead. Whether to display horizontal gridlines under the chart.'},drawGrid:{default:'true for x and y, false for y2',labels:['Grid'],type:'boolean',description:'Whether to display gridlines in the chart. This may be set on a per-axis basis to define the visibility of each axis\' grid separately.'},independentTicks:{default:'true for y, false for y2',labels:['Axis display','Grid'],type:'boolean',description:'Only valid for y and y2, has no effect on x: This option defines whether the y axes should align their ticks or if they should be independent. Possible combinations: 1.) y=true, y2=false (default): y is the primary axis and the y2 ticks are aligned to the the ones of y. (only 1 grid) 2.) y=false, y2=true: y2 is the primary axis and the y ticks are aligned to the the ones of y2. (only 1 grid) 3.) y=true, y2=true: Both axis are independent and have their own ticks. (2 grids) 4.) y=false, y2=false: Invalid configuration causes an error.'},drawXAxis:{default:'true',labels:['Axis display'],type:'boolean',description:'Deprecated. Use axes : { x : { drawAxis } }.'},drawYAxis:{default:'true',labels:['Axis display'],type:'boolean',description:'Deprecated. Use axes : { y : { drawAxis } }.'},drawAxis:{default:'true for x and y, false for y2',labels:['Axis display'],type:'boolean',description:'Whether to draw the specified axis. This may be set on a per-axis basis to define the visibility of each axis separately. Setting this to false also prevents axis ticks from being drawn and reclaims the space for the chart grid/lines.'},gridLineWidth:{default:'0.3',labels:['Grid'],type:'float',description:'Thickness (in pixels) of the gridlines drawn under the chart. The vertical/horizontal gridlines can be turned off entirely by using the drawXGrid and drawYGrid options. This may be set on a per-axis basis to define each axis\' grid separately.'},axisLineWidth:{default:'0.3',labels:['Axis display'],type:'float',description:'Thickness (in pixels) of the x- and y-axis lines.'},axisLineColor:{default:'black',labels:['Axis display'],type:'string',description:'Color of the x- and y-axis lines. Accepts any value which the HTML canvas strokeStyle attribute understands, e.g. \'black\' or \'rgb(0, 100, 255)\'.'},fillAlpha:{default:'0.15',labels:['Error Bars','Data Series Colors'],type:'float (0.0 - 1.0)',description:'Error bars (or custom bars) for each series are drawn in the same color as the series, but with partial transparency. This sets the transparency. A value of 0.0 means that the error bars will not be drawn, whereas a value of 1.0 means that the error bars will be as dark as the line for the series itself. This can be used to produce chart lines whose thickness varies at each point.'},axisLabelColor:{default:'black',labels:['Axis display'],type:'string',description:'Color for x- and y-axis labels. This is a CSS color string.'},axisLabelWidth:{default:'50 (y-axis), 60 (x-axis)',labels:['Axis display','Chart labels'],type:'integer',description:'Width (in pixels) of the containing divs for x- and y-axis labels. For the y-axis, this also controls the width of the y-axis. Note that for the x-axis, this is independent from pixelsPerLabel, which controls the spacing between labels.'},sigFigs:{default:'null',labels:['Value display/formatting'],type:'integer',description:'By default, dygraphs displays numbers with a fixed number of digits after the decimal point. If you\'d prefer to have a fixed number of significant figures, set this option to that number of sig figs. A value of 2, for instance, would cause 1 to be display as 1.0 and 1234 to be displayed as 1.23e+3.'},digitsAfterDecimal:{default:'2',labels:['Value display/formatting'],type:'integer',description:'Unless it\'s run in scientific mode (see the <code>sigFigs</code> option), dygraphs displays numbers with <code>digitsAfterDecimal</code> digits after the decimal point. Trailing zeros are not displayed, so with a value of 2 you\'ll get \'0\', \'0.1\', \'0.12\', \'123.45\' but not \'123.456\' (it will be rounded to \'123.46\'). Numbers with absolute value less than 0.1^digitsAfterDecimal (i.e. those which would show up as \'0.00\') will be displayed in scientific notation.'},maxNumberWidth:{default:'6',labels:['Value display/formatting'],type:'integer',description:'When displaying numbers in normal (not scientific) mode, large numbers will be displayed with many trailing zeros (e.g. 100000000 instead of 1e9). This can lead to unwieldy y-axis labels. If there are more than <code>maxNumberWidth</code> digits to the left of the decimal in a number, dygraphs will switch to scientific notation, even when not operating in scientific mode. If you\'d like to see all those digits, set this to something large, like 20 or 30.'},file:{default:'(set when constructed)',labels:['Data'],type:'string (URL of CSV or CSV), GViz DataTable or 2D Array',description:'Sets the data being displayed in the chart. This can only be set when calling updateOptions; it cannot be set from the constructor. For a full description of valid data formats, see the <a href=\'http://dygraphs.com/data.html\'>Data Formats</a> page.'},timingName:{default:'null',labels:['Debugging'],type:'string',description:'Set this option to log timing information. The value of the option will be logged along with the timimg, so that you can distinguish multiple dygraphs on the same page.'},showRangeSelector:{default:'false',labels:['Interactive Elements'],type:'boolean',description:'Show or hide the range selector widget.'},rangeSelectorHeight:{default:'40',labels:['Interactive Elements'],type:'integer',description:'Height, in pixels, of the range selector widget. This option can only be specified at Dygraph creation time.'},rangeSelectorPlotStrokeColor:{default:'#808FAB',labels:['Interactive Elements'],type:'string',description:'The range selector mini plot stroke color. This can be of the form "#AABBCC" or "rgb(255,100,200)" or "yellow". You can also specify null or "" to turn off stroke.'},rangeSelectorPlotFillColor:{default:'#A7B1C4',labels:['Interactive Elements'],type:'string',description:'The range selector mini plot fill color. This can be of the form "#AABBCC" or "rgb(255,100,200)" or "yellow". You can also specify null or "" to turn off fill.'},showInRangeSelector:{default:'null',labels:['Interactive Elements'],type:'boolean',description:'Mark this series for inclusion in the range selector. The mini plot curve will be an average of all such series. If this is not specified for any series, the default behavior is to average all the series. Setting it for one series will result in that series being charted alone in the range selector.'},animatedZooms:{default:'false',labels:['Interactive Elements'],type:'boolean',description:'Set this option to animate the transition between zoom windows. Applies to programmatic and interactive zooms. Note that if you also set a drawCallback, it will be called several times on each zoom. If you set a zoomCallback, it will only be called after the animation is complete.'},plotter:{default:'[DygraphCanvasRenderer.Plotters.fillPlotter, DygraphCanvasRenderer.Plotters.errorPlotter, DygraphCanvasRenderer.Plotters.linePlotter]',labels:['Data Line display'],type:'array or function',description:'A function (or array of functions) which plot each data series on the chart. TODO(danvk): more details! May be set per-series.'},axes:{default:'null',labels:['Configuration'],type:'Object',description:'Defines per-axis options. Valid keys are \'x\', \'y\' and \'y2\'. Only some options may be set on a per-axis basis. If an option may be set in this way, it will be noted on this page. See also documentation on <a href=\'http://dygraphs.com/per-axis.html\'>per-series and per-axis options</a>.'},series:{default:'null',labels:['Series'],type:'Object',description:'Defines per-series options. Its keys match the y-axis label names, and the values are dictionaries themselves that contain options specific to that series. When this option is missing, it falls back on the old-style of per-series options comingled with global options.'},plugins:{default:'[]',labels:['Configuration'],type:'Array<plugin>',description:'Defines per-graph plugins. Useful for per-graph customization'},dataHandler:{default:'(depends on data)',labels:['Data'],type:'Dygraph.DataHandler',description:'Custom DataHandler. This is an advanced customization. See http://bit.ly/151E7Aq.'}},function(){'use strict';var e=function(e){window.console&&window.console.warn(e)},t=['type','default','description'],a=['Annotations','Axis display','Chart labels','CSV parsing','Callbacks','Data','Data Line display','Data Series Colors','Error Bars','Grid','Interactive Elements','Legend','Overall display','Rolling Averages','Series','Value display/formatting','Zooming','Debugging','Configuration','Deprecated'],n={},o;for(o=0;o<a.length;o++)n[a[o]]=!0;for(var i in Dygraph.OPTIONS_REFERENCE)if(Dygraph.OPTIONS_REFERENCE.hasOwnProperty(i)){var s=Dygraph.OPTIONS_REFERENCE[i];for(o=0;o<t.length;o++)s.hasOwnProperty(t[o])?'string'!=typeof s[t[o]]&&e(i+'.'+t[o]+' must be of type string'):e('Option '+i+' missing "'+t[o]+'" property');var r=s.labels;if('object'!==typeof r)e('Option "'+i+'" is missing a "labels": [...] option');else for(o=0;o<r.length;o++)n.hasOwnProperty(r[o])||e('Option "'+i+'" has label "'+r[o]+'", which is invalid.')}}(),Dygraph.DataHandler=function(){},Dygraph.DataHandlers={},function(){'use strict';var e=Dygraph.DataHandler;e.X=0,e.Y=1,e.EXTRAS=2,e.prototype.extractSeries=function(){},e.prototype.seriesToPoints=function(t,a,n){for(var o=[],s=0;s<t.length;++s){var i=t[s],r=i[1],l=null===r?null:e.parseFloat(r),d={x:NaN,y:NaN,xval:e.parseFloat(i[0]),yval:l,name:a,idx:s+n};o.push(d)}return this.onPointsCreated_(t,o),o},e.prototype.onPointsCreated_=function(){},e.prototype.rollingAverage=function(){},e.prototype.getExtremeYValues=function(){},e.prototype.onLineEvaluated=function(){},e.prototype.computeYInterpolation_=function(e,t,a){var i=t[1]-e[1],n=t[0]-e[0],o=(a-e[0])*(i/n);return e[1]+o},e.prototype.getIndexesInWindow_=function(e,t){var a=0,i=e.length-1;if(t){for(var n=0,o=t[0],s=t[1];n<e.length-1&&e[n][0]<o;)a++,n++;for(n=e.length-1;0<n&&e[n][0]>s;)i--,n--}return a<=i?[a,i]:[0,e.length-1]},e.parseFloat=function(e){return null===e?NaN:e}}(),function(){'use strict';Dygraph.DataHandlers.DefaultHandler=function(){};var e=Dygraph.DataHandlers.DefaultHandler;e.prototype=new Dygraph.DataHandler,e.prototype.extractSeries=function(e,t,a){for(var i=[],n=a.get('logscale'),o=0;o<e.length;o++){var s=e[o][0],r=e[o][t];n&&0>=r&&(r=null),i.push([s,r])}return i},e.prototype.rollingAverage=function(e,t){t=Math.min(t,e.length);var a=[],n,i,o,s,r;if(1==t)return e;for(n=0;n<e.length;n++){for(s=0,r=0,i=Math.max(0,n-t+1);i<n+1;i++)o=e[i][1],null===o||isNaN(o)||(r++,s+=e[i][1]);a[n]=r?[e[n][0],s/r]:[e[n][0],null]}return a},e.prototype.getExtremeYValues=function(e){for(var t=null,a=null,i=e.length-1,n=0,o;n<=i;n++)o=e[n][1],null===o||isNaN(o)||((null===a||o>a)&&(a=o),(null===t||o<t)&&(t=o));return[t,a]}}(),function(){'use strict';Dygraph.DataHandlers.DefaultFractionHandler=function(){};var e=Dygraph.DataHandlers.DefaultFractionHandler;e.prototype=new Dygraph.DataHandlers.DefaultHandler,e.prototype.extractSeries=function(e,t,a){for(var i=[],n=a.get('logscale'),o=0,s,r,l,d,p,h;o<e.length;o++)s=e[o][0],l=e[o][t],n&&null!==l&&(0>=l[0]||0>=l[1])&&(l=null),null===l?i.push([s,null,[null,null]]):(d=l[0],p=l[1],null===d||isNaN(d)?i.push([s,d,[d,p]]):(h=p?d/p:0,r=100*h,i.push([s,r,[d,p]])));return i},e.prototype.rollingAverage=function(e,t){t=Math.min(t,e.length);var a=[],n=0,o=0,s;for(s=0;s<e.length;s++){n+=e[s][2][0],o+=e[s][2][1],0<=s-t&&(n-=e[s-t][2][0],o-=e[s-t][2][1]);var i=e[s][0],r=o?n/o:0;a[s]=[i,100*r]}return a}}(),function(){'use strict';Dygraph.DataHandlers.BarsHandler=function(){Dygraph.DataHandler.call(this)},Dygraph.DataHandlers.BarsHandler.prototype=new Dygraph.DataHandler;var e=Dygraph.DataHandlers.BarsHandler;e.prototype.extractSeries=function(){},e.prototype.rollingAverage=function(){},e.prototype.onPointsCreated_=function(e,t){for(var a=0;a<e.length;++a){var i=e[a],n=t[a];n.y_top=NaN,n.y_bottom=NaN,n.yval_minus=Dygraph.DataHandler.parseFloat(i[2][0]),n.yval_plus=Dygraph.DataHandler.parseFloat(i[2][1])}},e.prototype.getExtremeYValues=function(e){for(var t=null,a=null,i=e.length-1,n=0,o;n<=i;n++)if(o=e[n][1],!(null===o||isNaN(o))){var s=e[n][2][0],r=e[n][2][1];s>o&&(s=o),r<o&&(r=o),(null===a||r>a)&&(a=r),(null===t||s<t)&&(t=s)}return[t,a]},e.prototype.onLineEvaluated=function(e,t,a){for(var i=0,n;i<e.length;i++)n=e[i],n.y_top=DygraphLayout.calcYNormal_(t,n.yval_minus,a),n.y_bottom=DygraphLayout.calcYNormal_(t,n.yval_plus,a)}}(),function(){'use strict';Dygraph.DataHandlers.CustomBarsHandler=function(){};var e=Dygraph.DataHandlers.CustomBarsHandler;e.prototype=new Dygraph.DataHandlers.BarsHandler,e.prototype.extractSeries=function(e,t,a){for(var i=[],n=a.get('logscale'),o=0,s,r,l;o<e.length;o++)s=e[o][0],l=e[o][t],n&&null!==l&&(0>=l[0]||0>=l[1]||0>=l[2])&&(l=null),null===l?i.push([s,null,[null,null]]):(r=l[1],null===r||isNaN(r)?i.push([s,r,[r,r]]):i.push([s,r,[l[0],l[2]]]));return i},e.prototype.rollingAverage=function(e,t){t=Math.min(t,e.length);var a=[],n,o,s,r,l,d,i;for(o=0,r=0,s=0,l=0,d=0;d<e.length;d++){if(n=e[d][1],i=e[d][2],a[d]=e[d],null===n||isNaN(n)||(o+=i[0],r+=n,s+=i[1],l+=1),0<=d-t){var p=e[d-t];null===p[1]||isNaN(p[1])||(o-=p[2][0],r-=p[1],s-=p[2][1],l-=1)}a[d]=l?[e[d][0],1*r/l,[1*o/l,1*s/l]]:[e[d][0],null,[null,null]]}return a}}(),function(){'use strict';Dygraph.DataHandlers.ErrorBarsHandler=function(){};var e=Dygraph.DataHandlers.ErrorBarsHandler;e.prototype=new Dygraph.DataHandlers.BarsHandler,e.prototype.extractSeries=function(e,t,a){for(var i=[],n=a.get('sigma'),o=a.get('logscale'),s=0,r,l,d,p;s<e.length;s++)r=e[s][0],p=e[s][t],o&&null!==p&&(0>=p[0]||0>=p[0]-n*p[1])&&(p=null),null===p?i.push([r,null,[null,null,null]]):(l=p[0],null===l||isNaN(l)?i.push([r,l,[l,l,l]]):(d=n*p[1],i.push([r,l,[l-d,l+d,p[1]]])));return i},e.prototype.rollingAverage=function(e,t,a){t=Math.min(t,e.length);var n=[],o=a.get('sigma'),s,i,r,l,d,p,h,g,c;for(s=0;s<e.length;s++){for(d=0,g=0,p=0,i=Math.max(0,s-t+1);i<s+1;i++)r=e[i][1],null===r||isNaN(r)||(p++,d+=r,g+=Math.pow(e[i][2][2],2));p?(h=Math.sqrt(g)/p,c=d/p,n[s]=[e[s][0],c,[c-o*h,c+o*h]]):(l=1==t?e[s][1]:null,n[s]=[e[s][0],l,[l,l]])}return n}}(),function(){'use strict';var e=Math.sqrt;Dygraph.DataHandlers.FractionsBarsHandler=function(){};var t=Dygraph.DataHandlers.FractionsBarsHandler;t.prototype=new Dygraph.DataHandlers.BarsHandler,t.prototype.extractSeries=function(t,a,i){for(var n=[],o=100,s=i.get('sigma'),r=i.get('logscale'),l=0,d,p,h,g,c,u,y,_;l<t.length;l++)d=t[l][0],h=t[l][a],r&&null!==h&&(0>=h[0]||0>=h[1])&&(h=null),null===h?n.push([d,null,[null,null,null,null]]):(g=h[0],c=h[1],null===g||isNaN(g)?n.push([d,g,[g,g,g,c]]):(u=c?g/c:0,y=c?s*e(u*(1-u)/c):1,_=o*y,p=o*u,n.push([d,p,[p-_,p+_,g,c]])));return n},t.prototype.rollingAverage=function(t,a,o){a=Math.min(a,t.length);var s=[],r=o.get('sigma'),l=o.get('wilsonInterval'),d=0,h=0,g=100,c,u,y,i;for(y=0;y<t.length;y++){d+=t[y][2][2],h+=t[y][2][3],0<=y-a&&(d-=t[y-a][2][2],h-=t[y-a][2][3]);var _=t[y][0],x=h?d/h:0;if(!l)i=h?r*e(x*(1-x)/h):1,s[y]=[_,g*x,[g*(x-i),g*(x+i)]];else if(h){var f=0>x?0:x,p=h,n=r*e(f*(1-f)/p+r*r/(4*p*p)),m=1+r*r/h;c=(f+r*r/(2*h)-n)/m,u=(f+r*r/(2*h)+n)/m,s[y]=[_,f*g,[c*g,u*g]]}else s[y]=[_,0,[0,0]]}return s}}();</script><script type="text/javascript">var smoothPlotter=function(){"use strict";function a(a,b,c,d,e){var f=Math.min,g=Math.max,h=void 0===d?1/3:d;if(!c)return[b.x,b.y,null,null];var i=(1-h)*b.x+h*a.x,j=(1-h)*b.y+h*a.y,k=(1-h)*b.x+h*c.x,l=(1-h)*b.y+h*c.y;if(i!=k){var m=b.y-l-(b.x-k)*(j-l)/(i-k);j+=m,l+=m}return e||!1||(j>a.y&&j>b.y?(j=g(a.y,b.y),l=2*b.y-j):j<a.y&&j<b.y&&(j=f(a.y,b.y),l=2*b.y-j),l>b.y&&l>c.y?(l=g(b.y,c.y),j=2*b.y-l):l<b.y&&l<c.y&&(l=f(b.y,c.y),j=2*b.y-l)),[i,j,k,l]}function b(c){var d=c.drawingContext,e=c.points;d.beginPath(),d.moveTo(e[0].canvasx,e[0].canvasy);for(var f=e[0].canvasx,g=e[0].canvasy,h=Dygraph.isOK,j=1;j<e.length;j++){var i=e[j-1],k=e[j],l=e[j+1];if(i=i&&h(i.canvasy)?i:null,k=k&&h(k.canvasy)?k:null,l=l&&h(l.canvasy)?l:null,i&&k){var m=a({x:i.canvasx,y:i.canvasy},{x:k.canvasx,y:k.canvasy},l&&{x:l.canvasx,y:l.canvasy},b.smoothing);f=null===f?i.canvasx:f,g=null===g?i.canvasy:g,d.bezierCurveTo(f,g,m[0],m[1],k.canvasx,k.canvasy),f=m[2],g=m[3]}else k?(d.moveTo(k.canvasx,k.canvasy),f=k.canvasx,g=k.canvasy):f=g=null}d.stroke()}return b.smoothing=1/3,b._getControlPoints=a,b}();</script><dom-module id="warp10-display-chart" assetpath="../warp10-quantumviz/"><template><style>:host{display:block;width:var(--default-width, 100%);height:var(--default-height, 100%);position:relative;}#chart{width:100%;height:100%;position:relative;}.chart-tooltip{position:absolute;width:var(--tooltip-width, 400px);height:auto;padding:10px;background-color:rgba(255, 255, 255, 0.85);border-radius:10px;box-shadow:4px 4px 10px rgba(0, 0, 0, 0.4);pointer-events:none;z-index:1000;font-family:sans-serif;line-height:20px;}.chart-tooltip.hidden{display:none;}.tr.highligh{background-color:#ffffa4;}.gts-classname,
      :host ::slotted(.gts-classname){color:#0074D9;}.gts-labelname,
      :host ::slotted(.gts-labelname){color:#3d9970;}.gts-separator{color:#bbbbbb;}.gts-labelvalue{color:#AAAAAA;font-style:italic;}.legend-color-guide .tr{display:flex;flex-direction:column;justify-content:center;}.legend-color-guide div{width:10px;height:10px;border-radius:5px;margin-right:5px;margin-top:5px;}.chart-tooltip .table{display:table;width:100%;white-space:normal;font-size:10pt !important;}.chart-tooltip .tr{display:flex;flex-direction:row;justify-content:center;}.chart-tooltip .key{text-align:left;padding-right:10px;word-wrap:break-word;word-break:break-word;width:calc(var(--tooltip-width, 400px) - 50px);}.chart-tooltip .value{text-align:right;}</style><div class$="chart-tooltip {{_isTooltipHidden(tooltip)}}"></div><div id="chart"></div><granite-js-dependencies-grabber id="granite-js-dependencies-grabber-demo" dependencies="[[_dependencies]]" on-dependency-is-ready="_onDependencyReady" debug="[[debug]]"></granite-js-dependencies-grabber></template><script>class Warp10DisplayDyChart extends Warp10DisplayMixin(Polymer.Element){static get is(){return'warp10-display-chart'}static get properties(){return{_dependencies:{type:Array,value:[{name:'d3',url:'../d3/d3.min.js'}]}}}static get observers(){return['dataChanged(data.*, timestamps, yLowerBound, yUpperBound)']}connectedCallback(){if(super.connectedCallback(),this._isAttached=!0,this.timezone&&''!==this.timezone){this.debug&&console.log('[warp10-display-chart] attached - Go grab the dependencies!',this.timezone);let a=Promise.resolve();a.then(this._getDependency(this._getDependencyPromiseResolve('moment',`${this.importPath}../moment/moment.js`))).then(this._getDependency(this._getDependencyPromiseResolve('moment.tz',`${this.importPath}../moment-timezone/builds/moment-timezone-with-data.min.js`))).then(this.domReady.bind(this))}else this.domReady.bind(this);this.debug&&console.log('[warp10-display-chart] attached',{width:this.width,height:this.height})}domReady(){this.chart&&this._resizeChart&&(this.debug&&console.log('[warp10-display-chart] attached - dimensionsChanged, resizing'),this.configure(),this.chart.resize()),this.chart&&this.chart.resize()}_getDependency(a){return this.debug&&console.log('[warp10-display-chart] _getDependency'),()=>new Promise(a)}_getDependencyPromiseResolve(a,b){return(c)=>{console.log('[leaflet-core] _getDependencyPromiseResolve',a,b),this._windowHasObject(a)?(this.dispatchEvent(new CustomEvent('dependency-is-ready',{detail:{name:a,url:b}})),c()):window[`_downloading_${a}`]?this._waitToLoadDependency(a,b,c):(window[`_downloading_${a}`]=!0,this._loadDependency(a,b,c))}}_loadDependency(a,b,c){let d=document.createElement('script');d.src=this.resolveUrl(b),d.onload=()=>{this._waitToLoadDependency(a,b,c)},document.head.appendChild(d)}_waitToLoadDependency(a,b,c){this._windowHasObject(a)?(this.dispatchEvent(new CustomEvent('dependency-is-ready',{detail:{name:a,url:b}})),c()):window.setTimeout(()=>{this._waitToLoadDependency(a,b,c)},5)}_windowHasObject(a){let b=a.split('.'),c='window';for(let d in b)if(b[d]&&(c+=`.${b[d]}`,void 0===eval(c)))return!1;return!0}dimensionsChanged(){this.isReady&&(this.debug&&console.log('[warp10-display-chart] dimensionsChanged'),this._resizeChart=!0)}currentValuesChanged(){null!==this.isReady&&(this.debug&&console.log('[warp10-display-chart] currentValuesChanged() - currentValues',this.currentValues),this._tooltipContent())}tooltipChanged(a,b){this.debug&&console.log('[warp10-display-chart] tooltipChanged - oldValue',a),this.debug&&console.log('[warp10-display-chart] tooltipChanged - newValue',b),null===this.tooltip||''===this.tooltip?this.root.querySelector('.chart-tooltip').innerHTML=this.tooltip:(this.debug&&console.log('[warp10-display-chart] tooltipChanged',this.tooltip),this.root.querySelector('.chart-tooltip').innerHTML=this.tooltip)}_isTooltipHidden(){return null===this.tooltip||''===this.tooltip?(this.debug&&console.log('[warp10-display-chart] _isTooltipHidden - true'),'hidden'):(this.debug&&console.log('[warp10-display-chart] _isTooltipHidden - false'),'')}_removeChartData(){this.debug&&console.log('[warp10-display-chart] _removeChartData'),this.chart&&(this.chart.destroy(),this.chart=null,this.tooltip=null)}_updateChartData(){this.debug&&console.log('[warp10-display-chart] _updateChartData - begin',this.data),this._data2dygraphs(this.data),this.debug&&console.log('[warp10-display-chart] _updateChartData -end',this.data)}_tooltipContent(){if(this.hideTooltip)return;let a=this,b=this.currentValues,c=this.timestamps;if(null===b)return void(this.tooltip=null);let d=function(a){return`<span class='gts-value'>${+a.toFixed(4)}</span>`},e=function(b){return c?b:a.timezone&&''!==a.timezone?moment.tz(b,a.timezone).format('MM/DD/YYYY, kk:mm:ss.SSS'):d3.time.format.utc('%Y-%m-%dT%H:%M:%S.%LZ')(new Date(b))},f=function(b){a.debug&&console.log('[warp10-display-chart] keyFormatter ',b);let c=b.split(/\{[^}]*\}/);a.debug&&console.log('[warp10-display-chart] keyFormatter ',c);let d,e=[],f=/\{([^}]*)\}/g;for(;null!==(d=f.exec(b));)e.push(d[1]);a.debug&&console.log('[warp10-display-chart] keyFormatter ',e,e.length);let g='';for(let a in c)if(c.hasOwnProperty(a)&&(g+=`<span class='gts-classname'>${c[a]}</span>`,e.length>a)){g+=`<span class='gts-separator'>{</span>`;let b=[];e[a].split(',').forEach(function(a){let c=a.split('='),d=`<span class='gts-labelname'>${c[0]}</span>`;1<c.length&&(d+=`<span class='gts-separator'>=</span><span class='gts-labelvalue'>${c[1]}</span>`),b.push(d)}),g+=`${b.join(`<span class='gts-separator'>,</span>`)}<span class='gts-separator'>}</span>`}return console.debug('[warp10-display-chart] keyFormatter ',g),g},g=d3.select(document.createElement('div'));g.classed('table');{let a=g.selectAll('div.thead').data([b]).enter().append('div').classed('thead',!0);a.append('div').classed('tr',!0).append('div').classed('td',!0).attr('colspan',3).append('strong').classed('x-value',!0).html(e(b.xValue))}let h=g.selectAll('div.tbody').data([b]).enter().append('div').classed('tbody',!0),i=h.selectAll('div.tr').data(b.yValues).enter().append('div').classed('tr',!0).classed('highlight',function(b){return a.debug&&console.log('[warp10-display-chart] hightlight',b),b.highlight});i.append('div').classed('td',!0).classed('legend-color-guide',!0).append('div').style('background-color',function(a){return a.color}),i.append('div').classed('td',!0).classed('key',!0).html(function(a,b){return f(a.name,b)}),i.append('div').classed('td',!0).classed('value',!0).html(function(a,b){return d(a.yval,b)}),i.selectAll('div.td').each(function(b){if(b.highlight){let c=d3.scale.linear().domain([0,1]).range(['#fff',b.color]),d=0.6;d3.select(a).style('border-bottom-color',c(d)).style('border-top-color',c(d))}});let j=g.node().outerHTML;void 0!==b.footer&&(j+=`<div class='footer'>${b.footer}</div>`),console.debug('[warp10-display-chart] _tooltipContent - html',j),this.debug&&(console.log('[warp10-display-chart] _tooltipContent - window.innerWidth',window.innerWidth),console.log('[warp10-display-chart] _tooltipContent - chart width',this.root.querySelector('#chart').style.width),console.log('[warp10-display-chart] _tooltipContent - chart getBoundingClientRect()',this.root.querySelector('#chart').getBoundingClientRect().width),console.log('[warp10-display-chart] _tooltipContent - chart getBoundingClientRect()',this.root.querySelector('#chart').getBoundingClientRect()),console.log('[warp10-display-chart] _tooltipContent - chart-tooltip getBoundingClientRect()',this.root.querySelector('.chart-tooltip').getBoundingClientRect().width));let k=window.innerWidth,l=this.$.chart.getBoundingClientRect().left,m=this.$.chart.getBoundingClientRect().width,n=this.currentValues.xCoord,o=this.currentValues.yCoord,p=this.root.querySelector('.chart-tooltip').getBoundingClientRect().width;if(this.debug&&console.log('[warp10-display-chart] tooltip',n,o),!(l+n+p+20>k)){this.root.querySelector('.chart-tooltip').style.left=n+20+'px',this.root.querySelector('.chart-tooltip').style.top=o-50+'px';let a={innerWidth:window.innerWidth,tooltip:this.root.querySelector('.chart-tooltip').getBoundingClientRect().width,xCoord:this.currentValues.xCoord,yCoord:this.currentValues.yCoord,sum:this.currentValues.xCoord+this.root.querySelector('.chart-tooltip').getBoundingClientRect().width+20,left:this.root.querySelector('.chart-tooltip').style.left,right:this.root.querySelector('.chart-tooltip').style.right,top:this.root.querySelector('.chart-tooltip').style.top,width:p};this.debug&&console.log('[warp10-display-chart] _tooltipContent - tooltip to the right',a)}else if(0>l+n-p-20){this.root.querySelector('.chart-tooltip').style.left=n-p/2+'px',this.root.querySelector('.chart-tooltip').style.right='auto',this.root.querySelector('.chart-tooltip').style.top=o+50+'px';let a={innerWidth:window.innerWidth,tooltip:this.root.querySelector('.chart-tooltip').getBoundingClientRect().width,xCoord:this.currentValues.xCoord,yCoord:this.currentValues.yCoord,sum:this.currentValues.xCoord+this.root.querySelector('.chart-tooltip').getBoundingClientRect().width+20,left:this.root.querySelector('.chart-tooltip').style.left,right:this.root.querySelector('.chart-tooltip').style.right,top:this.root.querySelector('.chart-tooltip').style.top};this.debug&&console.log('[warp10-display-chart] _tooltipContent - tooltip to center',a)}else{this.root.querySelector('.chart-tooltip').style.left='auto',this.root.querySelector('.chart-tooltip').style.right=m-n+20+'px',this.root.querySelector('.chart-tooltip').style.top=o-50+'px';let a={innerWidth:window.innerWidth,tooltip:this.root.querySelector('.chart-tooltip').getBoundingClientRect().width,xCoord:this.currentValues.xCoord,yCoord:this.currentValues.yCoord,sum:this.currentValues.xCoord+this.root.querySelector('.chart-tooltip').getBoundingClientRect().width+20,left:this.root.querySelector('.chart-tooltip').style.left,right:this.root.querySelector('.chart-tooltip').style.right,top:this.root.querySelector('.chart-tooltip').style.top};this.debug&&console.log('[warp10-display-chart] _tooltipContent - tooltip to the left',a)}this.tooltip=j,this.debug&&console.log('[warp10-display-chart] _tooltipContent',j)}_gts2dygraphs(a){let b=[];for(let c=0;c<a.length;c++)for(let d=0;d<a[c].v.length;d++)b.push(a[c].v[d][0]);b.sort(function(c,a){return c-a});let c=[b[0]];for(let d=1;d<b.length;d++)b[d]!==c[c.length-1]&&c.push(b[d]);let d=Array(c.length);for(let b=0;b<d.length;b++)d[b]=Array(a.length+1),d[b][0]=this.timestamps?c[b]:new Date(Math.floor(c[b]/1e3));for(let b=0;b<a.length;b++){let e=a[b].v.sort(function(c,a){return c[0]-a[0]}),f=0,g=0;for(;g<e.length&&f<c.length;){if(c[f]<e[g][0]){d[f][b+1]=null,f++;continue}if(c[f]===e[g][0]){d[f][b+1]=e[g][e[g].length-1],g++,f++;continue}g++}for(;f<c.length;)d[f][b+1]=null,f++}return d}_dataToChartLib(a){this.debug&&(console.log('[warp10-display-chart] _data2dygraphs - filteredResponse',a),console.log('[warp10-display-chart] _data2dygraphs - timezone',this.timezone));let b,c,d=this,e=this._gts2dygraphs(a.gts);for(let d=0;d<e.length;d++)for(let a=1;a<e[d].length;a++)!b&&e[d][a]&&(b=e[d][a]),!c&&e[d][a]&&(c=e[d][a]),e[d][a]>c&&e[d][a]&&(c=e[d][a]),e[d][a]<b&&e[d][a]&&(b=e[d][a]);this.debug&&(console.log('[warp10-display-chart] _data2dygraphs - sparklines',e),console.log('[warp10-display-chart] _data2dygraphs - timeBounds',this.timeBounds));let f=['X'].concat(this._params.labels),g={file:e,labels:f,labelsUTC:!0,connectSeparatedPoints:!0,maxNumberWidth:16,colors:this._params.colors,legend:'never',gridLineColor:'rgb(196, 196, 196)',xRangePad:5,yRangePad:5,dateWindow:[this.timeBounds.min,this.timeBounds.max],drawCallback:function(a){d.chartArea=a.getArea(),d.timeBounds={min:a.xAxisRange()[0],max:a.xAxisRange()[1]},d.valueBounds={min:a.yAxisRange()[0],max:a.yAxisRange()[1]}},valueRange:[Math.min(this.yLowerBound,b),Math.max(this.yUpperBound,c)]};if(this.hideAxis)g.drawAxis=!1,g.drawGrid=!1;else{if(this._params.xlabel&&(g.xlabel=this._params.xlabel),this._params.ylabel&&(g.ylabel=this._params.ylabel),g.axes={x:{drawAxis:!0,axisLabelFontSize:12,axisLineColor:'rgb(196, 196, 196)'},y:{drawAxis:!0,axisLabelFontSize:12,axisLabelFormatter:function(a){let b=a.toFixed(5),c=b.split('.'),d=c[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,'$1,'),e=c[1].replace(/0+$/g,'');return 0===e.length?d:d+'.'+e}}},this.timezone){let a=this;g.axes.x.axisLabelFormatter=function(b){console.log('[warp10-display-chart] _data2dygraphs - timezone 2',a.timezone);let c=moment.tz(b,a.timezone),d=c.format('DD/MM')+'\n'+c.format('HH:mm');return d}}console.log('[warp10-display-chart] _data2dygraphs - timezone 3',g),'object'===typeof this._params.tickList&&(this.timestamps?g.axes.x.ticker=()=>Object.entries(this._params.tickList).map(([a,b])=>({v:parseInt(a),label:b})):(g.axes.x.axisLabelWidth=100,g.axes.x.ticker=()=>Object.entries(this._params.tickList).map(([a,b])=>({v:new Date(parseInt(a)/1e3),label:b})))),Array.isArray(this._params.tickList)&&(this.timestamps?g.axes.x.ticker=()=>this._params.tickList.map((a)=>({v:a,label:a})):(g.axes.x.axisLabelWidth=100,g.axes.x.ticker=()=>this._params.tickList.map((a)=>this.timezone?{v:new Date(a/1e3),label:moment.tz(a/1e3,this.timezone).format('YYYY-MM-DD, kk:mm:ss.SSS')}:{v:new Date(a/1e3),label:d3.time.format.utc('%Y-%m-%d %H:%M:%S')(new Date(a/1e3))})))}g.highlightCallback=function(a,b,c,e,f){this.debug&&console.log('[warp10-display-chart] highlightCallback',{event:a,name:f,x:b,points:c,row:e,xCoord:d.chart.toDomXCoord(b)});for(let g,h=0;h<c.length;h++)g=d._params.labels.indexOf(c[h].name),0<=g&&(c[h].color=d._params.colors[g]),this.debug&&console.log('[warp10-display-chart] color',c[h].color),c[h].color=d.chart.colors_[h],c[h].highlight=f===c[h].name;this.debug&&console.log('[warp10-display-chart] highlightCallback - points',c),d.currentValues={xValue:b,yValues:c,xCoord:d.chart.toDomXCoord(b),yCoord:a.layerY}},g.unhighlightCallback=function(){this.debug&&console.log('[warp10-display-chart] unhighlightCallback'),d.currentValues=null},g.interactionModel={mouseout:()=>{this.debug&&console.log('[warp10-display-chart] interactionModel mouseout'),d.currentValues=null}},this.hideTooltip||(g.highlightCircleSize=d.lineWidth+3,g.highlightSeriesOpts={strokeWidth:d.lineWidth+1,strokeBorderWidth:1,highlightCircleSize:d.lineWidth+3}),g.series={};for(let b=0;b<this._params.labels.length;b++)switch(g.series[this._params.labels[b]]={strokeWidth:this._params.strokeWidth[b]},this._params.interpolate[b]){case'cardinal':g.series[this._params.labels[b]].plotter=smoothPlotter,g.series[this._params.labels[b]].stepPlot=!1;break;case'step':case'step-after':case'step-before':g.series[this._params.labels[b]].plotter=Dygraph.Plotters.linePlotter,g.series[this._params.labels[b]].stepPlot=!0;break;case'line':case'linear':default:g.series[this._params.labels[b]].plotter=Dygraph.Plotters.linePlotter,g.series[this._params.labels[b]].stepPlot=!1;}this.debug&&console.log('[warp10-display-chart] _data2dygraphs - options',g),this.chart?this.chart.updateOptions(g):(this.debug&&console.log('[warp10-display-chart] _data2dygraphs - typeof this.$.chart',typeof this.$.chart),this.chart=new Dygraph(this.$.chart,e,g),this.debug&&console.log('[warp10-display-chart] _data2dygraphs - chart',this.chart),this.chart.maindiv_=this.$.chart,this.debug&&console.log('[warp10-display-chart] _data2dygraphs - chart',this.chart)),this.debug&&console.log('[warp10-display-chart] _data2dygraphs - chart',this.chart)}getChart(){return this.$.chart}}window.customElements.define(Warp10DisplayDyChart.is,Warp10DisplayDyChart);</script></dom-module><script>(function(){let a={};a.BASE_RADIUS=10,a.getBoundsArray=function(a,b,c){let d=[];for(let e=0;e<a.length;e++)for(let b=0;b<a[e].path.length;b++)d.push([parseFloat(a[e].path[b].lat),a[e].path[b].lon]);for(let e=0;e<b.length;e++)for(let a=0;a<b[e].positions.length;a++)d.push([b[e].positions[a][0],b[e].positions[a][1]]);for(let e=0;e<c.length;e++)for(let a=0;a<c[e].path.length;a++)d.push([c[e].path[a].lat,c[e].path[a].lon]);if(1===d.length)return d;let e=90,f=-180,g=-90,h=180;return d.forEach((a)=>{a[0]>g&&(g=a[0]),a[0]<e&&(e=a[0]),a[1]>f&&(f=a[1]),a[1]<h&&(h=a[1])}),[[e,f],[g,h]]},a.pathDataToLeaflet=function(a,b){let c=[],d=b===void 0||b.from===void 0||0>b.from?0:b.from,e=b===void 0||b.to===void 0||b.to>=a.length?a.length-1:b.to;for(let f=d;f<=e;f++)c.push([a[f].lat,a[f].lon]);return c},a.toLeafletMapPositionArray=function(b){if(this.debug&&console.debug('[warp10-display-map-tools] toLeafletMapPositionArray',b,quantumvizGts.isValidResponse(b)),!quantumvizGts.isValidResponse(b))return!1;let c=b[0],d=[];for(let e=0;e<c.gts.length;e++)if(this.debug&&console.debug('[quantumviz-tools] toLeafletMapPositionArray - response.gts[i]',gtsTools.isPositionArray(c.gts[e]),c.gts[e]),gtsTools.isPositionArray(c.gts[e])){let b=c.gts[e],f=c.params[e];a.extractCommonParameters(b,f,e),void 0!==f.render&&(b.render=f.render),'weightedDots'===b.render&&a.validateWeightedDotsPositionArray(b,f),'coloredWeightedDots'===b.render&&a.validateWeightedColoredDotsPositionArray(b,f),this.debug&&console.debug('[quantumviz-tools] toLeafletMapPositionArray - posArray',b),d.push(b)}return d},a.extractCommonParameters=function(b,c,d){c.key!==void 0&&(b.key=c.key),b.color=void 0===c.color?warp10ColorTools.getColor(d):c.color,b.borderColor=void 0===c.borderColor?'#000':c.borderColor,b.baseRadius=void 0===c.baseRadius||isNaN(parseInt(c.baseRadius))||0>parseInt(c.baseRadius)?a.BASE_RADIUS:c.baseRadius},a.toLeafletMapPaths=function(a){if(this.debug&&console.debug('[warp10-display-map-tools] toLeafletMapPaths',a,quantumvizGts.isValidResponse(a)),!quantumvizGts.isValidResponse(a))return!1;let b=a[0],c=[];for(let d=0;d<b.gts.length;d++)if(gtsTools.isGtsToPlot(b.gts[d])){let a={};a.path=gtsTools.gtsToPath(b.gts[d]),void 0!==b.params[d].key&&(a.key=b.params[d].key),a.color=void 0===b.params[d].color?warp10ColorTools.getColor(d):b.params[d].color,this.debug&&console.debug('[quantumviz-tools] toLeafletMapPaths - color',a.color),c.push(a)}return c},a.annotationsToLeafletPositions=function(b){if(this.debug&&console.debug('[warp10-display-map-tools] annotationsToLeafletPositions',b,quantumvizGts.isValidResponse(b)),!quantumvizGts.isValidResponse(b))return!1;let c=b[0],d=[];for(let e=0;e<c.gts.length;e++)if(gtsTools.isGtsToAnnotate(c.gts[e])){let b={},f=c.params[e];b.path=gtsTools.gtsToPath(c.gts[e]),a.extractCommonParameters(b,f,e),void 0!==f.render&&(b.render=f.render),'marker'===b.render&&(f.marker?b.marker=f.marker:b.marker='circle'),'weightedDots'===b.render&&a.validateWeightedDotsPositionArray(b,f),d.push(b)}return this.debug&&console.debug('[quantumviz-tools] annotationsToLeafletPositions',d),d},a.validateWeightedDotsPositionArray=function(a,b){if(void 0===b.minValue||void 0===b.maxValue)return console.error('[quantumviz-tools] validateWeightedDotsPositionArray() - When using \'weightedDots\' or \'weightedColoredDots\' rendering, \'maxValue\' and \'minValue\' parameters are compulsory'),void(a.render=void 0);if(a.maxValue=b.maxValue,a.minValue=b.minValue,'number'!==typeof a.minValue||'number'!==typeof a.maxValue||a.minValue>=a.maxValue)return console.error('[quantumviz-tools] validateWeightedDotsPositionArray() - When using \'weightedDots\' or \'weightedColoredDots\' rendering, \'maxValue\' and \'minValue\' must be numbers and \'maxValue\' must be greater than \'minValue\''),void(a.render=void 0);if(!gtsTools.isPositionsArrayWithValues(a)&&!gtsTools.isPositionsArrayWithTwoValues(a))return console.error('[quantumviz-tools] validateWeightedDotsPositionArray() - When using \'weightedDots\' or \'weightedColoredDots\' rendering, positions must have an associated value'),void(a.render=void 0);a.numSteps=void 0===b.numSteps||isNaN(parseInt(b.numSteps))||0>parseInt(b.numSteps)?5:b.numSteps;let c=(a.maxValue-a.minValue)/a.numSteps,d=[];for(let e=0;e<a.numSteps-1;e++)d[e]=a.minValue+(e+1)*c;return d[a.numSteps-1]=a.maxValue,this.debug&&console.debug('[quantumviz-tools] validateWeightedDotsPositionArray() - steps',d),a.positions.forEach((b)=>{let c=b[2];for(let e in b[4]=a.numSteps-1,d)if(c<=d[e]){b[4]=e;break}}),!0},a.validateWeightedColoredDotsPositionArray=function(b,c){if(!a.validateWeightedDotsPositionArray(b,c))return;if(void 0===c.minColorValue||void 0===c.maxColorValue||void 0===c.startColor||void 0===c.endColor)return console.error('[quantumviz-tools] validateWeightedColoredDotsPositionArray() - When using \'weightedColoredDots\' rendering, \'maxColorValue\', \'minColorValue\', \'startColor\' and \'endColor\' parameters are compulsory'),void(b.render=void 0);if(b.maxColorValue=c.maxColorValue,b.minColorValue=c.minColorValue,c.startColor,c.endColor,'number'!==typeof b.minColorValue||'number'!==typeof b.maxColorValue||b.minColorValue>=b.maxColorValue)return console.error('[quantumviz-tools] validateWeightedColoredDotsPositionArray() - When using weightedColoredDots\' rendering, \'maxColorValue\' and \'minColorValue\' must be numbers and \'maxColorValue\' must be greater than \'minColorValue\'',{maxColorValue:b.maxColorValue,minColorValue:b.minColorValue}),void(b.render=void 0);let d=/^#(?:[0-9a-f]{3}){1,2}$/i;if('string'!==typeof c.startColor||'string'!==typeof c.endColor||!d.test(c.startColor)||!d.test(c.endColor))return console.error('[quantumviz-tools] validateWeightedColoredDotsPositionArray() - When using weightedColoredDots\' rendering, \'startColor\' and \'endColor\' parameters must be RGB colors in #rrggbb format',{startColor:c.startColor,endColor:c.endColor,tests:[typeof c.startColor,typeof c.endColor,d.test(c.startColor),d.test(c.endColor),d.test(c.startColor)]}),void(b.render=void 0);b.startColor={r:parseInt(c.startColor.substring(1,3),16),g:parseInt(c.startColor.substring(3,5),16),b:parseInt(c.startColor.substring(5,7),16)},b.endColor={r:parseInt(c.endColor.substring(1,3),16),g:parseInt(c.endColor.substring(3,5),16),b:parseInt(c.endColor.substring(5,7),16)},b.numColorSteps=void 0===c.numColorSteps||isNaN(parseInt(c.numColorSteps))||0>parseInt(c.numColorSteps)?5:c.numColorSteps,b.colorGradient=warp10ColorTools.hsvGradientFromRgbColors(b.startColor,b.endColor,b.numColorSteps),this.debug&&console.debug('[quantumviz-tools] validateWeightedColoredDotsPositionArray',b);let e=(b.maxColorValue-b.minColorValue)/b.numColorSteps,f=[];for(let a=0;a<b.numColorSteps;a++)f[a]=b.minColorValue+(a+1)*e;b.steps=f,b.positions.forEach((a,c)=>{let d=a[3];a[5]=b.numColorSteps-1;for(let b=0;b<f.length-1;b++)if(d<f[b]){a[5]=b;break}this.debug&&console.debug('[quantumviz-tools] validateWeightedColoredDotsPositionArray',{j:c,position:a,steps:f,stepAssociatedToValue:a[5]})})},window.warp10DisplayMapTools=a})();</script><script type="text/javascript">!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.L={})}(this,function(Ee){"use strict";function eo(a){var t,i,e,n;for(i=1,e=arguments.length;i<e;i++)for(t in n=arguments[i],n)a[t]=n[t];return a}function to(o,t){var a=Array.prototype.slice;if(o.bind)return o.bind.apply(o,a.call(arguments,1));var i=a.call(arguments,2);return function(){return o.apply(t,i.length?i.concat(a.call(arguments)):arguments)}}function oo(e){return e._leaflet_id=e._leaflet_id||++Xn,e._leaflet_id}function no(a,t,i){var e,n,l,s;return s=function(){e=!1,n&&(l.apply(i,n),n=!1)},l=function(){e?n=arguments:(a.apply(i,arguments),setTimeout(s,t),e=!0)}}function ao(a,t,i){var e=t[1],n=t[0],o=e-n;return a===e&&i?a:((a-n)%o+o)%o+n}function io(){return!1}function ro(o,t){var n=qn(10,void 0===t?6:t);return Gn(o*n)/n}function so(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function lo(e){return so(e).split(/\s+/)}function _o(o,t){for(var n in o.hasOwnProperty("options")||(o.options=o.options?Yn(o.options):{}),t)o.options[n]=t[n];return o.options}function po(a,t,i){var e=[];for(var n in a)e.push(encodeURIComponent(i?n.toUpperCase():n)+"="+encodeURIComponent(a[n]));return(t&&-1!==t.indexOf("?")?"&":"?")+e.join("&")}function mo(e,o){return e.replace(Jn,function(a,t){var e=o[t];if(void 0===e)throw new Error("No value provided for variable "+a);return"function"==typeof e&&(e=e(o)),e})}function t(o,t){for(var n=0;n<o.length;n++)if(o[n]===t)return n;return-1}function co(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}function p(o){var t=+new Date,n=Vn(0,16-(t-ea));return ea=t+n,window.setTimeout(o,n)}function uo(e,t,o){return o&&ta===p?void e.call(t):ta.call(window,to(e,t))}function m(e){e&&oa.call(window,e)}function go(){}function v(e){if("undefined"!=typeof L&&L&&L.Mixin){e=Qn(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}function y(o,t,n){this.x=n?Gn(o):o,this.y=n?Gn(t):t}function x(o,n,a){return o instanceof y?o:Qn(o)?new y(o[0],o[1]):void 0===o||null===o?o:"object"==typeof o&&"x"in o&&"y"in o?new y(o.x,o.y):new y(o,n,a)}function w(a,t){if(a)for(var i=t?[a,t]:a,e=0,n=i.length;e<n;e++)this.extend(i[e])}function P(e,o){return!e||e instanceof w?e:new w(e,o)}function b(a,t){if(a)for(var i=t?[a,t]:a,e=0,n=i.length;e<n;e++)this.extend(i[e])}function T(e,t){return e instanceof b?e:new b(e,t)}function z(o,n,a){if(isNaN(o)||isNaN(n))throw new Error("Invalid LatLng object: ("+o+", "+n+")");this.lat=+o,this.lng=+n,void 0!==a&&(this.alt=+a)}function M(o,n,a){return o instanceof z?o:Qn(o)&&"object"!=typeof o[0]?3===o.length?new z(o[0],o[1],o[2]):2===o.length?new z(o[0],o[1]):null:void 0===o||null===o?o:"object"==typeof o&&"lat"in o?new z(o.lat,"lng"in o?o.lng:o.lon,o.alt):void 0===n?null:new z(o,n,a)}function C(o,t,a,e){return Qn(o)?(this._a=o[0],this._b=o[1],this._c=o[2],void(this._d=o[3])):void(this._a=o,this._b=t,this._c=a,this._d=e)}function Z(o,t,a,e){return new C(o,t,a,e)}function S(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function E(l,t){var i,e,n,o,s,r,a="";for(i=0,n=l.length;i<n;i++){for(e=0,o=(s=l[i]).length;e<o;e++)r=s[e],a+=(e?"L":"M")+r.x+" "+r.y;a+=t?Fa?"z":"x":""}return a||"M0 0"}function k(e){return 0<=navigator.userAgent.toLowerCase().indexOf(e)}function I(o,t,a,e){return"touchstart"===t?B(o,a,e):"touchmove"===t?j(o,a,e):"touchend"===t&&W(o,a,e),this}function A(o,t,a){var e=o["_leaflet_"+t+a];return"touchstart"===t?o.removeEventListener(Ga,e,!1):"touchmove"===t?o.removeEventListener(qa,e,!1):"touchend"===t&&(o.removeEventListener(te,e,!1),o.removeEventListener(ie,e,!1)),this}function B(e,a,t){var n=to(function(e){if("mouse"!==e.pointerType&&e.MSPOINTER_TYPE_MOUSE&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE){if(!(0>ee.indexOf(e.target.tagName)))return;Po(e)}N(e,a)});e["_leaflet_touchstart"+t]=n,e.addEventListener(Ga,n,!1),oe||(document.documentElement.addEventListener(Ga,O,!0),document.documentElement.addEventListener(qa,R,!0),document.documentElement.addEventListener(te,D,!0),document.documentElement.addEventListener(ie,D,!0),oe=!0)}function O(e){ne[e.pointerId]=e,se++}function R(e){ne[e.pointerId]&&(ne[e.pointerId]=e)}function D(e){delete ne[e.pointerId],se--}function N(o,t){for(var n in o.touches=[],ne)o.touches.push(ne[n]);o.changedTouches=[o],t(o)}function j(o,a,t){var e=function(e){(e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&"mouse"!==e.pointerType||0!==e.buttons)&&N(e,a)};o["_leaflet_touchmove"+t]=e,o.addEventListener(qa,e,!1)}function W(o,a,t){var e=function(e){N(e,a)};o["_leaflet_touchend"+t]=e,o.addEventListener(te,e,!1),o.addEventListener(ie,e,!1)}function H(l,_,t){function e(a){var t;if(Da){if(!va||"mouse"===a.pointerType)return;t=se}else t=a.touches.length;if(!(1<t)){var l=Date.now(),e=l-(i||l);s=a.touches?a.touches[0]:a,r=0<e&&e<=o,i=l}}function n(a){if(r&&!s.cancelBubble){if(Da){if(!va||"mouse"===a.pointerType)return;var t,e,n={};for(e in s)t=s[e],n[e]=t&&t.bind?t.bind(s):t;s=n}s.type="dblclick",_(s),i=null}}var i,s,r=!1,o=250;return l[he+re+t]=e,l[he+ae+t]=n,l[he+"dblclick"+t]=_,l.addEventListener(re,e,!1),l.addEventListener(ae,n,!1),l.addEventListener("dblclick",_,!1),this}function yo(a,t){var i=a[he+re+t],e=a[he+ae+t],n=a[he+"dblclick"+t];return a.removeEventListener(re,i,!1),a.removeEventListener(ae,e,!1),va||a.removeEventListener("dblclick",n,!1),this}function ho(a,t,l,e){if("object"==typeof t)for(var n in t)vo(a,n,t[n],l);else for(var o=0,s=(t=lo(t)).length;o<s;o++)vo(a,t[o],l,e);return this}function fo(l,t,_,e){if("object"==typeof t)for(var n in t)G(l,n,t[n],_);else if(t)for(var o=0,s=(t=lo(t)).length;o<s;o++)G(l,t[o],_,e);else{for(var r in l[ue])G(l,r,l[ue][r]);delete l[ue]}return this}function vo(n,t,l,e){var o=t+oo(l)+(e?"_"+oo(e):"");if(n[ue]&&n[ue][o])return this;var i=function(t){return l.call(e||n,t||window.event)},r=i;Da&&0===t.indexOf("touch")?I(n,t,i,o):!Na||"dblclick"!==t||!H||Da&&wa?"addEventListener"in n?"mousewheel"===t?n.addEventListener("onwheel"in n?"wheel":"mousewheel",i,!1):"mouseenter"===t||"mouseleave"===t?(i=function(e){e=e||window.event,Zo(n,e)&&r(e)},n.addEventListener("mouseenter"===t?"mouseover":"mouseout",i,!1)):("click"===t&&La&&(i=function(e){So(e,r)}),n.addEventListener(t,i,!1)):"attachEvent"in n&&n.attachEvent("on"+t,i):H(n,i,o),n[ue]=n[ue]||{},n[ue][o]=i}function G(n,t,a,e){var o=t+oo(a)+(e?"_"+oo(e):""),i=n[ue]&&n[ue][o];return i?void(Da&&0===t.indexOf("touch")?A(n,t,o):!Na||"dblclick"!==t||!yo||Da&&wa?"removeEventListener"in n?"mousewheel"===t?n.removeEventListener("onwheel"in n?"wheel":"mousewheel",i,!1):n.removeEventListener("mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,i,!1):"detachEvent"in n&&n.detachEvent("on"+t,i):yo(n,o),n[ue][o]=null):this}function K(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,Co(e),this}function xo(e){return vo(e,"mousewheel",K),this}function Lo(e){return ho(e,"mousedown touchstart dblclick",K),vo(e,"click",wo),this}function Po(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function bo(e){return Po(e),K(e),this}function To(a,t){if(!t)return new y(a.clientX,a.clientY);var r=t.getBoundingClientRect(),e=r.width/t.offsetWidth||1,n=r.height/t.offsetHeight||1;return new y(a.clientX/e-r.left-t.clientLeft,a.clientY/n-r.top-t.clientTop)}function zo(e){return va?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/le:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&32765>Un(e.detail)?20*-e.detail:e.detail?60*(e.detail/-32765):0}function wo(e){ce[e.type]=!0}function Co(e){var t=ce[e.type];return ce[e.type]=!1,t}function Zo(o,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==o;)n=n.parentNode}catch(e){return!1}return n!==o}function So(o,t){var a=o.timeStamp||o.originalEvent&&o.originalEvent.timeStamp,e=da&&a-da;e&&100<e&&500>e||o.target._simulatedClick&&!o._simulated?bo(o):(da=a,t(o))}function st(e){return"string"==typeof e?document.getElementById(e):e}function Eo(o,t){var a=o.style[t]||o.currentStyle&&o.currentStyle[t];if((!a||"auto"===a)&&document.defaultView){var i=document.defaultView.getComputedStyle(o,null);a=i?i[t]:null}return"auto"===a?null:a}function ko(o,t,a){var e=document.createElement(o);return e.className=t||"",a&&a.appendChild(e),e}function Bo(e){var t=e.parentNode;t&&t.removeChild(e)}function Ao(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Io(e){var t=e.parentNode;t.lastChild!==e&&t.appendChild(e)}function Oo(e){var t=e.parentNode;t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function Mo(o,t){if(void 0!==o.classList)return o.classList.contains(t);var n=jo(o);return 0<n.length&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function Ro(a,t){if(void 0!==a.classList)for(var i=lo(t),e=0,n=i.length;e<n;e++)a.classList.add(i[e]);else if(!Mo(a,t)){var o=jo(a);No(a,(o?o+" ":"")+t)}}function Do(e,t){void 0===e.classList?No(e,so((" "+jo(e)+" ").replace(" "+t+" "," "))):e.classList.remove(t)}function No(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function jo(e){return void 0===e.className.baseVal?e.className:e.className.baseVal}function Wo(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&Ho(e,t)}function Ho(o,t){var a=!1,e="DXImageTransform.Microsoft.Alpha";try{a=o.filters.item(e)}catch(e){if(1===t)return}t=Gn(100*t),a?(a.Enabled=100!==t,a.Opacity=t):o.style.filter+=" progid:"+e+"(opacity="+t+")"}function yt(o){for(var t=document.documentElement.style,n=0;n<o.length;n++)if(o[n]in t)return o[n];return!1}function Fo(o,t,a){var e=t||new y(0,0);o.style[de]=(Ba?"translate("+e.x+"px,"+e.y+"px)":"translate3d("+e.x+"px,"+e.y+"px,0)")+(a?" scale("+a+")":"")}function Uo(e,t){e._leaflet_pos=t,Oa?Fo(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function Vo(e){return e._leaflet_pos||new y(0,0)}function Go(){ho(window,"dragstart",Po)}function qo(){fo(window,"dragstart",Po)}function Ko(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(Yo(),ge=e,ve=e.style.outline,e.style.outline="none",ho(window,"keydown",Yo))}function Yo(){ge&&(ge.style.outline=ve,ge=void 0,ve=void 0,fo(window,"keydown",Yo))}function Xo(o,t){if(!t||!o.length)return o.slice();var n=t*t;return o=Et(o,n),o=Qo(o,n)}function Jo(o,t,n){return Fn(Ot(o,t,n,!0))}function Qo(a,t){var i=a.length,e=new(typeof Uint8Array=="undefined"?Array:Uint8Array)(i);e[0]=e[i-1]=1,St(a,e,t,0,i-1);var n,o=[];for(n=0;n<i;n++)e[n]&&o.push(a[n]);return o}function St(l,t,i,e,n){var o,s,r,a=0;for(s=e+1;s<=n-1;s++)(r=Ot(l[s],l[e],l[n],!0))>a&&(o=s,a=r);a>i&&(t[o]=1,St(l,t,i,e,o),St(l,t,i,o,n))}function Et(a,t){for(var i=[a[0]],e=1,n=0,o=a.length;e<o;e++)vn(a[e],a[n])>t&&(i.push(a[e]),n=e);return n<o-1&&i.push(a[o-1]),i}function kt(l,t,i,e,n){var o,s,r,a=e?Ze:sn(l,i),_=sn(t,i);for(Ze=_;;){if(!(a|_))return[l,t];if(a&_)return!1;r=sn(s=$o(l,t,o=a||_,i,n),i),o===a?(l=s,a=r):(t=s,_=r)}}function $o(_,t,i,e,n){var o,s,r=t.x-_.x,a=t.y-_.y,d=e.min,p=e.max;return 8&i?(o=_.x+r*(p.y-_.y)/a,s=p.y):4&i?(o=_.x+r*(d.y-_.y)/a,s=d.y):2&i?(o=p.x,s=_.y+a*(p.x-_.x)/r):1&i&&(o=d.x,s=_.y+a*(d.x-_.x)/r),new y(o,s,n)}function sn(o,t){var n=0;return o.x<t.min.x?n|=1:o.x>t.max.x&&(n|=2),o.y<t.min.y?n|=4:o.y>t.max.y&&(n|=8),n}function vn(o,t){var a=t.x-o.x,e=t.y-o.y;return a*a+e*e}function Ot(l,t,i,e){var n,o=t.x,s=t.y,r=i.x-o,a=i.y-s,_=r*r+a*a;return 0<_&&(1<(n=((l.x-o)*r+(l.y-s)*a)/_)?(o=i.x,s=i.y):0<n&&(o+=r*n,s+=a*n)),r=l.x-o,a=l.y-s,e?r*r+a*a:new y(o,s)}function Sn(e){return!Qn(e[0])||"object"!=typeof e[0][0]&&void 0!==e[0][0]}function En(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Sn(e)}function kn(d,t,i){var e,n,o,s,r,a,p,m,l,c=[1,4,2,8];for(n=0,p=d.length;n<p;n++)d[n]._code=sn(d[n],t);for(s=0;4>s;s++){for(m=c[s],e=[],n=0,o=(p=d.length)-1;n<p;o=n++)r=d[n],a=d[o],r._code&m?a._code&m||((l=$o(a,r,m,t,i))._code=sn(l,t),e.push(l)):(a._code&m&&((l=$o(a,r,m,t,i))._code=sn(l,t),e.push(l)),e.push(r));d=e}return d}function Bn(_,t){var i,e,n,o,s="Feature"===_.type?_.geometry:_,d=s?s.coordinates:null,p=[],m=t&&t.pointToLayer,u=t&&t.coordsToLatLng||Wt;if(!d&&!s)return null;switch(s.type){case"Point":return i=u(d),m?m(_,i):new Ye(i);case"MultiPoint":for(n=0,o=d.length;n<o;n++)i=u(d[n]),p.push(m?m(_,i):new Ye(i));return new Ve(p);case"LineString":case"MultiLineString":return e=Ht(d,"LineString"===s.type?0:1,u),new Qe(e,t);case"Polygon":case"MultiPolygon":return e=Ht(d,"Polygon"===s.type?1:2,u),new tn(e,t);case"GeometryCollection":for(n=0,o=s.geometries.length;n<o;n++){var l=Bn({geometry:s.geometries[n],type:"Feature",properties:_.properties},t);l&&p.push(l)}return new Ve(p);default:throw new Error("Invalid GeoJSON object.");}}function Wt(e){return new z(e[1],e[0],e[2])}function Ht(a,t,i){for(var e,n=[],o=0,s=a.length;o<s;o++)e=t?Ht(a[o],t-1,i):(i||Wt)(a[o]),n.push(e);return n}function Ft(e,t){return t="number"==typeof t?t:6,void 0===e.alt?[ro(e.lng,t),ro(e.lat,t)]:[ro(e.lng,t),ro(e.lat,t),ro(e.alt,t)]}function Ut(a,t,l,e){for(var n=[],o=0,s=a.length;o<s;o++)n.push(t?Ut(a[o],t-1,l,e):Ft(a[o],e));return!t&&l&&n.push(n[0]),n}function Vt(o,t){return o.feature?eo({},o.feature,{geometry:t}):qt(t)}function qt(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}function Gt(e,t){return new en(e,t)}function Kt(e,t){return new _n(e,t)}function Yt(e){return Ha?new mn(e):null}function Xt(e){return Fa||Ua?new yn(e):null}var Jt=Math.atan,An=Math.exp,In=Math.sin,On=Math.LN2,Rn=Math.log,Dn=Math.cos,Nn=Math.PI,jn=Math.min,Wn=Math.ceil,Hn=Math.floor,Fn=Math.sqrt,Un=Math.abs,Vn=Math.max,Gn=Math.round,qn=Math.pow,Kn=Object.freeze;Object.freeze=function(e){return e};var Yn=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}(),Xn=0,Jn=/\{ *([\w_-]+) *\}/g,Qn=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},$n="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",ea=0,ta=window.requestAnimationFrame||co("RequestAnimationFrame")||p,oa=window.cancelAnimationFrame||co("CancelAnimationFrame")||co("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)},na=(Object.freeze||Object)({freeze:Kn,extend:eo,create:Yn,bind:to,lastId:Xn,stamp:oo,throttle:no,wrapNum:ao,falseFn:io,formatNum:ro,trim:so,splitWords:lo,setOptions:_o,getParamString:po,template:mo,isArray:Qn,indexOf:t,emptyImageUrl:$n,requestFn:ta,cancelFn:oa,requestAnimFrame:uo,cancelAnimFrame:m});go.extend=function(a){var t=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},e=t.__super__=this.prototype,n=Yn(e);for(var o in n.constructor=t,t.prototype=n,this)this.hasOwnProperty(o)&&"prototype"!==o&&"__super__"!==o&&(t[o]=this[o]);return a.statics&&(eo(t,a.statics),delete a.statics),a.includes&&(v(a.includes),eo.apply(null,[n].concat(a.includes)),delete a.includes),n.options&&(a.options=eo(Yn(n.options),a.options)),eo(n,a),n._initHooks=[],n.callInitHooks=function(){if(!this._initHooksCalled){e.callInitHooks&&e.callInitHooks.call(this),this._initHooksCalled=!0;for(var o=0,t=n._initHooks.length;o<t;o++)n._initHooks[o].call(this)}},t},go.include=function(e){return eo(this.prototype,e),this},go.mergeOptions=function(e){return eo(this.prototype.options,e),this},go.addInitHook=function(o){var n=Array.prototype.slice.call(arguments,1),a="function"==typeof o?o:function(){this[o].apply(this,n)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(a),this};var aa={on:function(a,r,i){if("object"==typeof a)for(var e in a)this._on(e,a[e],r);else for(var n=0,o=(a=lo(a)).length;n<o;n++)this._on(a[n],r,i);return this},off:function(a,r,i){if(!a)delete this._events;else if("object"==typeof a)for(var e in a)this._off(e,a[e],r);else for(var n=0,o=(a=lo(a)).length;n<o;n++)this._off(a[n],r,i);return this},_on:function(l,t,_){this._events=this._events||{};var d=this._events[l];d||(d=[],this._events[l]=d),_===this&&(_=void 0);for(var n={fn:t,ctx:_},o=d,s=0,r=o.length;s<r;s++)if(o[s].fn===t&&o[s].ctx===_)return;o.push(n)},_off:function(r,t,l){var e,n,o;if(this._events&&(e=this._events[r]))if(!t){for(n=0,o=e.length;n<o;n++)e[n].fn=io;delete this._events[r]}else if(l===this&&(l=void 0),e)for(n=0,o=e.length;n<o;n++){var s=e[n];if(s.ctx===l&&s.fn===t)return s.fn=io,this._firingCount&&(this._events[r]=e=e.slice()),void e.splice(n,1)}},fire:function(i,l,e){if(!this.listens(i,e))return this;var n=eo({},l,{type:i,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var o=this._events[i];if(o){this._firingCount=this._firingCount+1||1;for(var s,_=0,r=o.length;_<r;_++)s=o[_],s.fn.call(s.ctx||this,n);this._firingCount--}}return e&&this._propagateEvent(n),this},listens:function(o,t){var a=this._events&&this._events[o];if(a&&a.length)return!0;if(t)for(var e in this._eventParents)if(this._eventParents[e].listens(o,t))return!0;return!1},once:function(e,a,i){if("object"==typeof e){for(var n in e)this.once(n,e[n],a);return this}var o=to(function(){this.off(e,a,i).off(e,o,i)},this);return this.on(e,a,i).on(e,o,i)},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[oo(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[oo(e)],this},_propagateEvent:function(o){for(var t in this._eventParents)this._eventParents[t].fire(o.type,eo({layer:o.target,propagatedFrom:o.target},o),!0)}};aa.addEventListener=aa.on,aa.removeEventListener=aa.clearAllEventListeners=aa.off,aa.addOneTimeEventListener=aa.once,aa.fireEvent=aa.fire,aa.hasEventListeners=aa.listens;var ia=go.extend(aa),ra=Math.trunc||function(e){return 0<e?Hn(e):Wn(e)};y.prototype={clone:function(){return new y(this.x,this.y)},add:function(e){return this.clone()._add(x(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(x(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new y(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new y(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Gn(this.x),this.y=Gn(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Hn(this.x),this.y=Hn(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Wn(this.x),this.y=Wn(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ra(this.x),this.y=ra(this.y),this},distanceTo:function(o){var t=(o=x(o)).x-this.x,n=o.y-this.y;return Fn(t*t+n*n)},equals:function(e){return(e=x(e)).x===this.x&&e.y===this.y},contains:function(e){return e=x(e),Un(e.x)<=Un(this.x)&&Un(e.y)<=Un(this.y)},toString:function(){return"Point("+ro(this.x)+", "+ro(this.y)+")"}},w.prototype={extend:function(e){return e=x(e),this.min||this.max?(this.min.x=jn(e.x,this.min.x),this.max.x=Vn(e.x,this.max.x),this.min.y=jn(e.y,this.min.y),this.max.y=Vn(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},getCenter:function(e){return new y((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new y(this.min.x,this.max.y)},getTopRight:function(){return new y(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var t,n;return(o="number"==typeof o[0]||o instanceof y?x(o):P(o))instanceof w?(t=o.min,n=o.max):t=n=o,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(a){a=P(a);var t=this.min,i=this.max,e=a.min,n=a.max,o=n.x>=t.x&&e.x<=i.x,s=n.y>=t.y&&e.y<=i.y;return o&&s},overlaps:function(a){a=P(a);var t=this.min,i=this.max,e=a.min,n=a.max,o=n.x>t.x&&e.x<i.x,s=n.y>t.y&&e.y<i.y;return o&&s},isValid:function(){return this.min&&this.max}},b.prototype={extend:function(a){var t,r,s=this._southWest,n=this._northEast;if(a instanceof z)t=a,r=a;else{if(!(a instanceof b))return a?this.extend(M(a)||T(a)):this;if(t=a._southWest,r=a._northEast,!t||!r)return this}return s||n?(s.lat=jn(t.lat,s.lat),s.lng=jn(t.lng,s.lng),n.lat=Vn(r.lat,n.lat),n.lng=Vn(r.lng,n.lng)):(this._southWest=new z(t.lat,t.lng),this._northEast=new z(r.lat,r.lng)),this},pad:function(a){var t=this._southWest,i=this._northEast,e=Un(t.lat-i.lat)*a,n=Un(t.lng-i.lng)*a;return new b(new z(t.lat-e,t.lng-n),new z(i.lat+e,i.lng+n))},getCenter:function(){return new z((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new z(this.getNorth(),this.getWest())},getSouthEast:function(){return new z(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){a="number"==typeof a[0]||a instanceof z||"lat"in a?M(a):T(a);var t,i,e=this._southWest,n=this._northEast;return a instanceof b?(t=a.getSouthWest(),i=a.getNorthEast()):t=i=a,t.lat>=e.lat&&i.lat<=n.lat&&t.lng>=e.lng&&i.lng<=n.lng},intersects:function(a){a=T(a);var t=this._southWest,i=this._northEast,e=a.getSouthWest(),n=a.getNorthEast(),o=n.lat>=t.lat&&e.lat<=i.lat,s=n.lng>=t.lng&&e.lng<=i.lng;return o&&s},overlaps:function(a){a=T(a);var t=this._southWest,i=this._northEast,e=a.getSouthWest(),n=a.getNorthEast(),o=n.lat>t.lat&&e.lat<i.lat,s=n.lng>t.lng&&e.lng<i.lng;return o&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,o){return!!e&&(e=T(e),this._southWest.equals(e.getSouthWest(),o)&&this._northEast.equals(e.getNorthEast(),o))},isValid:function(){return this._southWest&&this._northEast}},z.prototype={equals:function(e,o){return!!e&&(e=M(e),Vn(Un(this.lat-e.lat),Un(this.lng-e.lng))<=(void 0===o?1e-9:o))},toString:function(e){return"LatLng("+ro(this.lat,e)+", "+ro(this.lng,e)+")"},distanceTo:function(e){return la.distance(this,M(e))},wrap:function(){return la.wrapLatLng(this)},toBounds:function(o){var t=180*o/40075017,n=t/Dn(Nn/180*this.lat);return T([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new z(this.lat,this.lng,this.alt)}};var sa={latLngToPoint:function(o,t){var a=this.projection.project(o),e=this.scale(t);return this.transformation._transform(a,e)},pointToLatLng:function(o,t){var a=this.scale(t),e=this.transformation.untransform(o,a);return this.projection.unproject(e)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*qn(2,e)},zoom:function(e){return Rn(e/256)/On},getProjectedBounds:function(o){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(o);return new w(this.transformation.transform(t.min,n),this.transformation.transform(t.max,n))},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?ao(e.lng,this.wrapLng,!0):e.lng;return new z(this.wrapLat?ao(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},wrapLatLngBounds:function(a){var t=a.getCenter(),i=this.wrapLatLng(t),e=t.lat-i.lat,n=t.lng-i.lng;if(0===e&&0===n)return a;var o=a.getSouthWest(),s=a.getNorthEast();return new b(new z(o.lat-e,o.lng-n),new z(s.lat-e,s.lng-n))}},la=eo({},sa,{wrapLng:[-180,180],R:6371e3,distance:function(l,t){var i=Nn/180,e=l.lat*i,n=t.lat*i,o=In((t.lat-l.lat)*i/2),s=In((t.lng-l.lng)*i/2),r=o*o+Dn(e)*Dn(n)*s*s,a=2*Math.atan2(Fn(r),Fn(1-r));return this.R*a}}),_a={R:6378137,MAX_LATITUDE:85.0511287798,project:function(a){var t=Nn/180,i=this.MAX_LATITUDE,r=Vn(jn(i,a.lat),-i),n=In(r*t);return new y(this.R*a.lng*t,this.R*Rn((1+n)/(1-n))/2)},unproject:function(e){var t=180/Nn;return new z((2*Jt(An(e.y/this.R))-Nn/2)*t,e.x*t/this.R)},bounds:function(){var e=6378137*Nn;return new w([-e,-e],[e,e])}()};C.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new y((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var da,pa,ma,ca,ua=eo({},la,{code:"EPSG:3857",projection:_a,transformation:function(){var e=.5/(Nn*_a.R);return Z(e,.5,-e,.5)}()}),ga=eo({},ua,{code:"EPSG:900913"}),ya=document.documentElement.style,ha="ActiveXObject"in window,fa=ha&&!document.addEventListener,va="msLaunchUri"in navigator&&!("documentMode"in document),xa=k("webkit"),La=k("android"),Pa=k("android 2")||k("android 3"),ba=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ta=La&&k("Google")&&537>ba&&!("AudioNode"in window),za=!!window.opera,wa=k("chrome"),Ca=k("gecko")&&!xa&&!za&&!ha,Za=!wa&&k("safari"),Sa=k("phantom"),Ea="OTransition"in ya,ka=0===navigator.platform.indexOf("Win"),Ba=ha&&"transition"in ya,Aa="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Pa,Ia="MozPerspective"in ya,Oa=!window.L_DISABLE_3D&&(Ba||Aa||Ia)&&!Ea&&!Sa,Ma="undefined"!=typeof orientation||k("mobile"),Ra=!window.PointerEvent&&window.MSPointerEvent,Da=window.PointerEvent||Ra,Na=!window.L_NO_TOUCH&&(Da||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),ja=Ma&&za,Wa=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),Ha=!!document.createElement("canvas").getContext,Fa=document.createElementNS&&S("svg").createSVGRect,Ua=!Fa&&function(){try{var e=document.createElement("div");e.innerHTML="<v:shape adj=\"1\"/>";var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"==typeof t.adj}catch(e){return!1}}(),Va=(Object.freeze||Object)({ie:ha,ielt9:fa,edge:va,webkit:xa,android:La,android23:Pa,androidStock:Ta,opera:za,chrome:wa,gecko:Ca,safari:Za,phantom:Sa,opera12:Ea,win:ka,ie3d:Ba,webkit3d:Aa,gecko3d:Ia,any3d:Oa,mobile:Ma,mobileWebkit:Ma&&xa,mobileWebkit3d:Ma&&Aa,msPointer:Ra,pointer:Da,touch:Na,mobileOpera:ja,mobileGecko:Ma&&Ca,retina:Wa,canvas:Ha,svg:Fa,vml:Ua}),Ga=Ra?"MSPointerDown":"pointerdown",qa=Ra?"MSPointerMove":"pointermove",te=Ra?"MSPointerUp":"pointerup",ie=Ra?"MSPointerCancel":"pointercancel",ee=["INPUT","SELECT","OPTION"],ne={},oe=!1,se=0,re=Ra?"MSPointerDown":Da?"pointerdown":"touchstart",ae=Ra?"MSPointerUp":Da?"pointerup":"touchend",he="_leaflet_",ue="_leaflet_events",le=ka&&wa?2*window.devicePixelRatio:Ca?window.devicePixelRatio:1,ce={},_e=(Object.freeze||Object)({on:ho,off:fo,stopPropagation:K,disableScrollPropagation:xo,disableClickPropagation:Lo,preventDefault:Po,stop:bo,getMousePosition:To,getWheelDelta:zo,fakeStop:wo,skipped:Co,isExternalTarget:Zo,addListener:ho,removeListener:fo}),de=yt(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),Ka=yt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ya="webkitTransition"===Ka||"OTransition"===Ka?Ka+"End":"transitionend";if("onselectstart"in document)pa=function(){ho(window,"selectstart",Po)},ma=function(){fo(window,"selectstart",Po)};else{var Xa=yt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);pa=function(){if(Xa){var e=document.documentElement.style;ca=e[Xa],e[Xa]="none"}},ma=function(){Xa&&(document.documentElement.style[Xa]=ca,ca=void 0)}}var ge,ve,ye=(Object.freeze||Object)({TRANSFORM:de,TRANSITION:Ka,TRANSITION_END:Ya,get:st,getStyle:Eo,create:ko,remove:Bo,empty:Ao,toFront:Io,toBack:Oo,hasClass:Mo,addClass:Ro,removeClass:Do,setClass:No,getClass:jo,setOpacity:Wo,testProp:yt,setTransform:Fo,setPosition:Uo,getPosition:Vo,disableTextSelection:pa,enableTextSelection:ma,disableImageDrag:Go,enableImageDrag:qo,preventOutline:Ko,restoreOutline:Yo}),xe=ia.extend({run:function(o,t,a,e){this.stop(),this._el=o,this._inProgress=!0,this._duration=a||.25,this._easeOutPower=1/Vn(e||.5,.2),this._startPos=Vo(o),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=uo(this._animate,this),this._step()},_step:function(o){var t=+new Date-this._startTime,n=1e3*this._duration;t<n?this._runFrame(this._easeOut(t/n),o):(this._runFrame(1),this._complete())},_runFrame:function(o,t){var n=this._startPos.add(this._offset.multiplyBy(o));t&&n._round(),Uo(this._el,n),this.fire("step")},_complete:function(){m(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-qn(1-e,this._easeOutPower)}}),we=ia.extend({options:{crs:ua,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=_o(this,t),this._initContainer(e),this._initLayout(),this._onResize=to(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(M(t.center),t.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=Ka&&Oa&&!ja&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ho(this._proxy,Ya,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,t,e){return t=void 0===t?this._zoom:this._limitZoom(t),o=this._limitCenter(M(o),t,this.options.maxBounds),e=e||{},this._stop(),this._loaded&&!e.reset&&!0!==e&&(void 0!==e.animate&&(e.zoom=eo({animate:e.animate},e.zoom),e.pan=eo({animate:e.animate,duration:e.duration},e.pan)),this._zoom===t?this._tryAnimatedPan(o,e.pan):this._tryAnimatedZoom&&this._tryAnimatedZoom(o,t,e.zoom))?(clearTimeout(this._sizeTimer),this):(this._resetView(o,t),this)},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(Oa?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(Oa?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(a,t,i){var l=this.getZoomScale(t),n=this.getSize().divideBy(2),o=(a instanceof y?a:this.latLngToContainerPoint(a)).subtract(n).multiplyBy(1-1/l),s=this.containerPointToLatLng(n.add(o));return this.setView(s,t,{zoom:i})},_getBoundsCenterZoom:function(l,t){t=t||{},l=l.getBounds?l.getBounds():T(l);var i=x(t.paddingTopLeft||t.padding||[0,0]),e=x(t.paddingBottomRight||t.padding||[0,0]),n=this.getBoundsZoom(l,!1,i.add(e));if((n="number"==typeof t.maxZoom?jn(t.maxZoom,n):n)===1/0)return{center:l.getCenter(),zoom:n};var _=e.subtract(i).divideBy(2),s=this.project(l.getSouthWest(),n),r=this.project(l.getNorthEast(),n);return{center:this.unproject(s.add(r).divideBy(2).add(_),n),zoom:n}},fitBounds:function(o,t){if(!(o=T(o)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(o,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(o,t){if(o=x(o).round(),t=t||{},!o.x&&!o.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new xe,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){Ro(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(f,t,i){function e(o){var t=(m*m-p*p+(o?-1:1)*y*y*g*g)/(2*(o?m:p)*y*g),n=Fn(t*t+1)-t;return 1e-9>n?-18:Rn(n)}function n(e){return(An(e)-An(-e))/2}function o(e){return(An(e)+An(-e))/2}function s(e){return n(e)/o(e)}function r(e){return p*(o(x)/o(x+v*e))}function a(e){return p*(o(x)*s(x+v*e)-n(x))/y}function h(e){return 1-qn(1-e,1.5)}function u(){var o=(Date.now()-T)/P,e=h(o)*z;1>=o?(this._flyToFrame=uo(u,this),this._move(this.unproject(l.add(c.subtract(l).multiplyBy(a(e)/g)),d),this.getScaleZoom(p/r(e),d),{flyTo:!0})):this._move(f,t)._moveEnd(!0)}if(!1===(i=i||{}).animate||!Oa)return this.setView(f,t,i);this._stop();var l=this.project(this.getCenter()),c=this.project(f),_=this.getSize(),d=this._zoom;f=M(f),t=void 0===t?d:t;var p=Vn(_.x,_.y),m=p*this.getZoomScale(d,t),g=c.distanceTo(l)||1,v=1.42,y=v*v,x=e(0),T=Date.now(),z=(e(1)-x)/v,P=i.duration?1e3*i.duration:.8*(1e3*z);return this._moveStart(!0,i.noMoveStart),u.call(this),this},flyToBounds:function(o,t){var n=this._getBoundsCenterZoom(o,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return(e=T(e)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(o,t){this._enforcingBounds=!0;var a=this.getCenter(),e=this._limitCenter(a,this._zoom,T(o));return a.equals(e)||this.panTo(e,t),this._enforcingBounds=!1,this},invalidateSize:function(e){if(!this._loaded)return this;e=eo({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),l=t.divideBy(2).round(),s=i.divideBy(2).round(),r=l.subtract(s);return r.x||r.y?(e.animate&&e.pan?this.panBy(r):(e.pan&&this._rawPanBy(r),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(to(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=eo({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=to(this._handleGeolocationResponse,this),n=to(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,n,e):navigator.geolocation.getCurrentPosition(t,n,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){var t=o.code,n=o.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(a){var t=new z(a.coords.latitude,a.coords.longitude),l=t.toBounds(a.coords.accuracy),_=this._locateOptions;if(_.setView){var n=this.getBoundsZoom(l);this.setView(t,_.maxZoom?jn(n,_.maxZoom):n)}var o={latlng:t,bounds:l,timestamp:a.timestamp};for(var s in a.coords)"number"==typeof a.coords[s]&&(o[s]=a.coords[s]);this.fire("locationfound",o)},addHandler:function(o,t){if(!t)return this;var n=this[o]=new t(this);return this._handlers.push(n),this.options[o]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),Bo(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");for(var e in this._layers)this._layers[e].remove();for(e in this._panes)Bo(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,t){var n=ko("div","leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),t||this._mapPane);return o&&(this._panes[o]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new b(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(p,t,i){p=T(p),i=x(i||[0,0]);var e=this.getZoom()||0,n=this.getMinZoom(),o=this.getMaxZoom(),s=p.getNorthWest(),r=p.getSouthEast(),a=this.getSize().subtract(i),m=P(this.project(r,e),this.project(s,e)).getSize(),u=Oa?this.options.zoomSnap:1,l=a.x/m.x,c=a.y/m.y,_=t?Vn(l,c):jn(l,c);return e=this.getScaleZoom(_,e),u&&(e=Gn(e/(u/100))*(u/100),e=t?Wn(e/u)*u:Hn(e/u)*u),Vn(n,jn(o,e))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new y(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,t){var n=this._getTopLeftPoint(o,t);return new w(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"==typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,t){var n=this.options.crs;return t=void 0===t?this._zoom:t,n.scale(o)/n.scale(t)},getScaleZoom:function(o,t){var a=this.options.crs;t=void 0===t?this._zoom:t;var e=a.zoom(o*a.scale(t));return isNaN(e)?1/0:e},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(M(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(x(e),t)},layerPointToLatLng:function(e){var t=x(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(M(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(M(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(T(e))},distance:function(e,t){return this.options.crs.distance(M(e),M(t))},containerPointToLayerPoint:function(e){return x(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return x(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(x(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(M(e)))},mouseEventToContainerPoint:function(e){return To(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=st(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");ho(t,"scroll",this._onScroll,this),this._containerId=oo(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&Oa,Ro(e,"leaflet-container"+(Na?" leaflet-touch":"")+(Wa?" leaflet-retina":"")+(fa?" leaflet-oldie":"")+(Za?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=Eo(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Uo(this._mapPane,new y(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ro(e.markerPane,"leaflet-zoom-hide"),Ro(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,t){Uo(this._mapPane,new y(0,0));var a=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var e=this._zoom!==t;this._moveStart(e,!1)._move(o,t)._moveEnd(e),this.fire("viewreset"),a&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(o,t,a){void 0===t&&(t=this._zoom);var e=this._zoom!==t;return this._zoom=t,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),(e||a&&a.pinch)&&this.fire("zoom",a),this.fire("move",a)},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return m(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){Uo(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[oo(this._container)]=this;var t=e?fo:ho;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),Oa&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){m(this._resizeRequest),this._resizeRequest=uo(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Vn(Un(e.x),Un(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,t){for(var i,e=[],o="mouseout"===t||"mouseover"===t,s=n.target||n.srcElement,r=!1;s;){if((i=this._targets[oo(s)])&&("click"===t||"preclick"===t)&&!n._simulated&&this._draggableMoved(i)){r=!0;break}if(i&&i.listens(t,!0)){if(o&&!Zo(s,n))break;if(e.push(i),o)break}if(s===this._container)break;s=s.parentNode}return e.length||r||o||!Zo(s,n)||(e=[this]),e},_handleDOMEvent:function(e){if(this._loaded&&!Co(e)){var t=e.type;"mousedown"!==t&&"keypress"!==t||Ko(e.target||e.srcElement),this._fireDOMEvent(e,t)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,l,e){if("click"===i.type){var n=eo({},i);n.type="preclick",this._fireDOMEvent(n,n.type,e)}if(!i._stopped&&(e=(e||[]).concat(this._findEventTargets(i,l))).length){var o=e[0];"contextmenu"===l&&o.listens(l,!0)&&Po(i);var s={originalEvent:i};if("keypress"!==i.type){var r=o.getLatLng&&(!o._radius||10>=o._radius);s.containerPoint=r?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(i),s.layerPoint=this.containerPointToLayerPoint(s.containerPoint),s.latlng=r?o.getLatLng():this.layerPointToLatLng(s.layerPoint)}for(var a=0;a<e.length;a++)if(e[a].fire(l,s,!0),s.originalEvent._stopped||!1===e[a].options.bubblingMouseEvents&&-1!==t(this._mouseEvents,l))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return Vo(this._mapPane)||new y(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,t){var n=this.getSize()._divideBy(2);return this.project(o,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,t,a){var e=this._getNewPixelOrigin(a,t);return this.project(o,t)._subtract(e)},_latLngBoundsToNewLayerBounds:function(o,t,a){var e=this._getNewPixelOrigin(a,t);return P([this.project(o.getSouthWest(),t)._subtract(e),this.project(o.getNorthWest(),t)._subtract(e),this.project(o.getSouthEast(),t)._subtract(e),this.project(o.getNorthEast(),t)._subtract(e)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,t,i){if(!i)return a;var l=this.project(a,t),n=this.getSize().divideBy(2),o=new w(l.subtract(n),l.add(n)),s=this._getBoundsOffset(o,i,t);return s.round().equals([0,0])?a:this.unproject(l.add(s),t)},_limitOffset:function(o,t){if(!t)return o;var a=this.getPixelBounds(),e=new w(a.min.add(o),a.max.add(o));return o.add(this._getBoundsOffset(e,t))},_getBoundsOffset:function(a,t,i){var e=P(this.project(t.getNorthEast(),i),this.project(t.getSouthWest(),i)),n=e.min.subtract(a.min),o=e.max.subtract(a.max);return new y(this._rebound(n.x,-o.x),this._rebound(n.y,-o.y))},_rebound:function(e,t){return 0<e+t?Gn(e-t)/2:Vn(0,Wn(e))-Vn(0,Hn(t))},_limitZoom:function(o){var t=this.getMinZoom(),a=this.getMaxZoom(),e=Oa?this.options.zoomSnap:1;return e&&(o=Gn(o/e)*e),Vn(t,jn(a,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Do(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,t){var n=this._getCenterOffset(o)._trunc();return(!0===(t&&t.animate)||this.getSize().contains(n))&&(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=ko("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(o){var t=de,n=this._proxy.style[t];Fo(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),n===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var e=this.getCenter(),t=this.getZoom();Fo(this._proxy,this.project(e,t),this.getZoomScale(t,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Bo(this._proxy),delete this._proxy},_catchTransitionEnd:function(e){this._animatingZoom&&0<=e.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,t,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Un(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var e=this.getZoomScale(t),n=this._getCenterOffset(a)._divideBy(1-1/e);return(!0===i.animate||this.getSize().contains(n))&&(uo(function(){this._moveStart(!0,!1)._animateZoom(a,t,!0)},this),!0)},_animateZoom:function(e,a,r,n){this._mapPane&&(r&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=a,Ro(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:a,noUpdate:n}),setTimeout(to(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Do(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),uo(function(){this._moveEnd(!0)},this))}}),Le=go.extend({options:{position:"topright"},initialize:function(e){_o(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var t=this._container=this.onAdd(o),a=this.getPosition(),e=o._controlCorners[a];return Ro(t,"leaflet-control"),-1===a.indexOf("bottom")?e.appendChild(t):e.insertBefore(t,e.firstChild),this},remove:function(){return this._map?(Bo(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&0<e.screenX&&0<e.screenY&&this._map.getContainer().focus()}}),Pe=function(e){return new Le(e)};we.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){function o(n,r){a[n+r]=ko("div",i+n+" "+i+r,e)}var a=this._controlCorners={},i="leaflet-",e=this._controlContainer=ko("div",i+"control-container",this._container);o("top","left"),o("top","right"),o("bottom","left"),o("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)Bo(this._controlCorners[e]);Bo(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var be=Le.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,t,a,e){return a<e?-1:e<a?1:0}},initialize:function(o,t,a){for(var e in _o(this,a),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,o)this._addLayer(o[e],e);for(e in t)this._addLayer(t[e],e,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return Le.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(oo(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){Ro(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._form.clientHeight?(Ro(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=e+"px"):Do(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Do(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",t=this._container=ko("div",a),i=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Lo(t),xo(t);var e=this._form=ko("form",a+"-list");i&&(this._map.on("click",this.collapse,this),La||ho(t,{mouseenter:this.expand,mouseleave:this.collapse},this));var n=this._layersLink=ko("a",a+"-toggle",t);n.href="#",n.title="Layers",Na?(ho(n,"click",bo),ho(n,"click",this.expand,this)):ho(n,"focus",this.expand,this),i||this.expand(),this._baseLayersList=ko("div",a+"-base",e),this._separator=ko("div",a+"-separator",e),this._overlaysList=ko("div",a+"-overlays",e),t.appendChild(e)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&oo(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,o,a){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:o,overlay:a}),this.options.sortLayers&&this._layers.sort(to(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ao(this._baseLayersList),Ao(this._overlaysList),this._layerControlInputs=[];var a,t,i,e,n=0;for(i=0;i<this._layers.length;i++)e=this._layers[i],this._addItem(e),t=t||e.overlay,a=a||!e.overlay,n+=e.overlay?0:1;return this.options.hideSingleBase&&(a=a&&1<n,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=t&&a?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var t=this._getLayer(oo(o.target)),n=t.overlay?"add"===o.type?"overlayadd":"overlayremove":"add"===o.type?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(o,t){var a="<input type=\"radio\" class=\"leaflet-control-layers-selector\" name=\""+o+"\""+(t?" checked=\"checked\"":"")+"/>",e=document.createElement("div");return e.innerHTML=a,e.firstChild},_addItem:function(n){var t,a=document.createElement("label"),e=this._map.hasLayer(n.layer);n.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=e):t=this._createRadioElement("leaflet-base-layers",e),this._layerControlInputs.push(t),t.layerId=oo(n.layer),ho(t,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+n.name;var i=document.createElement("div");return a.appendChild(i),i.appendChild(t),i.appendChild(o),(n.overlay?this._overlaysList:this._baseLayersList).appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){var a,t,i=this._layerControlInputs,e=[],n=[];this._handlingClick=!0;for(var o=i.length-1;0<=o;o--)a=i[o],t=this._getLayer(a.layerId).layer,a.checked?e.push(t):a.checked||n.push(t);for(o=0;o<n.length;o++)this._map.hasLayer(n[o])&&this._map.removeLayer(n[o]);for(o=0;o<e.length;o++)this._map.hasLayer(e[o])||this._map.addLayer(e[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var a,t,i=this._layerControlInputs,e=this._map.getZoom(),n=i.length-1;0<=n;n--)a=i[n],t=this._getLayer(a.layerId).layer,a.disabled=void 0!==t.options.minZoom&&e<t.options.minZoom||void 0!==t.options.maxZoom&&e>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Te=Le.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(o){var t="leaflet-control-zoom",a=ko("div",t+" leaflet-bar"),e=this.options;return this._zoomInButton=this._createButton(e.zoomInText,e.zoomInTitle,t+"-in",a,this._zoomIn),this._zoomOutButton=this._createButton(e.zoomOutText,e.zoomOutTitle,t+"-out",a,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),a},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(a,t,i,e,n){var o=ko("a",i,e);return o.innerHTML=a,o.href="#",o.title=t,o.setAttribute("role","button"),o.setAttribute("aria-label",t),Lo(o),ho(o,"click",bo),ho(o,"click",n,this),ho(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";Do(this._zoomInButton,t),Do(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMinZoom())&&Ro(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMaxZoom())&&Ro(this._zoomInButton,t)}});we.mergeOptions({zoomControl:!0}),we.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Te,this.addControl(this.zoomControl))});var ze=Le.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var t=ko("div","leaflet-control-scale"),n=this.options;return this._addScales(n,"leaflet-control-scale-line",t),o.on(n.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),t},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,t,n){o.metric&&(this._mScale=ko("div",t,n)),o.imperial&&(this._iScale=ko("div",t,n))},_update:function(){var o=this._map,t=o.getSize().y/2,n=o.distance(o.containerPointToLatLng([0,t]),o.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(o){var t=this._getRoundNum(o),n=1e3>t?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/o)},_updateImperial:function(a){var t,i,e,n=3.2808399*a;5280<n?(t=n/5280,i=this._getRoundNum(t),this._updateScale(this._iScale,i+" mi",i/t)):(e=this._getRoundNum(n),this._updateScale(this._iScale,e+" ft",e/n))},_updateScale:function(o,t,n){o.style.width=Gn(this.options.maxWidth*n)+"px",o.innerHTML=t},_getRoundNum:function(o){var t=qn(10,(Hn(o)+"").length-1),n=o/t;return n=10<=n?10:5<=n?5:3<=n?3:2<=n?2:1,t*n}}),Me=Le.extend({options:{position:"bottomright",prefix:"<a href=\"http://leafletjs.com\" title=\"A JS library for interactive maps\">Leaflet</a>"},initialize:function(e){_o(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=ko("div","leaflet-control-attribution"),Lo(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),this._container},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var t in this._attributions)this._attributions[t]&&o.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),o.length&&n.push(o.join(", ")),this._container.innerHTML=n.join(" | ")}}});we.mergeOptions({attributionControl:!0}),we.addInitHook(function(){this.options.attributionControl&&new Me().addTo(this)}),Le.Layers=be,Le.Zoom=Te,Le.Scale=ze,Le.Attribution=Me,Pe.layers=function(o,t,n){return new be(o,t,n)},Pe.zoom=function(e){return new Te(e)},Pe.scale=function(e){return new ze(e)},Pe.attribution=function(e){return new Me(e)};var Ce=go.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ce.addTo=function(e,t){return e.addHandler(t,this),this};var Ze,Se=Na?"touchstart mousedown":"mousedown",ke={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},Ie={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Ae=ia.extend({options:{clickTolerance:3},initialize:function(o,t,a,e){_o(this,e),this._element=o,this._dragStartTarget=t||o,this._preventOutline=a},enable:function(){this._enabled||(ho(this._dragStartTarget,Se,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ae._dragging===this&&this.finishDrag(),fo(this._dragStartTarget,Se,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(!e._simulated&&this._enabled&&(this._moved=!1,!Mo(this._element,"leaflet-zoom-anim")&&!(Ae._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches||(Ae._dragging=this,this._preventOutline&&Ko(this._element),Go(),pa(),this._moving)))){this.fire("down");var t=e.touches?e.touches[0]:e;this._startPoint=new y(t.clientX,t.clientY),ho(document,Ie[e.type],this._onMove,this),ho(document,ke[e.type],this._onUp,this)}},_onMove:function(o){if(!o._simulated&&this._enabled)if(o.touches&&1<o.touches.length)this._moved=!0;else{var t=o.touches&&1===o.touches.length?o.touches[0]:o,n=new y(t.clientX,t.clientY).subtract(this._startPoint);(n.x||n.y)&&(Un(n.x)+Un(n.y)<this.options.clickTolerance||(Po(o),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=Vo(this._element).subtract(n),Ro(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ro(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,m(this._animRequest),this._lastEvent=o,this._animRequest=uo(this._updatePosition,this,!0)))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),Uo(this._element,this._newPos),this.fire("drag",e)},_onUp:function(e){!e._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var e in Do(document.body,"leaflet-dragging"),this._lastTarget&&(Do(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ie)fo(document,Ie[e],this._onMove,this),fo(document,ke[e],this._onUp,this);qo(),ma(),this._moved&&this._moving&&(m(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Ae._dragging=!1}}),Be=(Object.freeze||Object)({simplify:Xo,pointToSegmentDistance:Jo,closestPointOnSegment:function(o,t,n){return Ot(o,t,n)},clipSegment:kt,_getEdgeIntersection:$o,_getBitCode:sn,_sqClosestPointOnSegment:Ot,isFlat:Sn,_flat:En}),Oe=(Object.freeze||Object)({clipPolygon:kn}),Re={project:function(e){return new y(e.lng,e.lat)},unproject:function(e){return new z(e.y,e.x)},bounds:new w([-180,-90],[180,90])},Ja={R:6378137,R_MINOR:6356752.314245179,bounds:new w([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(l){var t=Nn/180,i=this.R,_=l.lat*t,n=this.R_MINOR/i,o=Fn(1-n*n),s=o*In(_),r=Math.tan(Nn/4-_/2)/qn((1-s)/(1+s),o/2);return _=-i*Rn(Vn(r,1e-10)),new y(l.lng*t*i,_)},unproject:function(l){for(var t,i=180/Nn,e=this.R,n=this.R_MINOR/e,o=Fn(1-n*n),s=An(-l.y/e),r=Nn/2-2*Jt(s),a=0,_=.1;15>a&&1e-7<Un(_);a++)t=o*In(r),t=qn((1-t)/(1+t),o/2),r+=_=Nn/2-2*Jt(s*t)-r;return new z(r*i,l.x*i/e)}},Qa=(Object.freeze||Object)({LonLat:Re,Mercator:Ja,SphericalMercator:_a}),je=eo({},la,{code:"EPSG:3395",projection:Ja,transformation:function(){var e=.5/(Nn*Ja.R);return Z(e,.5,-e,.5)}()}),We=eo({},la,{code:"EPSG:4326",projection:Re,transformation:Z(1/180,1,-1/180,.5)}),He=eo({},sa,{projection:Re,transformation:Z(1,0,-1,0),scale:function(e){return qn(2,e)},zoom:function(e){return Rn(e)/On},distance:function(o,t){var a=t.lng-o.lng,e=t.lat-o.lat;return Fn(a*a+e*e)},infinite:!0});sa.Earth=la,sa.EPSG3395=je,sa.EPSG3857=ua,sa.EPSG900913=ga,sa.EPSG4326=We,sa.Simple=He;var Fe=ia.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[oo(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[oo(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var t=o.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once("remove",function(){t.off(n,this)},this)}this.onAdd(t),this.getAttribution&&t.attributionControl&&t.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),t.fire("layeradd",{layer:this})}}});we.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=oo(e);return this._layers[t]?this:(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var o=oo(e);return this._layers[o]?(this._loaded&&e.onRemove(this),e.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(e.getAttribution()),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return!!e&&oo(e)in this._layers},eachLayer:function(o,t){for(var n in this._layers)o.call(t,this._layers[n]);return this},_addLayers:function(o){for(var t=0,n=(o=o?Qn(o)?o:[o]:[]).length;t<n;t++)this.addLayer(o[t])},_addZoomLimit:function(e){!isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[oo(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=oo(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,t=-1/0,i=this._getZoomSpan();for(var e in this._zoomBoundLayers){var n=this._zoomBoundLayers[e].options;a=void 0===n.minZoom?a:jn(a,n.minZoom),t=void 0===n.maxZoom?t:Vn(t,n.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=a===1/0?void 0:a,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ue=Fe.extend({initialize:function(o,t){_o(this,t),this._layers={};var a,e;if(o)for(a=0,e=o.length;a<e;a++)this.addLayer(o[a])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return!!e&&(e in this._layers||this.getLayerId(e)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var t,a,e=Array.prototype.slice.call(arguments,1);for(t in this._layers)(a=this._layers[t])[o]&&a[o].apply(a,e);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(o,t){for(var n in this._layers)o.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return oo(e)}}),Ve=Ue.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Ue.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Ue.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new b;for(var t in this._layers){var n=this._layers[t];o.extend(n.getBounds?n.getBounds():n.getLatLng())}return o}}),qe=go.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(e){_o(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(o,t){var a=this._getIconUrl(o);if(!a){if("icon"===o)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(a,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(i,o),i},_setIconStyles:function(a,t){var i=this.options,e=i[t+"Size"];"number"==typeof e&&(e=[e,e]);var r=x(e),o=x("shadow"===t&&i.shadowAnchor||i.iconAnchor||r&&r.divideBy(2,!0));a.className="leaflet-marker-"+t+" "+(i.className||""),o&&(a.style.marginLeft=-o.x+"px",a.style.marginTop=-o.y+"px"),r&&(a.style.width=r.x+"px",a.style.height=r.y+"px")},_createImg:function(e,t){return t=t||document.createElement("img"),t.src=e,t},_getIconUrl:function(e){return Wa&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}}),Ge=qe.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return Ge.imagePath||(Ge.imagePath=this._detectIconPath()),(this.options.imagePath||Ge.imagePath)+qe.prototype._getIconUrl.call(this,e)},_detectIconPath:function(){var e=ko("div","leaflet-default-icon-path",document.body),t=Eo(e,"background-image")||Eo(e,"backgroundImage");return document.body.removeChild(e),t=null===t||0!==t.indexOf("url")?"":t.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Ke=Ce.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new Ae(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ro(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Do(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var t=this._marker,i=t._map,e=this._marker.options.autoPanSpeed,n=this._marker.options.autoPanPadding,o=L.DomUtil.getPosition(t._icon),s=i.getPixelBounds(),r=i.getPixelOrigin(),a=P(s.min._subtract(r).add(n),s.max._subtract(r).subtract(n));if(!a.contains(o)){var _=x((Vn(a.max.x,o.x)-a.max.x)/(s.max.x-a.max.x)-(jn(a.min.x,o.x)-a.min.x)/(s.min.x-a.min.x),(Vn(a.max.y,o.y)-a.max.y)/(s.max.y-a.max.y)-(jn(a.min.y,o.y)-a.min.y)/(s.min.y-a.min.y)).multiplyBy(e);i.panBy(_,{animate:!1}),this._draggable._newPos._add(_),this._draggable._startPos._add(_),L.DomUtil.setPosition(t._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=uo(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(m(this._panRequest),this._panRequest=uo(this._adjustPan.bind(this,e)))},_onDrag:function(a){var t=this._marker,i=t._shadow,e=Vo(t._icon),n=t._map.layerPointToLatLng(e);i&&Uo(i,e),t._latlng=n,a.latlng=n,a.oldLatLng=this._oldLatLng,t.fire("move",a).fire("drag",a)},_onDragEnd:function(e){m(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),Ye=Fe.extend({options:{icon:new Ge,interactive:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1},initialize:function(e,t){_o(this,t),this._latlng=M(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=M(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var a=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=a.icon.createIcon(this._icon),e=!1;i!==this._icon&&(this._icon&&this._removeIcon(),e=!0,a.title&&(i.title=a.title),"IMG"===i.tagName&&(i.alt=a.alt||"")),Ro(i,t),a.keyboard&&(i.tabIndex="0"),this._icon=i,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var n=a.icon.createShadow(this._shadow),o=!1;n!==this._shadow&&(this._removeShadow(),o=!0),n&&(Ro(n,t),n.alt=""),this._shadow=n,1>a.opacity&&this._updateOpacity(),e&&this.getPane().appendChild(this._icon),this._initInteraction(),n&&o&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),Bo(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Bo(this._shadow),this._shadow=null},_setPos:function(e){Uo(this._icon,e),this._shadow&&Uo(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon.style.zIndex=this._zIndex+e},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(Ro(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ke)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ke(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;Wo(this._icon,e),this._shadow&&Wo(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Xe=Fe.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return _o(this,e),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Je=Xe.extend({options:{fill:!0,radius:10},initialize:function(e,t){_o(this,t),this._latlng=M(e),this._radius=this.options.radius},setLatLng:function(e){return this._latlng=M(e),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return Xe.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,t=this._radiusY||o,a=this._clickTolerance(),e=[o+a,t+a];this._pxBounds=new w(this._point.subtract(e),this._point.add(e))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),$e=Je.extend({initialize:function(o,t,a){if("number"==typeof t&&(t=eo({},a,{radius:t})),_o(this,t),this._latlng=M(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new b(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:Xe.prototype.setStyle,_project:function(){var _=this._latlng.lng,t=this._latlng.lat,i=this._map,e=i.options.crs;if(e.distance===la.distance){var n=Nn/180,o=this._mRadius/la.R/n,s=i.project([t+o,_]),r=i.project([t-o,_]),a=s.add(r).divideBy(2),d=i.unproject(a).lat,p=Math.acos((Dn(o*n)-In(t*n)*In(d*n))/(Dn(t*n)*Dn(d*n)))/n;(isNaN(p)||0===p)&&(p=o/Dn(Nn/180*t)),this._point=a.subtract(i.getPixelOrigin()),this._radius=isNaN(p)?0:a.x-i.project([d,_-p]).x,this._radiusY=a.y-s.y}else{var l=e.unproject(e.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(l).x}this._updateBounds()}}),Qe=Xe.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){_o(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(_){for(var t,i,e=1/0,n=null,o=Ot,s=0,r=this._parts.length;s<r;s++)for(var a,d=this._parts[s],p=1,m=d.length;p<m;p++)a=o(_,t=d[p-1],i=d[p],!0),a<e&&(e=a,n=o(_,t,i));return n&&(n.distance=Fn(e)),n},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var l,t,i,e,n,o,s,r=this._rings[0],a=r.length;if(!a)return null;for(l=0,t=0;l<a-1;l++)t+=r[l].distanceTo(r[l+1])/2;if(0===t)return this._map.layerPointToLatLng(r[0]);for(l=0,e=0;l<a-1;l++)if(n=r[l],o=r[l+1],i=n.distanceTo(o),(e+=i)>t)return s=(e-t)/i,this._map.layerPointToLatLng([o.x-s*(o.x-n.x),o.y-s*(o.y-n.y)])},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=M(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new b,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return Sn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var t=[],i=Sn(a),e=0,n=a.length;e<n;e++)i?(t[e]=M(a[e]),this._bounds.extend(t[e])):t[e]=this._convertLatLngs(a[e]);return t},_project:function(){var o=new w;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o);var t=this._clickTolerance(),n=new y(t,t);this._bounds.isValid()&&o.isValid()&&(o.min._subtract(n),o.max._add(n),this._pxBounds=o)},_projectLatlngs:function(a,t,i){var e,n,o=a[0]instanceof z,s=a.length;if(o){for(n=[],e=0;e<s;e++)n[e]=this._map.latLngToLayerPoint(a[e]),i.extend(n[e]);t.push(n)}else for(e=0;e<s;e++)this._projectLatlngs(a[e],t,i)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(l))if(this.options.noClip)this._parts=this._rings;else{var t,i,e,n,o,s,r,a=this._parts;for(t=0,e=0,n=this._rings.length;t<n;t++)for(i=0,o=(r=this._rings[t]).length;i<o-1;i++)(s=kt(r[i],r[i+1],l,i,!0))&&(a[e]=a[e]||[],a[e].push(s[0]),s[1]===r[i+1]&&i!==o-2||(a[e].push(s[1]),e++))}},_simplifyPoints:function(){for(var o=this._parts,t=this.options.smoothFactor,a=0,e=o.length;a<e;a++)o[a]=Xo(o[a],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,t){var i,e,n,o,s,r,a=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(i=0,o=this._parts.length;i<o;i++)for(e=0,n=(s=(r=this._parts[i]).length)-1;e<s;n=e++)if((t||0!==e)&&Jo(l,r[n],r[e])<=a)return!0;return!1}});Qe._flat=En;var tn=Qe.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var _,t,i,e,n,o,s,r,a,d=this._rings[0],p=d.length;if(!p)return null;for(o=s=r=0,_=0,t=p-1;_<p;t=_++)i=d[_],e=d[t],n=i.y*e.x-e.y*i.x,s+=(i.x+e.x)*n,r+=(i.y+e.y)*n,o+=3*n;return a=0===o?d[0]:[s/o,r/o],this._map.layerPointToLatLng(a)},_convertLatLngs:function(o){var t=Qe.prototype._convertLatLngs.call(this,o),n=t.length;return 2<=n&&t[0]instanceof z&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){Qe.prototype._setLatLngs.call(this,e),Sn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Sn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,t=this.options.weight,i=new y(t,t);if(a=new w(a.min.subtract(i),a.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(a))if(this.options.noClip)this._parts=this._rings;else for(var e,n=0,o=this._rings.length;n<o;n++)(e=kn(this._rings[n],a,!0)).length&&this._parts.push(e)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var t,i,e,n,o,s,r,a,_=!1;if(!this._pxBounds.contains(l))return!1;for(n=0,r=this._parts.length;n<r;n++)for(o=0,s=(a=(t=this._parts[n]).length)-1;o<a;s=o++)i=t[o],e=t[s],i.y>l.y!=e.y>l.y&&l.x<(e.x-i.x)*(l.y-i.y)/(e.y-i.y)+i.x&&(_=!_);return _||Qe.prototype._containsPoint.call(this,l,!0)}}),en=Ve.extend({initialize:function(e,t){_o(this,t),this._layers={},e&&this.addData(e)},addData:function(a){var t,i,e,n=Qn(a)?a:a.features;if(n){for(t=0,i=n.length;t<i;t++)((e=n[t]).geometries||e.geometry||e.features||e.coordinates)&&this.addData(e);return this}var o=this.options;if(o.filter&&!o.filter(a))return this;var s=Bn(a,o);return s?(s.feature=qt(a),s.defaultOptions=s.options,this.resetStyle(s),o.onEachFeature&&o.onEachFeature(a,s),this.addLayer(s)):this},resetStyle:function(e){return e.options=eo({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){"function"==typeof t&&(t=t(e.feature)),e.setStyle&&e.setStyle(t)}}),nn={toGeoJSON:function(e){return Vt(this,{type:"Point",coordinates:Ft(this.getLatLng(),e)})}};Ye.include(nn),$e.include(nn),Je.include(nn),Qe.include({toGeoJSON:function(o){var t=!Sn(this._latlngs),n=Ut(this._latlngs,t?1:0,!1,o);return Vt(this,{type:(t?"Multi":"")+"LineString",coordinates:n})}}),tn.include({toGeoJSON:function(o){var t=!Sn(this._latlngs),a=t&&!Sn(this._latlngs[0]),e=Ut(this._latlngs,a?2:t?1:0,!0,o);return t||(e=[e]),Vt(this,{type:(a?"Multi":"")+"Polygon",coordinates:e})}}),Ue.include({toMultiPoint:function(o){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(o).geometry.coordinates)}),Vt(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(a){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(a);var r="GeometryCollection"===t,e=[];return this.eachLayer(function(t){if(t.toGeoJSON){var n=t.toGeoJSON(a);if(r)e.push(n.geometry);else{var o=qt(n);"FeatureCollection"===o.type?e.push.apply(e,o.features):e.push(o)}}}),r?Vt(this,{geometries:e,type:"GeometryCollection"}):{type:"FeatureCollection",features:e}}});var on=Fe.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,t,n){this._url=o,this._bounds=T(t),_o(this,n)},onAdd:function(){this._image||(this._initImage(),1>this.options.opacity&&this._updateOpacity()),this.options.interactive&&(Ro(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Bo(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&Io(this._image),this},bringToBack:function(){return this._map&&Oo(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=T(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:ko("img");Ro(t,"leaflet-image-layer"),this._zoomAnimated&&Ro(t,"leaflet-zoom-animated"),this.options.className&&Ro(t,this.options.className),t.onselectstart=io,t.onmousemove=io,t.onload=to(this.fire,this,"load"),t.onerror=to(this._overlayOnError,this,"error"),this.options.crossOrigin&&(t.crossOrigin=""),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(o){var t=this._map.getZoomScale(o.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;Fo(this._image,n,t)},_reset:function(){var o=this._image,t=new w(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();Uo(o,t.min),o.style.width=n.x+"px",o.style.height=n.y+"px"},_updateOpacity:function(){Wo(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)}}),rn=on.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:ko("video");if(Ro(t,"leaflet-image-layer"),this._zoomAnimated&&Ro(t,"leaflet-zoom-animated"),t.onselectstart=io,t.onmousemove=io,t.onloadeddata=to(this.fire,this,"load"),e){for(var i=t.getElementsByTagName("source"),n=[],o=0;o<i.length;o++)n.push(i[o].src);this._url=0<i.length?n:[t.src]}else{Qn(this._url)||(this._url=[this._url]),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop;for(var r,s=0;s<this._url.length;s++)r=ko("source"),r.src=this._url[s],t.appendChild(r)}}}),an=Fe.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(e,t){_o(this,e),this._source=t},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&Wo(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&Wo(this._container,1),this.bringToFront()},onRemove:function(e){e._fadeAnimated?(Wo(this._container,0),this._removeTimeout=setTimeout(to(Bo,void 0,this._container),200)):Bo(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=M(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Io(this._container),this},bringToBack:function(){return this._map&&Oo(this._container),this},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),t=x(this.options.offset),i=this._getAnchor();this._zoomAnimated?Uo(this._container,a.add(i)):t=t.add(a).add(i);var e=this._containerBottom=-t.y,n=this._containerLeft=-Gn(this._containerWidth/2)+t.x;this._container.style.bottom=e+"px",this._container.style.left=n+"px"}},_getAnchor:function(){return[0,0]}}),hn=an.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e.openPopup(this),this},onAdd:function(e){an.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Xe||this._source.on("preclick",K))},onRemove:function(e){an.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Xe||this._source.off("preclick",K))},getEvents:function(){var e=an.prototype.getEvents.call(this);return(void 0===this.options.closeOnClick?this._map.options.closePopupOnClick:this.options.closeOnClick)&&(e.preclick=this._close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var o="leaflet-popup",t=this._container=ko("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),a=this._wrapper=ko("div",o+"-content-wrapper",t);if(this._contentNode=ko("div",o+"-content",a),Lo(a),xo(this._contentNode),ho(a,"contextmenu",K),this._tipContainer=ko("div",o+"-tip-container",t),this._tip=ko("div",o+"-tip",this._tipContainer),this.options.closeButton){var e=this._closeButton=ko("a",o+"-close-button",t);e.href="#close",e.innerHTML="&#215;",ho(e,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var a=this._contentNode,t=a.style;t.width="",t.whiteSpace="nowrap";var i=a.offsetWidth;i=jn(i,this.options.maxWidth),i=Vn(i,this.options.minWidth),t.width=i+1+"px",t.whiteSpace="",t.height="";var e=a.offsetHeight,n=this.options.maxHeight;n&&e>n?(t.height=n+"px",Ro(a,"leaflet-popup-scrolled")):Do(a,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var t=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),n=this._getAnchor();Uo(this._container,t.add(n))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var _=this._map,t=parseInt(Eo(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+t,d=this._containerWidth,n=new y(this._containerLeft,-i-this._containerBottom);n._add(Vo(this._container));var o=_.layerPointToContainerPoint(n),s=x(this.options.autoPanPadding),r=x(this.options.autoPanPaddingTopLeft||s),a=x(this.options.autoPanPaddingBottomRight||s),p=_.getSize(),m=0,l=0;o.x+d+a.x>p.x&&(m=o.x+d-p.x+a.x),0>o.x-m-r.x&&(m=o.x-r.x),o.y+i+a.y>p.y&&(l=o.y+i-p.y+a.y),0>o.y-l-r.y&&(l=o.y-r.y),(m||l)&&_.fire("autopanstart").panBy([m,l])}},_onCloseButtonClick:function(e){this._close(),bo(e)},_getAnchor:function(){return x(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});we.mergeOptions({closePopupOnClick:!0}),we.include({openPopup:function(o,t,n){return o instanceof hn||(o=new hn(n).setContent(o)),t&&o.setLatLng(t),this.hasLayer(o)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=o,this.addLayer(o))},closePopup:function(e){return e&&e!==this._popup||(e=this._popup,this._popup=null),e&&this.removeLayer(e),this}}),Fe.include({bindPopup:function(e,t){return e instanceof hn?(_o(e,t),this._popup=e,e._source=this):(this._popup&&!t||(this._popup=new hn(t,this)),this._popup.setContent(e)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o,t){if(o instanceof Fe||(t=o,o=this),o instanceof Ve)for(var n in this._layers){o=this._layers[n];break}return t||(t=o.getCenter?o.getCenter():o.getLatLng()),this._popup&&this._map&&(this._popup._source=o,this._popup.update(),this._map.openPopup(this._popup,t)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(e){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(e)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){var t=e.layer||e.target;this._popup&&this._map&&(bo(e),t instanceof Xe?this.openPopup(e.layer||e.target,e.latlng):this._map.hasLayer(this._popup)&&this._popup._source===t?this.closePopup():this.openPopup(t,e.latlng))},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var un=an.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(e){an.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(e){an.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var e=an.prototype.getEvents.call(this);return Na&&!this.options.permanent&&(e.preclick=this._close),e},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ko("div",e)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var t=this._map,i=this._container,e=t.latLngToContainerPoint(t.getCenter()),n=t.layerPointToContainerPoint(l),o=this.options.direction,s=i.offsetWidth,_=i.offsetHeight,d=x(this.options.offset),p=this._getAnchor();"top"===o?l=l.add(x(-s/2+d.x,-_+d.y+p.y,!0)):"bottom"===o?l=l.subtract(x(s/2-d.x,-d.y,!0)):"center"===o?l=l.subtract(x(s/2+d.x,_/2-p.y+d.y,!0)):"right"===o||"auto"===o&&n.x<e.x?(o="right",l=l.add(x(d.x+p.x,p.y-_/2+d.y,!0))):(o="left",l=l.subtract(x(s+p.x-d.x,_/2-p.y-d.y,!0))),Do(i,"leaflet-tooltip-right"),Do(i,"leaflet-tooltip-left"),Do(i,"leaflet-tooltip-top"),Do(i,"leaflet-tooltip-bottom"),Ro(i,"leaflet-tooltip-"+o),Uo(i,l)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&Wo(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return x(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});we.include({openTooltip:function(o,t,n){return o instanceof un||(o=new un(n).setContent(o)),t&&o.setLatLng(t),this.hasLayer(o)?this:this.addLayer(o)},closeTooltip:function(e){return e&&this.removeLayer(e),this}}),Fe.include({bindTooltip:function(e,t){return e instanceof un?(_o(e,t),this._tooltip=e,e._source=this):(this._tooltip&&!t||(this._tooltip=new un(t,this)),this._tooltip.setContent(e)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(o||!this._tooltipHandlersAdded){var n=o?"off":"on",a={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?a.add=this._openTooltip:(a.mouseover=this._openTooltip,a.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(a.mousemove=this._moveTooltip),Na&&(a.click=this._openTooltip)),this[n](a),this._tooltipHandlersAdded=!o}},openTooltip:function(o,t){if(o instanceof Fe||(t=o,o=this),o instanceof Ve)for(var n in this._layers){o=this._layers[n];break}return t||(t=o.getCenter?o.getCenter():o.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=o,this._tooltip.update(),this._map.openTooltip(this._tooltip,t),this._tooltip.options.interactive&&this._tooltip._container&&(Ro(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(Do(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(e){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(e)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_openTooltip:function(e){var t=e.layer||e.target;this._tooltip&&this._map&&this.openTooltip(t,this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(o){var t,a,e=o.latlng;this._tooltip.options.sticky&&o.originalEvent&&(t=this._map.mouseEventToContainerPoint(o.originalEvent),a=this._map.containerPointToLayerPoint(t),e=this._map.layerPointToLatLng(a)),this._tooltip.setLatLng(e)}});var ln=qe.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var t=o&&"DIV"===o.tagName?o:document.createElement("div"),a=this.options;if(t.innerHTML=!1===a.html?"":a.html,a.bgPos){var e=x(a.bgPos);t.style.backgroundPosition=-e.x+"px "+-e.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});qe.Default=Ge;var cn=Fe.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ma,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){_o(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),Bo(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Io(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Oo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=no(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof y?e:new y(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var t,r=this.getPane().children,e=-a(-1/0,1/0),n=0,o=r.length;n<o;n++)t=r[n].style.zIndex,r[n]!==this._container&&t&&(e=a(e,+t));isFinite(e)&&(this.options.zIndex=e+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!fa){Wo(this._container,this.options.opacity);var a=+new Date,t=!1,i=!1;for(var e in this._tiles){var n=this._tiles[e];if(n.current&&n.loaded){var o=jn(1,(a-n.loaded)/200);Wo(n.el,o),1>o?t=!0:(n.active?i=!0:this._onOpaqueTile(n),n.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),t&&(m(this._fadeFrame),this._fadeFrame=uo(this._updateOpacity,this))}},_onOpaqueTile:io,_initContainer:function(){this._container||(this._container=ko("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),1>this.options.opacity&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,t=this.options.maxZoom;if(void 0!==a){for(var i in this._levels)this._levels[i].el.children.length||i===a?(this._levels[i].el.style.zIndex=t-Un(a-i),this._onUpdateLevel(i)):(Bo(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var e=this._levels[a],n=this._map;return e||((e=this._levels[a]={}).el=ko("div","leaflet-tile-container leaflet-zoom-animated",this._container),e.el.style.zIndex=t,e.origin=n.project(n.unproject(n.getPixelOrigin()),a).round(),e.zoom=a,this._setZoomTransform(e,n.getCenter(),n.getZoom()),e.el.offsetWidth,this._onCreateLevel(e)),this._level=e,e}},_onUpdateLevel:io,_onRemoveLevel:io,_onCreateLevel:io,_pruneTiles:function(){if(this._map){var o,t,a=this._map.getZoom();if(a>this.options.maxZoom||a<this.options.minZoom)this._removeAllTiles();else{for(o in this._tiles)(t=this._tiles[o]).retain=t.current;for(o in this._tiles)if((t=this._tiles[o]).current&&!t.active){var e=t.coords;this._retainParent(e.x,e.y,e.z,e.z-5)||this._retainChildren(e.x,e.y,e.z,e.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)Bo(this._levels[e].el),this._onRemoveLevel(e),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,t,i,e){var n=Hn(l/2),_=Hn(t/2),d=i-1,p=new y(+n,+_);p.z=+d;var a=this._tileCoordsToKey(p),m=this._tiles[a];return m&&m.active?(m.retain=!0,!0):(m&&m.loaded&&(m.retain=!0),d>e&&this._retainParent(n,_,d,e))},_retainChildren:function(l,t,i,e){for(var n=2*l;n<2*l+2;n++)for(var o,r=2*t;r<2*t+2;r++){o=new y(n,r),o.z=i+1;var s=this._tileCoordsToKey(o),a=this._tiles[s];a&&a.active?a.retain=!0:(a&&a.loaded&&(a.retain=!0),i+1<e&&this._retainChildren(n,r,i+1,e))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(a,t,i,r){var n=this._clampZoom(Gn(t));(void 0!==this.options.maxZoom&&n>this.options.maxZoom||void 0!==this.options.minZoom&&n<this.options.minZoom)&&(n=void 0);var o=this.options.updateWhenZooming&&n!==this._tileZoom;r&&!o||(this._tileZoom=n,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==n&&this._update(a),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(a,t)},_setZoomTransforms:function(o,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],o,t)},_setZoomTransform:function(a,t,i){var e=this._map.getZoomScale(i,a.zoom),n=a.origin.multiplyBy(e).subtract(this._map._getNewPixelOrigin(t,i)).round();Oa?Fo(a.el,n,e):Uo(a.el,n)},_resetGrid:function(){var a=this._map,t=a.options.crs,i=this._tileSize=this.getTileSize(),e=this._tileZoom,n=this._map.getPixelWorldBounds(this._tileZoom);n&&(this._globalTileRange=this._pxBoundsToTileRange(n)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Hn(a.project([0,t.wrapLng[0]],e).x/i.x),Wn(a.project([0,t.wrapLng[1]],e).x/i.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Hn(a.project([t.wrapLat[0],0],e).y/i.x),Wn(a.project([t.wrapLat[1],0],e).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(a){var t=this._map,i=t._animatingZoom?Vn(t._animateToZoom,t.getZoom()):t.getZoom(),e=t.getZoomScale(i,this._tileZoom),n=t.project(a,this._tileZoom).floor(),o=t.getSize().divideBy(2*e);return new w(n.subtract(o),n.add(o))},_update:function(g){var t=this._map;if(t){var i=this._clampZoom(t.getZoom());if(void 0===g&&(g=t.getCenter()),void 0!==this._tileZoom){var e=this._getTiledPixelBounds(g),n=this._pxBoundsToTileRange(e),o=n.getCenter(),s=[],r=this.options.keepBuffer,f=new w(n.getBottomLeft().subtract([r,-r]),n.getTopRight().add([r,-r]));if(!(isFinite(n.min.x)&&isFinite(n.min.y)&&isFinite(n.max.x)&&isFinite(n.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var h in this._tiles){var u=this._tiles[h].coords;u.z===this._tileZoom&&f.contains(new y(u.x,u.y))||(this._tiles[h].current=!1)}if(1<Un(i-this._tileZoom))this._setView(g,i);else{for(var l=n.min.y;l<=n.max.y;l++)for(var c,d=n.min.x;d<=n.max.x;d++)if(c=new y(d,l),c.z=this._tileZoom,this._isValidTile(c)){var _=this._tiles[this._tileCoordsToKey(c)];_?_.current=!0:s.push(c)}if(s.sort(function(e,t){return e.distanceTo(o)-t.distanceTo(o)}),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var p=document.createDocumentFragment();for(d=0;d<s.length;d++)this._addTile(s[d],p);this._level.el.appendChild(p)}}}}},_isValidTile:function(o){var t=this._map.options.crs;if(!t.infinite){var a=this._globalTileRange;if(!t.wrapLng&&(o.x<a.min.x||o.x>a.max.x)||!t.wrapLat&&(o.y<a.min.y||o.y>a.max.y))return!1}if(!this.options.bounds)return!0;var e=this._tileCoordsToBounds(o);return T(this.options.bounds).overlaps(e)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(a){var t=this._map,i=this.getTileSize(),e=a.scaleBy(i),n=e.add(i);return[t.unproject(e,a.z),t.unproject(n,a.z)]},_tileCoordsToBounds:function(o){var t=this._tileCoordsToNwSe(o),n=new b(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(o){var t=o.split(":"),n=new y(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(Ta||t.el.setAttribute("src",$n),Bo(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){Ro(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=io,e.onmousemove=io,fa&&1>this.options.opacity&&Wo(e,this.options.opacity),La&&!Pa&&(e.style.WebkitBackfaceVisibility="hidden")},_addTile:function(e,a){var i=this._getTilePos(e),n=this._tileCoordsToKey(e),o=this.createTile(this._wrapCoords(e),to(this._tileReady,this,e));this._initTile(o),2>this.createTile.length&&uo(to(this._tileReady,this,e,null,o)),Uo(o,i),this._tiles[n]={el:o,coords:e,current:!0},a.appendChild(o),this.fire("tileloadstart",{tile:o,coords:e})},_tileReady:function(e,a,r){if(this._map){a&&this.fire("tileerror",{error:a,tile:r,coords:e});var s=this._tileCoordsToKey(e);(r=this._tiles[s])&&(r.loaded=+new Date,this._map._fadeAnimated?(Wo(r.el,0),m(this._fadeFrame),this._fadeFrame=uo(this._updateOpacity,this)):(r.active=!0,this._pruneTiles()),a||(Ro(r.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:r.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),fa||!this._map._fadeAnimated?uo(this._pruneTiles,this):setTimeout(to(this._pruneTiles,this),250)))}},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new y(this._wrapX?ao(e.x,this._wrapX):e.x,this._wrapY?ao(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new w(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}}),_n=cn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(e,t){this._url=e,(t=_o(this,t)).detectRetina&&Wa&&0<t.maxZoom&&(t.tileSize=Hn(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom++):(t.zoomOffset++,t.maxZoom--),t.minZoom=Vn(0,t.minZoom)),"string"==typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),La||this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url=e,t||this.redraw(),this},createTile:function(e,t){var o=document.createElement("img");return ho(o,"load",to(this._tileOnLoad,this,t,o)),ho(o,"error",to(this._tileOnError,this,t,o)),this.options.crossOrigin&&(o.crossOrigin=""),o.alt="",o.setAttribute("role","presentation"),o.src=this.getTileUrl(e),o},getTileUrl:function(o){var t={r:Wa?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var e=this._globalTileRange.max.y-o.y;this.options.tms&&(t.y=e),t["-y"]=e}return mo(this._url,eo(t,this.options))},_tileOnLoad:function(e,t){fa?setTimeout(to(e,this,null,t),0):e(null,t)},_tileOnError:function(o,t,a){var e=this.options.errorTileUrl;e&&t.getAttribute("src")!==e&&(t.src=e),o(a,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,t=this.options.maxZoom,a=this.options.zoomReverse,e=this.options.zoomOffset;return a&&(o=t-o),o+e},_getSubdomain:function(e){var t=Un(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=io,t.onerror=io,t.complete||(t.src=$n,Bo(t),delete this._tiles[e]))}}),dn=_n.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,t){this._url=a;var e=eo({},this.defaultWmsParams);for(var n in t)n in this.options||(e[n]=t[n]);var o=(t=_o(this,t)).detectRetina&&Wa?2:1,i=this.getTileSize();e.width=i.x*o,e.height=i.y*o,this.wmsParams=e},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[t]=this._crs.code,_n.prototype.onAdd.call(this,e)},getTileUrl:function(l){var t=this._tileCoordsToNwSe(l),i=this._crs,e=P(i.project(t[0]),i.project(t[1])),n=e.min,o=e.max,s=(1.3<=this._wmsVersion&&this._crs===We?[n.y,n.x,o.y,o.x]:[n.x,n.y,o.x,o.y]).join(","),r=L.TileLayer.prototype.getTileUrl.call(this,l);return r+po(this.wmsParams,r,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(o,t){return eo(this.wmsParams,o),t||this.redraw(),this}});_n.WMS=dn,Kt.wms=function(e,t){return new dn(e,t)};var pn=Fe.extend({options:{padding:.1,tolerance:0},initialize:function(e){_o(this,e),oo(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&Ro(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,t){var i=this._map.getZoomScale(t,this._zoom),_=Vo(this._container),n=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,t),s=this._map.project(l,t).subtract(o),r=n.multiplyBy(-i).add(_).add(n).subtract(s);Oa?Fo(this._container,r,i):Uo(this._container,r)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var o=this.options.padding,n=this._map.getSize(),a=this._map.containerPointToLayerPoint(n.multiplyBy(-o)).round();this._bounds=new w(a,a.add(n.multiplyBy(1+2*o)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),mn=pn.extend({getEvents:function(){var e=pn.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){pn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");ho(e,"mousemove",no(this._onMouseMove,32,this),this),ho(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ho(e,"mouseout",this._handleMouseOut,this),this._ctx=e.getContext("2d")},_destroyContainer:function(){delete this._ctx,Bo(this._container),fo(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},pn.prototype._update.call(this);var o=this._bounds,t=this._container,a=o.getSize(),e=Wa?2:1;Uo(t,o.min),t.width=e*a.x,t.height=e*a.y,t.style.width=a.x+"px",t.style.height=a.y+"px",Wa&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){pn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[oo(e)]=e;var o=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(o){var t=o._order,a=t.next,e=t.prev;a?a.prev=e:this._drawLast=e,e?e.next=a:this._drawFirst=a,delete o._order,delete this._layers[L.stamp(o)],this._requestRedraw(o)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(o){if(o.options.dashArray){var t,a=o.options.dashArray.split(","),e=[];for(t=0;t<a.length;t++)e.push(+a[t]);o.options._dashArray=e}},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||uo(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new w,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var o,t=this._redrawBounds;if(this._ctx.save(),t){var a=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,a.x,a.y),this._ctx.clip()}this._drawing=!0;for(var e=this._drawFirst;e;e=e.next)o=e.layer,(!t||o._pxBounds&&o._pxBounds.intersects(t))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,t){if(this._drawing){var i,e,n,o,s=l._parts,r=s.length,a=this._ctx;if(r){for(this._drawnLayers[l._leaflet_id]=l,a.beginPath(),i=0;i<r;i++){for(e=0,n=s[i].length;e<n;e++)o=s[i][e],a[e?"lineTo":"moveTo"](o.x,o.y);t&&a.closePath()}this._fillStroke(a,l)}}},_updateCircle:function(a){if(this._drawing&&!a._empty()){var t=a._point,i=this._ctx,e=Vn(Gn(a._radius),1),n=(Vn(Gn(a._radiusY),1)||e)/e;this._drawnLayers[a._leaflet_id]=a,1!==n&&(i.save(),i.scale(1,n)),i.beginPath(),i.arc(t.x,t.y/n,e,0,2*Nn,!1),1!==n&&i.restore(),this._fillStroke(i,a)}},_fillStroke:function(o,t){var n=t.options;n.fill&&(o.globalAlpha=n.fillOpacity,o.fillStyle=n.fillColor||n.color,o.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(o.setLineDash&&o.setLineDash(t.options&&t.options._dashArray||[]),o.globalAlpha=n.opacity,o.lineWidth=n.weight,o.strokeStyle=n.color,o.lineCap=n.lineCap,o.lineJoin=n.lineJoin,o.stroke())},_onClick:function(a){for(var t,i,e=this._map.mouseEventToLayerPoint(a),n=this._drawFirst;n;n=n.next)(t=n.layer).options.interactive&&t._containsPoint(e)&&!this._map._draggableMoved(t)&&(i=t);i&&(wo(a),this._fireEvent([i],a))},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(Do(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(a,t){for(var i,e,n=this._drawFirst;n;n=n.next)(i=n.layer).options.interactive&&i._containsPoint(t)&&(e=i);e!==this._hoveredLayer&&(this._handleMouseOut(a),e&&(Ro(this._container,"leaflet-interactive"),this._fireEvent([e],a,"mouseover"),this._hoveredLayer=e)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],a)},_fireEvent:function(o,t,n){this._map._fireDOMEvent(t,n||t.type,o)},_bringToFront:function(o){var t=o._order,a=t.next,e=t.prev;a&&(a.prev=e,e?e.next=a:a&&(this._drawFirst=a),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(o))},_bringToBack:function(o){var t=o._order,a=t.next,e=t.prev;e&&(e.next=a,a?a.prev=e:e&&(this._drawLast=e),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(o))}}),fn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+" class=\"lvml\">")}}catch(e){return function(e){return document.createElement("<"+e+" xmlns=\"urn:schemas-microsoft.com:vml\" class=\"lvml\">")}}}(),gn=Ua?fn:S,yn=pn.extend({getEvents:function(){var e=pn.prototype.getEvents.call(this);return e.zoomstart=this._onZoomStart,e},_initContainer:function(){this._container=gn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=gn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Bo(this._container),fo(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){pn.prototype._update.call(this);var o=this._bounds,t=o.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),Uo(n,o.min),n.setAttribute("viewBox",[o.min.x,o.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=gn("path");e.options.className&&Ro(t,e.options.className),e.options.interactive&&Ro(t,"leaflet-interactive"),this._updateStyle(e),this._layers[oo(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){Bo(e._path),e.removeInteractiveTarget(e._path),delete this._layers[oo(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(o){var t=o._path,n=o.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,E(e._parts,t))},_updateCircle:function(a){var t=a._point,i=Vn(Gn(a._radius),1),r="a"+i+","+(Vn(Gn(a._radiusY),1)||i)+" 0 1,0 ",n=a._empty()?"M0 0":"M"+(t.x-i)+","+t.y+r+2*i+",0 "+r+2*-i+",0 ";this._setPath(a,n)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){Io(e._path)},_bringToBack:function(e){Oo(e._path)}});Ua&&yn.include({_initContainer:function(){this._container=ko("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(pn.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=fn("shape");Ro(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=fn("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[oo(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;Bo(t),e.removeInteractiveTarget(t),delete this._layers[oo(e)]},_updateStyle:function(a){var t=a._stroke,i=a._fill,e=a.options,n=a._container;n.stroked=!!e.stroke,n.filled=!!e.fill,e.stroke?(t||(t=a._stroke=fn("stroke")),n.appendChild(t),t.weight=e.weight+"px",t.color=e.color,t.opacity=e.opacity,t.dashStyle=e.dashArray?Qn(e.dashArray)?e.dashArray.join(" "):e.dashArray.replace(/( *, *)/g," "):"",t.endcap=e.lineCap.replace("butt","flat"),t.joinstyle=e.lineJoin):t&&(n.removeChild(t),a._stroke=null),e.fill?(i||(i=a._fill=fn("fill")),n.appendChild(i),i.color=e.fillColor||e.color,i.opacity=e.fillOpacity):i&&(n.removeChild(i),a._fill=null)},_updateCircle:function(o){var t=o._point.round(),a=Gn(o._radius),e=Gn(o._radiusY||a);this._setPath(o,o._empty()?"M0 0":"AL "+t.x+","+t.y+" "+a+","+e+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){Io(e._container)},_bringToBack:function(e){Oo(e._container)}}),we.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this.options.preferCanvas&&Yt()||Xt()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var o=this._paneRenderers[e];return void 0===o&&(o=yn&&Xt({pane:e})||mn&&Yt({pane:e}),this._paneRenderers[e]=o),o}});var xn=tn.extend({initialize:function(e,t){tn.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=T(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});yn.create=gn,yn.pointsToPath=E,en.geometryToLayer=Bn,en.coordsToLatLng=Wt,en.coordsToLatLngs=Ht,en.latLngToCoords=Ft,en.latLngsToCoords=Ut,en.getFeature=Vt,en.asFeature=qt,we.mergeOptions({boxZoom:!0});var wn=Ce.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){ho(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){fo(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Bo(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){return e.shiftKey&&(1===e.which||1===e.button)&&void(this._clearDeferredResetState(),this._resetState(),pa(),Go(),this._startPoint=this._map.mouseEventToContainerPoint(e),ho(document,{contextmenu:bo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=ko("div","leaflet-zoom-box",this._container),Ro(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var t=new w(this._point,this._startPoint),n=t.getSize();Uo(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(Bo(this._box),Do(this._container,"leaflet-crosshair")),ma(),qo(),fo(document,{contextmenu:bo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(to(this._resetState,this),0);var t=new b(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&this._finish()}});we.addInitHook("addHandler","boxZoom",wn),we.mergeOptions({doubleClickZoom:!0});var Ln=Ce.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var t=this._map,i=t.getZoom(),e=t.options.zoomDelta,n=a.originalEvent.shiftKey?i-e:i+e;"center"===t.options.doubleClickZoom?t.setZoom(n):t.setZoomAround(a.containerPoint,n)}});we.addInitHook("addHandler","doubleClickZoom",Ln),we.mergeOptions({dragging:!0,inertia:!Pa,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Pn=Ce.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new Ae(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}Ro(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Do(this._map._container,"leaflet-grab"),Do(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=T(this._map.options.maxBounds);this._offsetLimit=P(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=jn(1,Vn(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(e){for(;1<this._positions.length&&50<e-this._times[0];)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var a=this._worldWidth,t=Gn(a/2),i=this._initialWorldOffset,e=this._draggable._newPos.x,n=(e-t+i)%a+t-i,o=(e+t+i)%a-t-i,s=Un(n+i)<Un(o+i)?n:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(d){var t=this._map,i=t.options,e=!i.inertia||2>this._times.length;if(t.fire("dragend",d),e)t.fire("moveend");else{this._prunePositions(+new Date);var n=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,s=i.easeLinearity,p=n.multiplyBy(s/o),a=p.distanceTo([0,0]),m=jn(i.inertiaMaxSpeed,a),u=p.multiplyBy(m/a),l=m/(i.inertiaDeceleration*s),g=u.multiplyBy(-l/2).round();g.x||g.y?(g=t._limitOffset(g,t.options.maxBounds),uo(function(){t.panBy(g,{duration:l,easeLinearity:s,noMoveStart:!0,animate:!0})})):t.fire("moveend")}}});we.addInitHook("addHandler","dragging",Pn),we.mergeOptions({keyboard:!0,keyboardPanDelta:80});var bn=Ce.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;0>=e.tabIndex&&(e.tabIndex="0"),ho(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),fo(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,t=document.documentElement,a=o.scrollTop||t.scrollTop,e=o.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(e,a)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var t,i,e=this._panKeys={},n=this.keyCodes;for(t=0,i=n.left.length;t<i;t++)e[n.left[t]]=[-1*a,0];for(t=0,i=n.right.length;t<i;t++)e[n.right[t]]=[a,0];for(t=0,i=n.down.length;t<i;t++)e[n.down[t]]=[0,a];for(t=0,i=n.up.length;t<i;t++)e[n.up[t]]=[0,-1*a]},_setZoomDelta:function(a){var r,i,e=this._zoomKeys={},n=this.keyCodes;for(r=0,i=n.zoomIn.length;r<i;r++)e[n.zoomIn[r]]=a;for(r=0,i=n.zoomOut.length;r<i;r++)e[n.zoomOut[r]]=-a},_addHooks:function(){ho(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){fo(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var t,a=o.keyCode,e=this._map;if(a in this._panKeys){if(e._panAnim&&e._panAnim._inProgress)return;t=this._panKeys[a],o.shiftKey&&(t=x(t).multiplyBy(3)),e.panBy(t),e.options.maxBounds&&e.panInsideBounds(e.options.maxBounds)}else if(a in this._zoomKeys)e.setZoom(e.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[a]);else{if(27!==a||!e._popup||!e._popup.options.closeOnEscapeKey)return;e.closePopup()}bo(o)}}});we.addInitHook("addHandler","keyboard",bn),we.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Tn=Ce.extend({addHooks:function(){ho(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){fo(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=zo(e),a=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var n=Vn(a-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(to(this._performZoom,this),n),bo(e)},_performZoom:function(){var a=this._map,t=a.getZoom(),i=this._map.options.zoomSnap||0;a._stop();var e=this._delta/(4*this._map.options.wheelPxPerZoomLevel),n=4*Rn(2/(1+An(-Un(e))))/On,o=i?Wn(n/i)*i:n,l=a._limitZoom(t+(0<this._delta?o:-o))-t;this._delta=0,this._startTime=null,l&&("center"===a.options.scrollWheelZoom?a.setZoom(t+l):a.setZoomAround(this._lastMousePos,t+l))}});we.addInitHook("addHandler","scrollWheelZoom",Tn),we.mergeOptions({tap:!0,tapTolerance:15});var zn=Ce.extend({addHooks:function(){ho(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){fo(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(e.touches){if(Po(e),this._fireClick=!0,1<e.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var t=e.touches[0],o=t.target;this._startPos=this._newPos=new y(t.clientX,t.clientY),o.tagName&&"a"===o.tagName.toLowerCase()&&Ro(o,"leaflet-active"),this._holdTimeout=setTimeout(to(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",t))},this),1e3),this._simulateEvent("mousedown",t),ho(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(o){if(clearTimeout(this._holdTimeout),fo(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&o&&o.changedTouches){var t=o.changedTouches[0],n=t.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&Do(n,"leaflet-active"),this._simulateEvent("mouseup",t),this._isTapValid()&&this._simulateEvent("click",t)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(e){var t=e.touches[0];this._newPos=new y(t.clientX,t.clientY),this._simulateEvent("mousemove",t)},_simulateEvent:function(o,t){var n=document.createEvent("MouseEvents");n._simulated=!0,t.target._simulatedClick=!0,n.initMouseEvent(o,!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(n)}});Na&&!Da&&we.addInitHook("addHandler","tap",zn),we.mergeOptions({touchZoom:Na&&!Pa,bounceAtZoomLimits:!0});var Mn=Ce.extend({addHooks:function(){Ro(this._map._container,"leaflet-touch-zoom"),ho(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Do(this._map._container,"leaflet-touch-zoom"),fo(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var t=this._map;if(o.touches&&2===o.touches.length&&!t._animatingZoom&&!this._zooming){var a=t.mouseEventToContainerPoint(o.touches[0]),e=t.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(a.add(e)._divideBy(2))),this._startDist=a.distanceTo(e),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),ho(document,"touchmove",this._onTouchMove,this),ho(document,"touchend",this._onTouchEnd,this),Po(o)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,i=t.mouseEventToContainerPoint(e.touches[0]),n=t.mouseEventToContainerPoint(e.touches[1]),o=i.distanceTo(n)/this._startDist;if(!(this._zoom=t.getScaleZoom(o,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&1>o||this._zoom>t.getMaxZoom()&&1<o)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom)){var s=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===s.x&&0===s.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}else if(this._center=this._startLatLng,1===o)return;this._moved||(t._moveStart(!0,!1),this._moved=!0),m(this._animRequest);var r=to(t._move,t,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=uo(r,this,!0),Po(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,m(this._animRequest),fo(document,"touchmove",this._onTouchMove),fo(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});we.addInitHook("addHandler","touchZoom",Mn),we.BoxZoom=wn,we.DoubleClickZoom=Ln,we.Drag=Pn,we.Keyboard=bn,we.ScrollWheelZoom=Tn,we.Tap=zn,we.TouchZoom=Mn;var Cn=window.L;window.L=Ee,Object.freeze=Kn,Ee.version="1.3.1",Ee.noConflict=function(){return window.L=Cn,this},Ee.Control=Le,Ee.control=Pe,Ee.Browser=Va,Ee.Evented=ia,Ee.Mixin={Events:aa},Ee.Util=na,Ee.Class=go,Ee.Handler=Ce,Ee.extend=eo,Ee.bind=to,Ee.stamp=oo,Ee.setOptions=_o,Ee.DomEvent=_e,Ee.DomUtil=ye,Ee.PosAnimation=xe,Ee.Draggable=Ae,Ee.LineUtil=Be,Ee.PolyUtil=Oe,Ee.Point=y,Ee.point=x,Ee.Bounds=w,Ee.bounds=P,Ee.Transformation=C,Ee.transformation=Z,Ee.Projection=Qa,Ee.LatLng=z,Ee.latLng=M,Ee.LatLngBounds=b,Ee.latLngBounds=T,Ee.CRS=sa,Ee.GeoJSON=en,Ee.geoJSON=Gt,Ee.geoJson=Gt,Ee.Layer=Fe,Ee.LayerGroup=Ue,Ee.layerGroup=function(e,t){return new Ue(e,t)},Ee.FeatureGroup=Ve,Ee.featureGroup=function(e){return new Ve(e)},Ee.ImageOverlay=on,Ee.imageOverlay=function(o,t,n){return new on(o,t,n)},Ee.VideoOverlay=rn,Ee.videoOverlay=function(o,t,n){return new rn(o,t,n)},Ee.DivOverlay=an,Ee.Popup=hn,Ee.popup=function(e,t){return new hn(e,t)},Ee.Tooltip=un,Ee.tooltip=function(e,t){return new un(e,t)},Ee.Icon=qe,Ee.icon=function(e){return new qe(e)},Ee.DivIcon=ln,Ee.divIcon=function(e){return new ln(e)},Ee.Marker=Ye,Ee.marker=function(e,t){return new Ye(e,t)},Ee.TileLayer=_n,Ee.tileLayer=Kt,Ee.GridLayer=cn,Ee.gridLayer=function(e){return new cn(e)},Ee.SVG=yn,Ee.svg=Xt,Ee.Renderer=pn,Ee.Canvas=mn,Ee.canvas=Yt,Ee.Path=Xe,Ee.CircleMarker=Je,Ee.circleMarker=function(e,t){return new Je(e,t)},Ee.Circle=$e,Ee.circle=function(o,t,n){return new $e(o,t,n)},Ee.Polyline=Qe,Ee.polyline=function(e,t){return new Qe(e,t)},Ee.Polygon=tn,Ee.polygon=function(e,t){return new tn(e,t)},Ee.Rectangle=xn,Ee.rectangle=function(e,t){return new xn(e,t)},Ee.Map=we,Ee.map=function(e,t){return new we(e,t)}});</script><dom-module id="leaflet-css" assetpath="../leaflet-map/"><template><style>.leaflet-pane,
      .leaflet-tile,
      .leaflet-marker-icon,
      .leaflet-marker-shadow,
      .leaflet-tile-container,
      .leaflet-pane>svg,
      .leaflet-pane>canvas,
      .leaflet-zoom-box,
      .leaflet-image-layer,
      .leaflet-layer{position:absolute;left:0;top:0;}.leaflet-container{overflow:hidden;}.leaflet-tile,
      .leaflet-marker-icon,
      .leaflet-marker-shadow{-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-user-drag:none;}.leaflet-safari .leaflet-tile{image-rendering:-webkit-optimize-contrast;}.leaflet-safari .leaflet-tile-container{width:1600px;height:1600px;-webkit-transform-origin:0 0;}.leaflet-marker-icon,
      .leaflet-marker-shadow{display:block;}.leaflet-container .leaflet-overlay-pane svg,
      .leaflet-container .leaflet-marker-pane img,
      .leaflet-container .leaflet-shadow-pane img,
      .leaflet-container .leaflet-tile-pane img,
      .leaflet-container img.leaflet-image-layer{max-width:none !important;}.leaflet-container.leaflet-touch-zoom{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y;}.leaflet-container.leaflet-touch-drag{-ms-touch-action:pinch-zoom;}.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom{-ms-touch-action:none;touch-action:none;}.leaflet-container{-webkit-tap-highlight-color:transparent;}.leaflet-container a{-webkit-tap-highlight-color:rgba(51, 181, 229, 0.4);}.leaflet-tile{filter:inherit;visibility:hidden;}.leaflet-tile-loaded{visibility:inherit;}.leaflet-zoom-box{width:0;height:0;-moz-box-sizing:border-box;box-sizing:border-box;z-index:800;}.leaflet-overlay-pane svg{-moz-user-select:none;}.leaflet-pane{z-index:400;}.leaflet-tile-pane{z-index:200;}.leaflet-overlay-pane{z-index:400;}.leaflet-shadow-pane{z-index:500;}.leaflet-marker-pane{z-index:600;}.leaflet-tooltip-pane{z-index:650;}.leaflet-popup-pane{z-index:700;}.leaflet-map-pane canvas{z-index:100;}.leaflet-map-pane svg{z-index:200;}.leaflet-vml-shape{width:1px;height:1px;}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute;}.leaflet-control{position:relative;z-index:800;pointer-events:visiblePainted;pointer-events:auto;}.leaflet-top,
      .leaflet-bottom{position:absolute;z-index:1000;pointer-events:none;}.leaflet-top{top:0;}.leaflet-right{right:0;}.leaflet-bottom{bottom:0;}.leaflet-left{left:0;}.leaflet-control{float:left;clear:both;}.leaflet-right .leaflet-control{float:right;}.leaflet-top .leaflet-control{margin-top:10px;}.leaflet-bottom .leaflet-control{margin-bottom:10px;}.leaflet-left .leaflet-control{margin-left:10px;}.leaflet-right .leaflet-control{margin-right:10px;}.leaflet-fade-anim .leaflet-tile{will-change:opacity;}.leaflet-fade-anim .leaflet-popup{opacity:0;-webkit-transition:opacity 0.2s linear;-moz-transition:opacity 0.2s linear;-o-transition:opacity 0.2s linear;transition:opacity 0.2s linear;}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup{opacity:1;}.leaflet-zoom-animated{-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0;}.leaflet-zoom-anim .leaflet-zoom-animated{will-change:transform;}.leaflet-zoom-anim .leaflet-zoom-animated{-webkit-transition:-webkit-transform 0.25s cubic-bezier(0, 0, 0.25, 1);-moz-transition:-moz-transform 0.25s cubic-bezier(0, 0, 0.25, 1);-o-transition:-o-transform 0.25s cubic-bezier(0, 0, 0.25, 1);transition:transform 0.25s cubic-bezier(0, 0, 0.25, 1);}.leaflet-zoom-anim .leaflet-tile,
      .leaflet-pan-anim .leaflet-tile{-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none;}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden;}.leaflet-interactive{cursor:pointer;}.leaflet-grab{cursor:-webkit-grab;cursor:-moz-grab;}.leaflet-crosshair,
      .leaflet-crosshair .leaflet-interactive{cursor:crosshair;}.leaflet-popup-pane,
      .leaflet-control{cursor:auto;}.leaflet-dragging .leaflet-grab,
      .leaflet-dragging .leaflet-grab .leaflet-interactive,
      .leaflet-dragging .leaflet-marker-draggable{cursor:move;cursor:-webkit-grabbing;cursor:-moz-grabbing;}.leaflet-marker-icon,
      .leaflet-marker-shadow,
      .leaflet-image-layer,
      .leaflet-pane>svg path,
      .leaflet-tile-container{pointer-events:none;}.leaflet-marker-icon.leaflet-interactive,
      .leaflet-image-layer.leaflet-interactive,
      .leaflet-pane>svg path.leaflet-interactive{pointer-events:visiblePainted;pointer-events:auto;}.leaflet-container{background:#ddd;outline:0;}.leaflet-container a{color:#0078A8;}.leaflet-container a.leaflet-active{outline:2px solid orange;}.leaflet-zoom-box{border:2px dotted #38f;background:rgba(255, 255, 255, 0.5);}.leaflet-container{font:12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;}.leaflet-bar{box-shadow:0 1px 5px rgba(0, 0, 0, 0.65);border-radius:4px;}.leaflet-bar a,
      .leaflet-bar a:hover{background-color:#fff;border-bottom:1px solid #ccc;width:26px;height:26px;line-height:26px;display:block;text-align:center;text-decoration:none;color:black;}.leaflet-bar a,
      .leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block;}.leaflet-bar a:hover{background-color:#f4f4f4;}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px;}.leaflet-bar a:last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-bottom:none;}.leaflet-bar a.leaflet-disabled{cursor:default;background-color:#f4f4f4;color:#bbb;}.leaflet-touch .leaflet-bar a{width:30px;height:30px;line-height:30px;}.leaflet-touch .leaflet-bar a:first-child{border-top-left-radius:2px;border-top-right-radius:2px;}.leaflet-touch .leaflet-bar a:last-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px;}.leaflet-control-zoom-in,
      .leaflet-control-zoom-out{font:bold 18px 'Lucida Console', Monaco, monospace;text-indent:1px;}.leaflet-touch .leaflet-control-zoom-in,
      .leaflet-touch .leaflet-control-zoom-out{font-size:22px;}.leaflet-control-layers{box-shadow:0 1px 5px rgba(0, 0, 0, 0.4);background:#fff;border-radius:5px;}.leaflet-control-layers-toggle{background-image:url(images/layers.png);width:36px;height:36px;}.leaflet-retina .leaflet-control-layers-toggle{background-image:url(images/layers-2x.png);background-size:26px 26px;}.leaflet-touch .leaflet-control-layers-toggle{width:44px;height:44px;}.leaflet-control-layers .leaflet-control-layers-list,
      .leaflet-control-layers-expanded .leaflet-control-layers-toggle{display:none;}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative;}.leaflet-control-layers-expanded{padding:6px 10px 6px 6px;color:#333;background:#fff;}.leaflet-control-layers-scrollbar{overflow-y:scroll;overflow-x:hidden;padding-right:5px;}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px;}.leaflet-control-layers label{display:block;}.leaflet-control-layers-separator{height:0;border-top:1px solid #ddd;margin:5px -10px 5px -6px;}.leaflet-default-icon-path{background-image:url(images/marker-icon.png);}.leaflet-container .leaflet-control-attribution{background:#fff;background:rgba(255, 255, 255, 0.7);margin:0;}.leaflet-control-attribution,
      .leaflet-control-scale-line{padding:0 5px;color:#333;}.leaflet-control-attribution a{text-decoration:none;}.leaflet-control-attribution a:hover{text-decoration:underline;}.leaflet-container .leaflet-control-attribution,
      .leaflet-container .leaflet-control-scale{font-size:11px;}.leaflet-left .leaflet-control-scale{margin-left:5px;}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px;}.leaflet-control-scale-line{border:2px solid #777;border-top:none;line-height:1.1;padding:2px 5px 1px;font-size:11px;white-space:nowrap;overflow:hidden;-moz-box-sizing:border-box;box-sizing:border-box;background:#fff;background:rgba(255, 255, 255, 0.5);}.leaflet-control-scale-line:not(:first-child){border-top:2px solid #777;border-bottom:none;margin-top:-2px;}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777;}.leaflet-touch .leaflet-control-attribution,
      .leaflet-touch .leaflet-control-layers,
      .leaflet-touch .leaflet-bar{box-shadow:none;}.leaflet-touch .leaflet-control-layers,
      .leaflet-touch .leaflet-bar{border:2px solid rgba(0, 0, 0, 0.2);background-clip:padding-box;}.leaflet-popup{position:absolute;text-align:center;margin-bottom:20px;}.leaflet-popup-content-wrapper{padding:1px;text-align:left;border-radius:12px;}.leaflet-popup-content{margin:13px 19px;line-height:1.4;}.leaflet-popup-content p{margin:18px 0;}.leaflet-popup-tip-container{width:40px;height:20px;position:absolute;left:50%;margin-left:-20px;overflow:hidden;pointer-events:none;}.leaflet-popup-tip{width:17px;height:17px;padding:1px;margin:-10px auto 0;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg);}.leaflet-popup-content-wrapper,
      .leaflet-popup-tip{background:white;color:#333;box-shadow:0 3px 14px rgba(0, 0, 0, 0.4);}.leaflet-container a.leaflet-popup-close-button{position:absolute;top:0;right:0;padding:4px 4px 0 0;border:none;text-align:center;width:18px;height:14px;font:16px/14px Tahoma, Verdana, sans-serif;color:#c3c3c3;text-decoration:none;font-weight:bold;background:transparent;}.leaflet-container a.leaflet-popup-close-button:hover{color:#999;}.leaflet-popup-scrolled{overflow:auto;border-bottom:1px solid #ddd;border-top:1px solid #ddd;}.leaflet-oldie .leaflet-popup-content-wrapper{zoom:1;}.leaflet-oldie .leaflet-popup-tip{width:24px;margin:0 auto;-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";filter: progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678);}.leaflet-oldie .leaflet-popup-tip-container{margin-top:-1px;}.leaflet-oldie .leaflet-control-zoom,
      .leaflet-oldie .leaflet-control-layers,
      .leaflet-oldie .leaflet-popup-content-wrapper,
      .leaflet-oldie .leaflet-popup-tip{border:1px solid #999;}.leaflet-div-icon{background:#fff;border:1px solid #666;}.leaflet-tooltip{position:absolute;padding:6px;background-color:#fff;border:1px solid #fff;border-radius:3px;color:#222;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;box-shadow:0 1px 3px rgba(0, 0, 0, 0.4);}.leaflet-tooltip.leaflet-clickable{cursor:pointer;pointer-events:auto;}.leaflet-tooltip-top:before,
      .leaflet-tooltip-bottom:before,
      .leaflet-tooltip-left:before,
      .leaflet-tooltip-right:before{position:absolute;pointer-events:none;border:6px solid transparent;background:transparent;content:"";}.leaflet-tooltip-bottom{margin-top:6px;}.leaflet-tooltip-top{margin-top:-6px;}.leaflet-tooltip-bottom:before,
      .leaflet-tooltip-top:before{left:50%;margin-left:-6px;}.leaflet-tooltip-top:before{bottom:0;margin-bottom:-12px;border-top-color:#fff;}.leaflet-tooltip-bottom:before{top:0;margin-top:-12px;margin-left:-6px;border-bottom-color:#fff;}.leaflet-tooltip-left{margin-left:-6px;}.leaflet-tooltip-right{margin-left:6px;}.leaflet-tooltip-left:before,
      .leaflet-tooltip-right:before{top:50%;margin-top:-6px;}.leaflet-tooltip-left:before{right:0;margin-right:-12px;border-left-color:#fff;}.leaflet-tooltip-right:before{left:0;margin-left:-12px;border-right-color:#fff;}</style></template></dom-module><dom-module id="leaflet-map" assetpath="../leaflet-map/"><template><style include="leaflet-css">:host{display:block;}:host #map{height:100%;width:100%;}</style><div id="map"></div><slot id="markers" select="*"></slot></template></dom-module><script>'use strict';Polymer({is:'leaflet-map',properties:{latitude:{type:Number,value:51,reflectToAttribute:!0,notify:!0,observer:'_viewChanged'},longitude:{type:Number,value:0,reflectToAttribute:!0,notify:!0,observer:'_viewChanged'},zoom:{type:Number,value:-1,reflectToAttribute:!0,observer:'_viewChanged'},minZoom:{type:Number,value:0},maxZoom:{type:Number,value:9007199254740992},noDragging:{type:Boolean,value:!1},noTouchZoom:{type:Boolean,value:!1},noScrollWheelZoom:{type:Boolean,value:!1},noDoubleClickZoom:{type:Boolean,value:!1},noBoxZoom:{type:Boolean,value:!1},noTap:{type:Boolean,value:!1},tapTolerance:{type:Number,value:15},noTrackResize:{type:Boolean,value:!1},worldCopyJump:{type:Boolean,value:!1},noClosePopupOnClick:{type:Boolean,value:!1},noBounceAtZoomLimits:{type:Boolean,value:!1},noKeyboard:{type:Boolean,value:!1},keyboardPanOffset:{type:Number,value:80},keyboardZoomOffset:{type:Number,value:1},noInertia:{type:Boolean,value:!1},inertiaDeceleration:{type:Number,value:3e3},inertiaMaxSpeed:{type:Number,value:1500},noZoomControl:{type:Boolean,value:!1},noAttributionControl:{type:Boolean,value:!1},zoomAnimationThreshold:{type:Number,value:4},fitToMarkers:{type:Boolean,value:!0,observer:'_fitToMarkers'},useGoogleMap:{type:Boolean,value:!1},googleApiKey:{type:String},map:{type:Object}},attached:function(){if(this._isAttached=!0,this.useGoogleMap&&this.googleApiKey){console.log('[leaflet-core] attached - Go grab the dependencies!',this.googleApiKey);let a=Promise.resolve();a.then(this._getDependency(this._getDependencyPromiseResolve('google.maps',`https://maps.googleapis.com/maps/api/js?libraries=maps&key=${this.googleApiKey}`))).then(this._getDependency(this._getDependencyPromiseResolve('L.GridLayer.GoogleMutant',`${this.importPath}../Leaflet.GridLayer.GoogleMutant/Leaflet.GoogleMutant.js`))).then(this.domReady.bind(this))}else this.useGoogleMap=!1,console.log('[leaflet-core] attached - Using OSM default',this.googleApiKey),this.domReady()},guessLeafletImagePath:function(){if(!L.Icon.Default.imagePath){var a,b,c,d,e,f=document.getElementsByTagName('link'),g=/[\/^]leaflet-map.html$/;for(a=0,b=f.length;a<b;a++)c=f[a].href,d=c.match(g),d&&(e=c.split(g)[0],L.Icon.Default.imagePath=(e?e+'/':'')+'../leaflet/dist/images')}},domReady:function(){console.log('[leaflet-core] domReady'),this.guessLeafletImagePath();var a=L.map(this.$.map,{minZoom:this.minZoom,maxZoom:this.maxZoom,dragging:!this.noDragging,touchZoom:!this.noTouchZoom,scrollWheelZoom:!this.noScrollWheelZoom,doubleClickZoom:!this.noDoubleClickZoom,boxZoom:!this.noBoxZoom,tap:!this.noTap,tapTolerance:this.tapTolerance,trackResize:!this.noTrackResize,worldCopyJump:this.worldCopyJump,closePopupOnClick:!this.noClosePopupOnClick,bounceAtZoomLimits:!this.noBounceAtZoomLimits,keyboard:!this.noKeyboard,keyboardPanOffset:this.keyboardPanOffset,keyboardZoomOffset:this.keyboardZoomOffset,inertia:!this.noInertia,inertiaDeceleration:this.inertiaDeceleration,inertiaMaxSpeed:this.inertiaMaxSpeed,zoomControl:!this.noZoomControl,attributionControl:!this.noAttributionControl,zoomAnimationThreshold:this.zoomAnimationThreshold});if(this.map=a,this.useGoogleMap)L.gridLayer.googleMutant({type:'roadmap'}).addTo(a);this.fire('map-ready'),a.on('click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu focus blur preclick load unload viewreset movestart move moveend dragstart drag dragend zoomstart zoomend zoomlevelschange resize autopanstart layeradd layerremove baselayerchange overlayadd overlayremove locationfound locationerror popupopen popupclose',function(a){this.fire(a.type,a)},this),a.setView([this.latitude,this.longitude],this.zoom),a.on('moveend',function(){this._ignoreViewChange=!0,this.longitude=a.getCenter().lng,this.latitude=a.getCenter().lat,this._ignoreViewChange=!1},this),a.on('zoomend',function(){this.zoom=a.getZoom()},this),-1===this.zoom&&this.map.fitWorld();for(var b,c=!0,d=0;d<this.children.length;d++)b=this.children[d],b.isLayer&&b.isLayer()&&(c=!1);c&&!this.useGoogleMap&&L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery &copy; <a href="http://mapbox.com">Mapbox</a>',maxZoom:18}).addTo(this.map),this.registerMapOnChildren(),this._mutationObserver=new MutationObserver(this.registerMapOnChildren.bind(this)),this._mutationObserver.observe(this,{childList:!0})},detached:function(){this._mutationObserver.disconnect()},_viewChanged:function(){this.map&&!this._ignoreViewChange&&setTimeout(function(){this.map.setView(L.latLng(this.latitude,this.longitude),this.zoom)}.bind(this),1)},registerMapOnChildren:function(){for(var a=0;a<this.children.length;a++)this.children[a].container=this.map;this._fitToMarkers()},_fitToMarkers:function(){if(this.map&&this.fitToMarkers){for(var a,b=[],c=0;a=this.children[c];c++)a.latitude&&a.longitude&&b.push([a.latitude,a.longitude]);0<b.length&&(this.map.fitBounds(b),this.map.invalidateSize())}},_getDependency:function(a){return console.log('[leaflet-core] _getDependency'),()=>new Promise(a)},_windowHasObject:function(a){let b=a.split('.'),c='window';for(let d in b)if(c+=`.${b[d]}`,void 0==eval(c))return!1;return!0},_getDependencyPromiseResolve:function(a,b){return(c)=>{console.log('[leaflet-core] _getDependencyPromiseResolve',a,b),this._windowHasObject(a)?(this.dispatchEvent(new CustomEvent('dependency-is-ready',{detail:{name:a,url:b}})),c()):window[`_downloading_${a}`]?this._waitToLoadDependency(a,b,c):(window[`_downloading_${a}`]=!0,this._loadDependency(a,b,c))}},_loadDependency:function(a,b,c){var d=document.createElement('script');d.src=this.resolveUrl(b),d.onload=()=>{this._waitToLoadDependency(a,b,c)},document.head.appendChild(d)},_waitToLoadDependency:function(a,b,c){this._windowHasObject(a)?(this.dispatchEvent(new CustomEvent('dependency-is-ready',{detail:{name:a,url:b}})),c()):window.setTimeout(()=>{this._waitToLoadDependency(a,b,c)},5)},_loadScript:function(a,b){var c=document.createElement('script');c.type='text/javascript',c.readyState?c.onreadystatechange=function(){('loaded'===c.readyState||'complete'===c.readyState)&&(c.onreadystatechange=null,b())}:c.onload=function(){b()},c.src=a,document.getElementsByTagName('head')[0].appendChild(c)},toGeoJSON:function(){for(var a,b={type:'FeatureCollection',features:[]},c=0;a=this.features[c];c++)b.features.push(a.feature.toGeoJSON());return b}});</script><script>"use strict";var leafletMap=leafletMap||{};leafletMap.LeafletPopupContent={attached:function(){MutationObserver&&!this.observer_&&(this.observer_=new MutationObserver(this.updatePopupContent.bind(this)),this.observer_.observe(this,{childList:!0,characterData:!0,attributes:!0,subtree:!0}))},updatePopupContent:function(){if(this.feature){this.feature.unbindPopup();var a=Polymer.dom(this).innerHTML.replace(/<\/?leaflet-point[^>]*>/g,"").trim();a&&this.feature.bindPopup(a)}},detached:function(){this.observer_&&this.observer_.disconnect()}};</script><script>"use strict";var leafletMap=leafletMap||{};window.leafletMap.LeafletPath={properties:{noStroke:{type:Boolean,value:!1},color:{type:String,value:"#03f"},weight:{type:Number,value:5},opacity:{type:Number,value:0.5},fill:{type:Boolean,value:null},fillColor:{type:String,value:null},fillOpacity:{type:Number,value:0.2},dashArray:{type:String,value:null},lineCap:{type:String,value:null},lineJoin:{type:String,value:null},noClickable:{type:Boolean,value:!1},pointerEvents:{type:String,value:null},className:{type:String,value:""}},getPathOptions:function(){return{stroke:!this.noStroke,color:this.color,weight:this.weight,opacity:this.opacity,fill:this.fill,fillColor:this.fillColor,fillOpacity:this.fillOpacity,dashArray:this.dashArray,lineCap:this.lineCap,lineJoin:this.lineJoin,clickable:!this.noClickable,pointerEvents:this.pointerEvents,className:this.className}}},window.leafletMap.LeafletPointContent={attached:function(){MutationObserver&&!this.observer_&&(this.observer_=new MutationObserver(this.updatePointContent.bind(this)),this.observer_.observe(this,{childList:!0,characterData:!0,attributes:!0,subtree:!0}))},updatePointContent:function(){if(this.feature){var a,b=[],c=this.children;for(a=0;a<c.length;a++)"leaflet-point"==c[a].localName&&b.push(L.latLng(c[a].getAttribute("latitude"),c[a].getAttribute("longitude")));this.feature.setLatLngs(b)}},detached:function(){this.observer_&&this.observer_.disconnect()}};</script><dom-module id="leaflet-circle" assetpath="../leaflet-map/"><template><style>:host{display:none;}</style></template></dom-module><script>'use strict';Polymer({is:'leaflet-circle',feature:null,behaviors:[leafletMap.LeafletPath,leafletMap.LeafletPopupContent],properties:{longitude:{type:Number,observer:'_updatePosition'},latitude:{type:Number,observer:'_updatePosition'},radius:{type:Number,value:100,observer:'_updateRadius'},container:{type:Object,observer:'_containerChanged'}},_containerChanged:function(){this.latitude&&this.longitude&&this.container&&(this.feature=L.circle([this.latitude,this.longitude],this.radius,this.getPathOptions()),this.feature.addTo(this.container),this.updatePopupContent(),this.feature.on('click dblclick mousedown mouseover mouseout contextmenu add remove popupopen popupclose',function(a){this.fire(a.type,a)},this))},_updatePosition:function(){this.feature&&null!=this.latitude&&null!=this.longitude&&this.feature.setLatLng(L.latLng(this.latitude,this.longitude))},_updateRadius:function(){this.feature&&null!=this.radius&&this.feature.setRadius(this.radius)},detached:function(){this.container&&this.feature&&this.container.removeLayer(this.feature)}});</script><dom-module id="leaflet-point" assetpath="../leaflet-map/"><script>Polymer({is:"leaflet-point",properties:{latitude:{type:Number,value:0,reflectToAttribute:!0},longitude:{type:Number,value:0,reflectToAttribute:!0}}});</script></dom-module><dom-module id="leaflet-polyline" assetpath="../leaflet-map/"><style>:host{display:none;}</style><template><content id="points" select="leaflet-point"></content></template></dom-module><script>'use strict';Polymer({is:'leaflet-polyline',behaviors:[leafletMap.LeafletPath,leafletMap.LeafletPointContent,leafletMap.LeafletPopupContent],feature:null,properties:{container:{type:Object,observer:'_containerChanged'}},_containerChanged:function(){this.container&&(this.feature=L.polyline([],this.getPathOptions()),this.feature.addTo(this.container),this.updatePointContent(),this.updatePopupContent(),this.feature.on('click dblclick mousedown mouseover mouseout contextmenu add remove popupopen popupclose',function(a){this.fire(a.type,a)},this))},detached:function(){this.container&&this.feature&&this.container.removeLayer(this.feature)}});</script><dom-module id="leaflet-polygon" assetpath="../leaflet-map/"><style>:host{display:none;}</style><template><content id="points" select="leaflet-point"></content></template></dom-module><script>'use strict';Polymer({is:'leaflet-polygon',behaviors:[leafletMap.LeafletPath,leafletMap.LeafletPointContent,leafletMap.LeafletPopupContent],properties:{container:{type:Object,observer:'_containerChanged'}},feature:null,_containerChanged:function(){if(this.container){var a=this.getPathOptions();('undefined'===typeof a.fill||null===a.fill)&&(a.fill=!0),this.feature=L.polygon([],a),this.feature.addTo(this.container),this.updatePointContent(),this.updatePopupContent(),this.feature.on('click dblclick mousedown mouseover mouseout contextmenu add remove popupopen popupclose',function(a){this.fire(a.type,a)},this)}},detached:function(){this.container&&this.feature&&this.container.removeLayer(this.feature)}});</script><dom-module id="leaflet-scale-control" assetpath="../leaflet-map/"><template><style>:host{display:none;}</style></template><script>"use strict";Polymer({is:"leaflet-scale-control",properties:{position:{type:String,value:"bottomleft"},maxWidth:{type:Number,value:100},metric:{type:Boolean,value:!1},imperial:{type:Boolean,value:!1},updateWhenIdle:{type:Boolean,value:!1},container:{type:Object,observer:"_containerChanged"}},_containerChanged:function(){if(this.container){var a=L.control.scale({position:this.position,maxWidth:this.maxWidth,metric:this.metric||!this.imperial,imperial:this.imperial||!this.metric,updateWhenIdle:this.updateWhenIdle});this.control=a,this.control.addTo(this.container)}},detached:function(){this.container&&this.control&&this.container.removeControl(this.control)}});</script></dom-module><script>"use strict";var leafletMap=leafletMap||{};window.leafletMap.LeafletILayer={isLayer:function(){return!0}},window.leafletMap.LeafletTileLayer={properties:{minZoom:{type:Number,value:0},maxZoom:{type:Number,value:18},maxNativeZoom:{type:Number,value:null},tileSize:{type:Number,value:256},subdomains:{type:String,value:"abc"},errorTileUrl:{type:String,value:""},attribution:{type:String,value:""},tms:{type:Number,value:!1},continuousWorld:{type:Boolean,value:!1},noWrap:{type:Boolean,value:!1},zoomOffset:{type:Number,value:0},zoomReverse:{type:Boolean,value:!1},opacity:{type:Number,value:1,observer:"_opacityChanged"},zIndex:{type:Number,value:null,observer:"_zIndexChanged"},detectRetina:{type:Boolean,value:!1},reuseTiles:{type:Boolean,value:!1}},_opacityChanged:function(){this.layer&&this.layer.setOpacity(this.opacity)},_zIndexChanged:function(){this.layer&&this.layer.setZIndex(this.zIndex)},detached:function(){this.container&&this.layer&&this.container.removeLayer(this.layer)}};</script><dom-module id="leaflet-tilelayer" assetpath="../leaflet-map/"><style>:host{display:none;}</style><template></template></dom-module><script>"use strict";Polymer({is:"leaflet-tilelayer",behaviors:[leafletMap.LeafletILayer,leafletMap.LeafletTileLayer],properties:{url:{type:String,value:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",observer:"_urlChanged"},container:{type:Object,observer:"_containerChanged"}},_containerChanged:function(){if(this.container){var a=this.url.replace(/%7B([sxyz])%7D/g,"{$1}"),b=L.tileLayer(a,{attribution:Polymer.dom(this).innerHTML+this.attribution,minZoom:this.minZoom,maxZoom:this.maxZoom,maxNativeZoom:this.maxNativeZoom,tileSize:this.tileSize,subdomains:this.subdomains,errorTileUrl:this.errorTileUrl,tms:this.tms,continuousWorld:this.continuousWorld,noWrap:this.noWrap,zoomOffset:this.zoomOffset,zoomReverse:this.zoomReverse,opacity:this.opacity,zIndex:this.zIndex,detectRetina:this.detectRetina,reuseTiles:this.reuseTiles});this.layer=b,b.on("loading load tileloadstart tileload tileunload",function(a){this.fire(a.type,a)},this),this.layer.addTo(this.container)}},_urlChanged:function(){if(this.layer){var a=this.url.replace(/%7B([sxyz])%7D/g,"{$1}");this.layer.setUrl(a)}}});</script><dom-module id="leaflet-tilelayer-wms" assetpath="../leaflet-map/"><style>:host{display:none;}</style><template></template></dom-module><script>'use strict';Polymer({is:'leaflet-tilelayer-wms',behaviors:[leafletMap.LeafletILayer,leafletMap.LeafletTileLayer],properties:{url:{type:String,observer:'_urlChanged'},layers:{type:String,value:''},styles:{type:String,value:''},format:{type:String,value:'image/jpeg'},transparent:{type:Boolean,value:!1},version:{type:String,value:'1.1.1'},crs:Object,container:{type:Object,observer:'_containerChanged'}},_containerChanged:function(){if(this.container){var a=L.tileLayer.wms(this.url,{attribution:Polymer.dom(this).innerHTML+this.attribution,minZoom:this.minZoom,maxZoom:this.maxZoom,maxNativeZoom:this.maxNativeZoom,tileSize:this.tileSize,subdomains:this.subdomains,errorTileUrl:this.errorTileUrl,tms:this.tms,continuousWorld:this.continuousWorld,noWrap:this.noWrap,zoomOffset:this.zoomOffset,zoomReverse:this.zoomReverse,opacity:this.opacity,zIndex:this.zIndex,detectRetina:this.detectRetina,reuseTiles:this.reuseTiles,layers:this.layers,styles:this.styles,format:this.format,transparent:this.transparent,version:this.version,crs:this.crs});this.layer=a,a.on('loading load tileloadstart tileload tileunload',function(a){this.fire(a.type,a)},this),this.layer.addTo(this.container)}},_urlChanged:function(){this.layer&&this.layer.setUrl(this.url)}});</script><dom-module id="leaflet-layer-group" assetpath="../leaflet-map/"><template></template></dom-module><script>'use strict';Polymer({is:'leaflet-layer-group',properties:{container:{type:Object,observer:'_containerChanged'}},ready:function(){this._mutationObserver=new MutationObserver(this.registerContainerOnChildren.bind(this)),this._mutationObserver.observe(this,{childList:!0})},_containerChanged:function(){if(this.container){var a=L.layerGroup();this.feature=a,this.feature.addTo(this.container),this.registerContainerOnChildren()}},registerContainerOnChildren:function(){for(var a=0;a<this.children.length;a++)this.children[a].container=this.feature},detached:function(){this.container&&this.feature&&this.container.removeLayer(this.feature),this._mutationObserver.disconnect()}});</script><dom-element id="leaflet-geojson"><template><style>:host{display:none;}</style></template></dom-element><script>"use strict";Polymer({is:"leaflet-geojson",behaviors:[leafletMap.LeafletILayer],properties:{data:{type:Object,observer:"_dataChanged"},container:{type:Object,observer:"_containerChanged"},color:{type:String,value:"#03f"},weight:{type:Number,value:5},opacity:{type:Number,value:0.5},fill:{type:Boolean,value:null},fillColor:{type:String,value:null},fillOpacity:{type:Number,value:0.2},dashArray:{type:String,value:null},lineCap:{type:String,value:null},lineJoin:{type:String,value:null}},_containerChanged:function(){this.container&&this.data&&this._dataChanged()},_dataChanged:function(){this.container&&this.data&&(this.feature&&this.container.removeLayer(this.feature),this.feature=L.geoJson(this.data),this.feature.addTo(this.container).setStyle({color:this.color,weight:this.weight,opacity:this.opacity,fill:this.fill,fillColor:this.fillColor,fillOpacity:this.fillOpacity,dashArray:this.dashArray,lineCap:this.lineCap,lineJoin:this.lineJoin}))},detached:function(){this.container&&this.feature&&this.container.removeLayer(this.feature)}});</script><dom-module id="leaflet-icon" assetpath="../leaflet-map/"><template><style>:host{display:none;}</style></template><script>'use strict';Polymer({is:'leaflet-icon',properties:{iconUrl:{type:String,observer:'_attributeChanged'},iconRetinaUrl:{type:String,observer:'_attributeChanged'},iconWidth:{type:Number,observer:'_attributeChanged'},iconHeight:{type:Number,observer:'_attributeChanged'},iconAnchorX:{type:Number,observer:'_attributeChanged'},iconAnchorY:{type:Number,observer:'_attributeChanged'},shadowUrl:{type:String,observer:'_attributeChanged'},shadowRetinaUrl:{type:String,observer:'_attributeChanged'},shadowWidth:{type:Number,observer:'_attributeChanged'},shadowHeight:{type:Number,observer:'_attributeChanged'},shadowAnchorX:{type:Number,observer:'_attributeChanged'},shadowAnchorY:{type:Number,observer:'_attributeChanged'},popupAnchorX:{type:Number,observer:'_attributeChanged'},popupAnchorY:{type:Number,observer:'_attributeChanged'},className:{type:String,value:'',observer:'_attributeChanged'}},icon_:null,getIcon:function(){if(this.icon_)return this.icon_;var a={iconUrl:this.iconUrl,iconRetinaUrl:this.iconRetinaUrl,shadowUrl:this.shadowUrl,shadowRetinaUrl:this.shadowRetinaUrl,className:this.className};return this.iconWidth&&this.iconHeight&&(a.iconSize=L.point(this.iconWidth,this.iconHeight)),this.iconAnchorX&&this.iconAnchorY&&(a.iconAnchor=L.point(this.iconAnchorX,this.iconAnchorY)),this.shadowWidth&&this.shadowHeight&&(a.shadowSize=L.point(this.shadowWidth,this.shadowHeight)),this.shadowAnchorX&&this.shadowAnchorY&&(a.shadowAnchor=L.point(this.shadowAnchorX,this.shadowAnchorY)),this.popupAnchorX&&this.popupAnchorY&&(a.popupAnchor=L.point(this.popupAnchorX,this.popupAnchorY)),this.icon_=L.icon(a),this.icon_},_attributeChanged:function(){this.icon_=null}});</script></dom-module><dom-module id="leaflet-divicon" assetpath="../leaflet-map/"><template><style>:host{display:none;}</style></template><script>'use strict';Polymer({is:'leaflet-divicon',properties:{iconWidth:{type:Number,observer:'_attributeChanged'},iconHeight:{type:Number,observer:'_attributeChanged'},iconAnchorX:{type:Number,observer:'_attributeChanged'},iconAnchorY:{type:Number,observer:'_attributeChanged'},className:{type:String,value:'',observer:'_attributeChanged'}},icon_:null,getIcon:function(){if(this.icon_)return this.icon_;var a={className:this.className,html:Polymer.dom(this).innerHTML};return this.iconWidth&&this.iconHeight&&(a.iconSize=L.point(this.iconWidth,this.iconHeight)),this.iconAnchorX&&this.iconAnchorY&&(a.iconAnchor=L.point(this.iconAnchorX,this.iconAnchorY)),this.icon_=L.divIcon(a),this.icon_},_attributeChanged:function(){this.icon_=null}});</script></dom-module><dom-module id="leaflet-marker" assetpath="../leaflet-map/"><template><style>:host{display:none;}</style></template><script>'use strict';Polymer({is:'leaflet-marker',behaviors:[leafletMap.LeafletPopupContent],properties:{latitude:{type:Number,value:null,reflectToAttribute:!0,notify:!0,observer:'_positionChanged'},longitude:{type:Number,value:null,reflectToAttribute:!0,notify:!0,observer:'_positionChanged'},icon:{type:Object,observer:'_iconChanged'},noClickable:{type:Boolean,value:!1},draggable:{type:Boolean,value:!1},noKeyboard:{type:Boolean,value:!1},title:{type:String,value:''},alt:{type:String,value:''},zIndexOffset:{type:Number,value:0,observer:'_zIndexOffsetChanged'},opacity:{type:Number,value:1,observer:'_opacityChanged'},riseOnHover:{type:Boolean,value:!1},riseoffset:{type:Number,value:250},container:{type:Object,observer:'_containerChanged'}},feature:void 0,observer_:void 0,_containerChanged:function(){if(this.container){var a=L.marker([this.latitude,this.longitude],{clickable:!this.noClickable,draggable:this.draggable,keyboard:!this.noKeyboard,title:this.title,alt:this.alt,zIndexOffset:this.zIndexOffset,opacity:this.opacity,riseOnHover:this.riseOnHover,riseOffset:this.riseOffset});this.feature=a,this._iconChanged(),a.on('click dblclick mousedown mouseover mouseout contextmenu dragstart drag dragend move add remove popupopen popupclose',function(a){this.fire(a.type,a)},this),this.updatePopupContent(),this.feature.addTo(this.container)}},_iconChanged:function(){var a;if(this.icon){if('string'==typeof this.icon){var b=document.getElementById(this.icon);if(null!=b)b.getIcon&&(a=b.getIcon());else try{a=L.icon(JSON.parse(this.icon))}catch(b){a=new L.Icon.Default}}'object'==typeof this.icon&&(this.icon.options?a=this.icon:a=L.icon(this.icon))}a||(a=new L.Icon.Default),this.feature&&this.feature.setIcon(a)},_positionChanged:function(){this.feature&&this.feature.setLatLng(L.latLng(this.latitude,this.longitude))},_zIndexOffsetChanged:function(){this.feature&&this.feature.setZIndexOffset(this.zIndexOffset)},_opacityChanged:function(){this.feature&&this.feature.setOpacity(this.opacity)},detached:function(){this.container&&this.feature&&this.container.removeLayer(this.feature)}});</script></dom-module><dom-module id="leaflet-geolocation" assetpath="../leaflet-map/"><template><style>:host{display:none;}</style></template></dom-module><script>'use strict';Polymer({is:'leaflet-geolocation',properties:{watch:{type:Boolean,value:!1},setView:{type:Boolean,value:!1},maxZoom:{type:Number,value:Infinity},timeout:{type:Number,value:1e4},maximumAge:{type:Number,value:0},enableHighAccuracy:{type:Boolean,value:!1},latitude:{type:Number,value:null,notify:!0},longitude:{type:Number,value:null,notify:!0},bounds:{type:Number,value:null,notify:!0},accuracy:{type:Number,value:null,notify:!0},altitude:{type:Number,value:null,notify:!0},altitudeAccuracy:{type:Number,value:null,notify:!0},heading:{type:Number,value:null,notify:!0},speed:{type:Number,value:null,notify:!0},timestamp:{type:Number,value:null,notify:!0},container:{type:Object,observer:'_containerChanged'}},_containerChanged:function(){this.container&&(this.container.on('locationfound locationerror',function(a){this.fire(a.type,a)},this),this.container.on('locationfound',function(a){this.latitude=a.latlng.lat,this.longitude=a.latlng.lng,this.bounds=a.bounds,this.accuracy=a.accuracy,this.altitude=a.altitude,this.altitudeAccuracy=a.altitudeAccuracy,this.heading=a.heading,this.speed=a.speed,this.timestamp=a.timestamp},this),this.container.locate({watch:this.watch,setView:this.setView,maxZoom:this.maxZoom,timeout:this.timeout,maximumAge:this.maximumAge,enableHighAccuracy:this.enableHighAccuracy}))}});</script><script>(function(){"use strict";L.MakiMarkers={icons:["airfield","airport","alcohol-shop","america-football","art-gallery","bakery","bank","bar","baseball","basketball","beer","bicycle","building","bus","cafe","camera","campsite","car","cemetery","chemist","cinema","circle-stroked","circle","city","clothing-store","college","commercial","cricket","cross","dam","danger","disability","dog-park","embassy","emergency-telephone","entrance","farm","fast-food","ferry","fire-station","fuel","garden","golf","grocery","hairdresser","harbor","heart","heliport","hospital","industrial","land-use","laundry","library","lighthouse","lodging","logging","london-underground","marker-stroked","marker","minefield","mobilephone","monument","museum","music","oil-well","park2","park","parking-garage","parking","pharmacy","pitch","place-of-worship","playground","police","polling-place","post","prison","rail-above","rail-light","rail-metro","rail-underground","rail","religious-christian","religious-jewish","religious-muslim","restaurant","roadblock","rocket","school","scooter","shop","skiing","slaughterhouse","soccer","square-stroked","square","star-stroked","star","suitcase","swimming","telephone","tennis","theatre","toilets","town-hall","town","triangle-stroked","triangle","village","warehouse","waste-basket","water","wetland","zoo"],defaultColor:"#0a0",defaultIcon:"circle-stroked",defaultSize:"m",apiUrl:"https://api.tiles.mapbox.com/v3/marker/",smallOptions:{iconSize:[20,50],popupAnchor:[0,-20]},mediumOptions:{iconSize:[30,70],popupAnchor:[0,-30]},largeOptions:{iconSize:[36,90],popupAnchor:[0,-40]}},L.MakiMarkers.Icon=L.Icon.extend({options:{icon:L.MakiMarkers.defaultIcon,color:L.MakiMarkers.defaultColor,size:L.MakiMarkers.defaultSize,shadowAnchor:null,shadowSize:null,shadowUrl:null,className:"maki-marker"},initialize:function(a){var b;switch(a=L.setOptions(this,a),a.size){case"s":L.extend(a,L.MakiMarkers.smallOptions);break;case"l":L.extend(a,L.MakiMarkers.largeOptions);break;default:a.size="m",L.extend(a,L.MakiMarkers.mediumOptions);}b="pin-"+a.size,null!==a.icon&&(b+="-"+a.icon),null!==a.color&&("#"===a.color.charAt(0)&&(a.color=a.color.substr(1)),b+="+"+a.color),a.iconUrl=""+L.MakiMarkers.apiUrl+b+".png",a.iconRetinaUrl=L.MakiMarkers.apiUrl+b+"@2x.png"}}),L.MakiMarkers.icon=function(a){return new L.MakiMarkers.Icon(a)}})();</script><dom-module id="warp10-display-map" assetpath="../warp10-quantumviz/"><template><style>:host{display:block;width:100%;height:100%;position:relative;min-width:480px;min-height:480px;}#map{width:var(--map-width, 100%);height:var(--map-height, 100%);min-width:480px;min-height:480px;}</style><leaflet-map id="map" latitude="{{latitude}}" longitude="{{longitude}}" zoom="{{zoom}}" on-load="_mapLoadedEvt" on-map-ready="_mapReadyEvt" on-resize="_mapResizeEvt" on-viewreset="_mapEvt" use-google-map="[[useGoogleMap]]" google-api-key="[[googleApiKey]]"></leaflet-map></template></dom-module><script>class Warp10DisplayMap extends Polymer.mixinBehaviors([Polymer.IronResizableBehavior],Polymer.Element){static get is(){return'warp10-display-map'}static get properties(){return{data:{type:Object,notify:!0,observer:'_dataChanged'},tiles:{type:Array,observer:'_dataChanged',value:[]},zoom:{type:Number,notify:!0,value:10},longitude:{type:Number,notify:!0},latitude:{type:Number,notify:!0},currentValues:{type:Object,observer:'_currentValuesChanged',notify:!0},annotationsSelectedTimestamp:{type:Number,notify:!0,observer:'_annotationsSelectedTimestampChanged',value:-1},useGoogleMap:{type:Boolean,value:!1},googleApiKey:{type:String},debug:{type:Boolean,value:!1},_DEFAULT_WIDTH:{type:Number,value:640},_DEFAULT_HEIGHT:{type:Number,value:480}}}ready(){super.ready(),this.addEventListener('resize',(a)=>this._onIronResize(a)),this.addEventListener('iron-resize',(a)=>this._onIronResize(a)),this.debug&&(console.log('[warp10-display-map] ready - style',this.style),console.log('[warp10-display-map] ready',`clientWidth: ${this.clientWidth}, clientHeight:${this.clientHeight}`))}connectedCallback(){super.connectedCallback(),this.debug&&console.log('[warp10-display-map] connectedCallback'),this.polylinesBeforeCurrentValue=[],this.polylinesAfterCurrentValue=[],this.currentValuesMarkers=[],this.annotationsMarkers=[],this.positionArraysMarkers=[],window.warp10DisplayMapTools.debug=this.debug,this.debug&&console.log('[warp10-display-map] connectedCallback - attached'),this.isAttached=!0,null!==this.data&&this._dataChanged()}_dataChanged(){this.isAttached&&this.mapLoaded&&(this.debug&&console.log('[warp10-display-map] _dataChanged',this.data),null===this.data?this._removeMapData():this._updateMapData())}_annotationsSelectedTimestampChanged(){var a=Math.floor;if(this.debug&&console.log('[warp10-display-map] _annotationsSelectedTimestampChanged',this.annotationsSelectedTimestamp),this.annotationsMarkers)for(let b=0;b<this.annotationsMarkers.length;b++)for(let c=0;c<this.annotationsMarkers[b].length;c++)this.debug&&console.log('[warp10-display-map] _annotationsSelectedTimestampChanged -','this.annotationsMarkers[i][tick].options.timestamp',this.annotationsMarkers[b][c].options.timestamp),a(this.annotationsMarkers[b][c].options.timestamp/10)===a(this.annotationsSelectedTimestamp/10)?(this.debug&&console.log('[warp10-display-map] _annotationsSelectedTimestampChanged - found',this.annotationsMarkers[b][c]),this.annotationsMarkers[b][c].options.oldStyle=this.annotationsMarkers[b][c].options.fillColor,this.annotationsMarkers[b][c].setStyle({fillColor:'orange'})):this.annotationsMarkers[b][c].options.oldStyle&&(this.annotationsMarkers[b][c].setStyle({fillColor:this.annotationsMarkers[b][c].options.oldStyle}),this.annotationsMarkers[b][c].options.oldStyle=null)}_currentValuesChanged(){var a=Math.floor;if(this.currentValues){this.debug&&console.log('[warp10-display-map] _currentValuesChanged - Current time ',this.currentValues.xValue,'-',new Date(this.currentValues.xValue),'-',new Date(this.currentValues.xValue).getTime());let b=a(new Date(this.currentValues.xValue).getTime()/1e3);this.pathData=this.pathData||[];for(let c=0;c<this.pathData.length;c++)for(let d=0;d<this.pathData[c].path.length;d++)if(this.debug&&console.log('[warp10-display-map] _currentValuesChanged - Do they match? ',b,'-',this.pathData[c].path[d].ts),b<=a(this.pathData[c].path[d].ts/1e3)){this.currentValuesMarkers[c].setLatLng([this.pathData[c].path[d].lat,this.pathData[c].path[d].lon]),this.polylinesBeforeCurrentValue[c].setLatLngs(warp10DisplayMapTools.pathDataToLeaflet(this.pathData[c].path,{to:d})),this.polylinesAfterCurrentValue[c].setLatLngs(warp10DisplayMapTools.pathDataToLeaflet(this.pathData[c].path,{from:d}));break}}}_onIronResize(a){this.resize(),this.debug&&(console.log('[warp10-display-map]_onIronResize',a),console.log('[warp10-display-map] _onIronResize - element clientSizes',this.clientWidth,this.clientHeight),console.log('[warp10-display-map] _onIronResize - map clientSizes',this.$.map.clientWidth,this.$.map.clientHeight),console.log('[warp10-display-map] _onIronResize - map dimensions',this.$.map.style.width,this.$.map.style.height))}_mapLoadedEvt(){this.debug&&console.log('[warp10-display-map] Map loaded!',{obj:this.$.map,map:this.$.map.map,longitude:this.$.map.longitude,latitude:this.$.map.latitude,zoom:this.$.map.zoom,size:{w:this.$.map.style.width,h:this.$.map.style.height}}),this.mapLoaded=!0,null!==this.data&&this._dataChanged()}_mapReadyEvt(){this.debug&&console.log('[warp10-display-map] Map ready!',{obj:this.$.map,map:this.$.map.map,longitude:this.$.map.longitude,latitude:this.$.map.latitude,zoom:this.$.map.zoom,size:{w:this.$.map.style.width,h:this.$.map.style.height}}),this.mapReady=!0,null!==this.data&&this._dataChanged()}_mapResizeEvt(){this.debug&&console.log('[warp10-display-map] Map resize!',{obj:this.$.map,map:this.$.map.map,longitude:this.$.map.longitude,latitude:this.$.map.latitude,zoom:this.$.map.zoom,size:{w:this.$.map.style.width,h:this.$.map.style.height}})}_mapEvt(a){this.debug&&console.log('[warp10-display-map] Map evt!',a,{obj:this.$.map,map:this.$.map.map,longitude:this.$.map.longitude,latitude:this.$.map.latitude,zoom:this.$.map.zoom,size:{w:this.$.map.style.width,h:this.$.map.style.height}})}resize(){this.updateStyles({"--map-height":this.clientHeight+'px'}),this.updateStyles({"--map-width":this.clientWidth+'px'})}_updateMapData(){this.debug&&console.log('[warp10-display-map] _updateMapData',this.data),this.layerGroup&&this._removeMapData(),this.pathData=warp10DisplayMapTools.toLeafletMapPaths(this.data),this.annotationsData=warp10DisplayMapTools.annotationsToLeafletPositions(this.data),this.positionData=warp10DisplayMapTools.toLeafletMapPositionArray(this.data),this.debug&&(console.log('[warp10-display-map] Data changed - path data',this.pathData),console.log('[warp10-display-map] Data changed - position arrays',this.positionData),console.log('[warp10-display-map] Data changed - annotations data',this.annotationsData));let a=this.$.map.map;this.layerGroup=L.layerGroup().addTo(a),this.debug&&console.log('[warp10-display-map] Data changed - map',this.$.map);for(let a,b=0;b<this.pathData.length;b++)a=this._updateGtsPath(this.pathData[b]),this.polylinesBeforeCurrentValue.push(a.beforeCurrentValue),this.polylinesAfterCurrentValue.push(a.afterCurrentValue),this.currentValuesMarkers.push(a.currentValue);this.debug&&console.log('[warp10-display-map] GTS path added',this.pathData);for(let a=0;a<this.annotationsData.length;a++)this.annotationsMarkers.push(this._updateAnnotation(this.annotationsData[a]));this.debug&&console.log('[warp10-display-map] Annotations added',this.annotationsMarkers);for(let a=0;a<this.positionData.length;a++)this.positionArraysMarkers=this._updatePositionArray(this.positionData[a]);if(this.debug&&console.log('[warp10-display-map] Position array added',this.positionArraysMarkers),this.tiles.forEach(function(a){console.log('Adding tiles : ',a),this.addLayer(L.tileLayer(a))},this.layerGroup),0<this.pathData.length||0<this.positionData.length||0<this.annotationsData.length){let b=warp10DisplayMapTools.getBoundsArray(this.pathData,this.positionData,this.annotationsData);this.debug&&console.log('[warp10-display-map] getBoundsArray',b),window.setTimeout(()=>{this.debug&&console.log('[warp10-display-map] invalidateSize',this.map),a.invalidateSize(),this.resize(),1<b.length?(a.fitBounds(L.latLngBounds(b[0],b[1],{padding:[20,20]})),this.debug&&console.log('[warp10-display-map] zoom',this.zoom,a.getZoom()),(0===a.getZoom()||this.zoom<a.getZoom())&&a.setZoom(this.zoom)):a.setView(b[0],this.zoom)},1e3)}else window.setTimeout(()=>{this.debug&&console.log('[warp10-display-map] invalidateSize',this.map),a.invalidateSize(),this.configure()},1e3)}_updateGtsPath(a){let b=L.polyline(warp10DisplayMapTools.pathDataToLeaflet(a.path,{to:0}),{color:a.color,opacity:1});this.layerGroup.addLayer(b);let c=L.polyline(warp10DisplayMapTools.pathDataToLeaflet(a.path,{from:0}),{color:a.color,opacity:0.5});this.layerGroup.addLayer(c);let d;return d=void 0===a.path[0]?L.circleMarker():L.circleMarker([a.path[0].lat,a.path[0].lon],{radius:5,color:'#fff',fillColor:a.color,fillOpacity:1}),this.layerGroup.addLayer(d),{beforeCurrentValue:b,afterCurrentValue:c,currentValue:d}}_updateAnnotation(a){let b,c=[];switch(a.render){case'marker':b=L.MakiMarkers.icon({icon:a.marker,color:a.color,size:'m'});for(let d,e=0;e<a.path.length;e++)d=L.marker(a.path[e],{icon:b,opacity:1}),d.bindPopup(a.path[e].val.toString()),this.layerGroup.addLayer(d),c.push(d);break;case'dots':default:for(let b,d=0;d<a.path.length;d++)b=L.circleMarker(a.path[d],{radius:a.baseRadius,color:a.color,fillColor:a.color,fillOpacity:1,timestamp:a.path[d].ts}),b.bindPopup(a.path[d].val.toString()),this.layerGroup.addLayer(b),this.debug&&console.log('[warp10-display-map] _plotAnnotation - gts',a),c.push(b);}return c}_updatePositionArray(a){this.debug&&console.log('[warp10-display-map] _plotPositionArray - item',a);let b,c,d,e,f=[];switch(a.render){case'path':b=L.polyline(a.positions,{color:a.color,opacity:1}),this.layerGroup.addLayer(b),f.push(b);break;case'marker':c=L.MakiMarkers.icon({icon:a.key,color:a.color,size:'m'});for(let b,d=0;d<a.positions.length;d++)b=L.marker({lat:a.positions[d][0],lon:a.positions[d][1]},{icon:c,opacity:1}),this.layerGroup.addLayer(b),f.push(b);break;case'coloredWeightedDots':d=[],e=[];for(let b=0;b<a.numColorSteps;b++)d[b]=0,e[b]=0;for(let b=0;b<a.positions.length;b++){this.debug&&console.log('[warp10-display-map] _plotPositionArray, coloredWeightedDots',{j:b,gradient:a.colorGradient,position:a.positions[b]});let c=L.circleMarker({lat:a.positions[b][0],lon:a.positions[b][1]},{radius:a.baseRadius*(parseInt(a.positions[b][4])+1),color:a.borderColor,fillColor:warp10ColorTools.rgb2hex(a.colorGradient[a.positions[b][5]].r,a.colorGradient[a.positions[b][5]].g,a.colorGradient[a.positions[b][5]].b),fillOpacity:1});this.layerGroup.addLayer(c),f.push(c)}break;case'weightedDots':for(let b,c=0;c<a.positions.length;c++)b=L.circleMarker({lat:a.positions[c][0],lon:a.positions[c][1]},{radius:a.baseRadius*(parseInt(a.positions[c][4])+1),color:a.borderColor,fillColor:a.color,fillOpacity:1}),this.layerGroup.addLayer(b),f.push(b);break;case'dots':default:for(let b,c=0;c<a.positions.length;c++)b=L.circleMarker({lat:a.positions[c][0],lon:a.positions[c][1]},{radius:a.baseRadius,color:a.borderColor,fillColor:a.color,fillOpacity:1}),this.layerGroup.addLayer(b),f.push(b);}return f}_removeMapData(){let a=this.$.map.map;a.removeLayer(this.layerGroup)}}customElements.define(Warp10DisplayMap.is,Warp10DisplayMap);</script><dom-module id="quantumviz-annotation" assetpath="../warp10-quantumviz/"><template><style>:host{display:block;}.annotation{position:relative;display:block;}.annotation svg{display:block;border:solid 1px black;height:20px;}.annotation-tooltip{position:absolute;min-width:200px;height:auto;padding:10px;background-color:rgba(255, 255, 255, 0.75);border-radius:10px;box-shadow:4px 4px 10px rgba(0, 0, 0, 0.4);pointer-events:none;z-index:1000;}.annotation-tooltip.hidden{display:none;}.annotation-tooltip p{margin:0;font-family:sans-serif;font-size:10pt;line-height:20px;}.gts-classname{color:#0074D9;}.gts-labelname{color:#3d9970;}.gts-separator{color:#bbbbbb;}.gts-labelvalue{color:#AAAAAA;font-style:italic;}</style><div class="annotation"><svg id="svg"></svg><div class="annotation-tooltip hidden"><p><strong class="timestamp"></strong></p><p><span class="name"></span> - <span class="value"></span></p></div></div></template></dom-module><script>class Warp10QuantumvizAnnotation extends Polymer.Element{static get is(){return'quantumviz-annotation'}static get properties(){return{width:{type:Number,value:-1},timeBounds:{type:Object,observer:'contentChanged'},chartArea:{type:Array,observer:'_changeDimensions'},annotation:{type:Array},vertGuide:{type:Number,notify:!0},selectedTimestamp:{type:Number,notify:!0,observer:'_selectedTimestampChanged',value:-1},debug:{type:Boolean,value:!1}}}connectedCallback(){super.connectedCallback(),this.SVG_MARGIN_LEFT=55,this.SVG_MARGIN_RIGHT=8,this.SVG_STROKE_WIDTH=0,this.NVD3_CHART_RIGHT_MARGIN=20,this.MAX_MARKER_WIDTH=10,this.setDimensions(),this.debug&&console.debug('[quantumviz-annotation] attached()'),this.isAttached=!0,this.contentChanged()}setDimensions(){this.dimensionAlreadyChanged||(this.debug&&console.debug('[quantumviz-annotation] setDimensions'),this.root.querySelector('.annotation').style.paddingLeft=this.SVG_MARGIN_LEFT+'px',this.root.querySelector('.annotation').style.paddingRight=this.SVG_MARGIN_RIGHT+'px',this.root.querySelector('.annotation').style.width='calc(100% -'+this.root.querySelector('.annotation').style.paddingLeft+' -'+this.root.querySelector('.annotation').style.paddingRight+');',this.root.querySelector('svg').style.width='100%')}_changeDimensions(){this.debug&&console.debug('[quantumviz-annotation] _changeDimensions',this.chartArea),this.root.querySelector('.annotation').style.paddingLeft=this.chartArea.x+'px',this.root.querySelector('svg').style.width=this.chartArea.w+'px',this.SVG_MARGIN_LEFT=this.chartArea.x,this.dimensionAlreadyChanged=!0}_selectedTimestampChanged(){this.debug&&console.debug('[quantumviz-annotation] _selectedTimestampChanged',this.selectedTimestamp)}contentChanged(){this.debug&&console.debug('[quantumviz-annotation] Content changed',this.annotation);let a=this;if(!this.isAttached||!this.timeBounds)return;this.debug&&console.debug('[quantumviz-annotation] Content changed - isAttached');let b,c=this.SVG_MARGIN_LEFT,e=this.SVG_STROKE_WIDTH,f=d3.select(a.root.querySelector('.annotation')),d=f.select('svg');b=0<this.root.querySelector('svg').getBoundingClientRect().width?this.root.querySelector('svg').getBoundingClientRect().width:this.root.querySelector('.annotation').getBoundingClientRect().width-this.SVG_MARGIN_LEFT-this.NVD3_CHART_RIGHT_MARGIN,this.debug&&(console.debug('[quantumviz-annotation] contentChanged - timeBounds',[this.timeBounds.min,this.timeBounds.max]),console.debug('[quantumviz-annotation] contentChanged - width',b,this.NVD3_CHART_RIGHT_MARGIN,this.root.querySelector('svg').definedWidth),console.debug('[quantumviz-annotation] annotation',this.annotation));let g=d3.scale.linear().domain([this.timeBounds.min,this.timeBounds.max]).range([0,b]),h=this.annotation,i=Math.max(b/h.values.length-2,1);this.debug&&console.debug('[quantumviz-annotation] markerWidth',i),i>this.MAX_MARKER_WIDTH&&(i=this.MAX_MARKER_WIDTH),this.debug&&(console.debug('[quantumviz-annotation] this.MAX_MARKER_WIDTH',this.MAX_MARKER_WIDTH),console.debug('[quantumviz-annotation] markerWidth',i));let j=(b)=>{a.selectedTimestamp=b.x,d3.select(this).attr('fill','orange'),d3.select(this).attr('stroke','orange'),f.select('.annotation-tooltip').select('.timestamp').text(d3.time.format.utc('%Y-%m-%dT%H:%M:%S.%LZ')(new Date(b.x))),f.select('.annotation-tooltip').select('.name').html(l(h.key)),f.select('.annotation-tooltip').select('.value').text(b.y),f.select('.annotation-tooltip').classed('hidden',!1);let d=f.select('.annotation-tooltip').node().getBoundingClientRect().width,j=g(b.x)+i/2+e/2+c-d/2;0>j&&(j=0);f.select('.annotation-tooltip').style('left',j+'px').style('bottom',30+'px'),this.debug&&console.debug('[quantumviz-annotation] annotationMouseover',{xPosition:j,x:b.x,scaledX:g(b.x),svgMarginLeft:c}),a.vertGuide=g(b.x)+c-e/2},k=()=>{a.selectedTimestamp=-1,d3.select(this).attr('fill',h.color),f.select('.annotation-tooltip').classed('hidden',!0),a.vertGuide=-1},l=(b)=>{let c=b.split(/\{[^}]*\}/);a.debug&&console.debug('[quantumviz-annotation] keyFormatter ',c);let d,e=[],f=/\{([^}]*)\}/g;for(;null!==(d=f.exec(b));)e.push(d[1]);a.debug&&console.debug('[quantumviz-annotation] keyFormatter ',e);let g='';return c.forEach((a,b)=>{if(g+='<span class="gts-classname">'+a+'</span>',e.length>b){g+='<span class="gts-separator">{</span>';let a=[];e[b].split(',').forEach(function(b){let c=b.split('='),d='<span class="gts-labelname">'+c[0]+'</span>';1<c.length&&(d+='<span class="gts-separator">=</span><span class="gts-labelvalue">'+c[1]+'</span>'),a.push(d)}),g+=a.join('<span class="gts-separator">,</span>')+'<span class="gts-separator">}</span>'}}),a.debug&&console.debug('[quantumviz-annotation] keyFormatter ',g),g};d.selectAll('rect').data(h.values).attr('x',function(a){return g(a.x)-i/2-e/2}).attr('y',0).attr('width',i).attr('height',20).attr('fill',h.color).attr('stroke',h.color).attr('stroke-width',e).on('mouseover',j).on('mouseout',k),d.selectAll('rect').data(h.values).enter().append('rect').attr('x',function(a){return g(a.x)-i/2-e/2}).attr('y',0).attr('width',i).attr('height',20).attr('fill',h.color).attr('stroke','white').attr('stroke-width',e).on('mouseover',j).on('mouseout',k)}}customElements.define(Warp10QuantumvizAnnotation.is,Warp10QuantumvizAnnotation);</script><dom-module id="quantumviz-annotations" assetpath="../warp10-quantumviz/"><template><style>:host{display:block;}quantumviz-annotation{margin-top:2px;margin-bottom:2px;}#spacer{height:50px;}</style><div id="annotations"><template is="dom-repeat" items="{{annotations}}" as="annotation"><quantumviz-annotation time-bounds="{{timeBounds}}" chart-area="{{chartArea}}" annotation="[[annotation]]" vert-guide="{{vertGuide}}" selected-timestamp="{{selectedTimestamp}}" timestamps="{{timestamps}}" debug="[[debug]]"></quantumviz-annotation></template></div></template></dom-module><script>class Warp10QuantumvizAnnotations extends Polymer.Element{static get is(){return'quantumviz-annotations'}static get properties(){return{data:{type:Object},annotations:{computed:'getAnnotations(data,_newData, timestamps)'},timeBounds:{type:Object},chartArea:{type:Array},vertGuide:{type:Number,notify:!0},selectedTimestamp:{type:Number,notify:!0,observer:'_selectedTimestampChanged',value:-1},timestamps:{type:Boolean,value:!1},debug:{type:Boolean,value:!1},_newData:{type:Number,value:0}}}static get observers(){return['dataChanged(data.*)']}connectedCallback(){super.connectedCallback(),this.attached=!0,this.debug&&console.debug('[quantumviz-annotations] width',this.width)}_selectedTimestampChanged(){this.debug&&console.debug('[quantumviz-annotations] _selectedTimestampChanged',this.selectedTimestamp)}contentChanged(){this.debug&&console.debug('[quantumviz-annotations] - contentChanged()');!this.attached||this.debug&&(console.debug('[quantumviz-annotations] bounds',this.timeBounds),console.debug('[quantumviz-annotations] annotations offset',this.$.annotations.offsetTop))}getAnnotations(){let a=quantumvizGts.getAnnotations(this.data,this.timestamps);return this.debug&&console.debug('[quantumviz-annotations] getAnnotations',a),a}dataChanged(){this.debug&&console.debug('[quantumviz-annotations] dataChanged',this.data),this._newData++}}customElements.define(Warp10QuantumvizAnnotations.is,Warp10QuantumvizAnnotations);</script><dom-module id="quantum-image-overlay"><template><style>:host{background:white;color:black;padding:24px;box-shadow:rgba(0, 0, 0, 0.24) -2.3408942051048403px 5.524510324047423px 12.090680100755666px 0, rgba(0, 0, 0, 0.12) 0 0 12px 0;}</style><div><img src="{{src}}"></div><div>{{caption}}</div></template></dom-module><script>class QuantumImageOverlay extends Polymer.mixinBehaviors([Polymer.IronOverlayBehavior],Polymer.Element){static get is(){return'quantum-image-overlay'}static get properties(){return{src:{type:String},caption:{type:String,value:''},debug:{type:Boolean,value:!1}}}ready(){super.ready(),this.addEventListener('iron-overlay-canceled',(a)=>this.onCancel(a))}onCancel(){this.debug&&console.debug('[quantum-image-overlay] onCancel',this.getAttribute('imageClicked')),this.removeAttribute('imageClicked')}}customElements.define(QuantumImageOverlay.is,QuantumImageOverlay);</script></div><dom-module id="quantum-plot"><template><style is="custom-style">:host{display:block;padding:30px;--app-primary-color:var(--google-blue-500);--app-secondary-color:black;--app-background-color:white;--app-on-background-color:white;}#vertGuide{width:0;height:100%;border:solid 1px #aaaaaa;z-index:500;position:absolute;left:250px;display:none;}.overlayGtsSelectorBox, .overlayGtsRegexBox{display:flex;flex-flow:row;justify-content:center;}.overlayGtsSelector, .overlayGtsRegex{display:flex;flex-flow:column;justify-content:center;}.overlayBox{display:flex;flex-flow:row;justify-content:center;font-size:1.2em;}.overlayContent{}.hotkey-key{background-color:#333;border:1px solid #333;border-radius:5px;box-shadow:0 1px 0 #666 inset, 0 1px 0 #bbb;color:#fff;display:inline-block;font-size:1em;margin-right:5px;padding:5px 9px;text-align:center;}.top-10{margin-top:10px;}.left{float:left;}.right{float:right;}.title{text-transform:capitalize;}.space-right{margin-right:16px;}paper-button{background-color:var(--app-primary-color);color:var(--app-on-background-color);}paper-toggle-button.timestamps{margin-left:10px;margin-right:10px;--paper-toggle-button-checked-bar-color:var(--app-primary-color);--paper-toggle-button-checked-button-color:var(--app-primary-color);--paper-toggle-button-checked-ink-color:var(--app-primary-color);--paper-toggle-button-unchecked-bar-color:var(--app-primary-color);--paper-toggle-button-unchecked-button-color:var(--app-primary-color);--paper-toggle-button-unchecked-ink-color:var(--app-primary-color);}.item_list{@apply --layout-horizontal;@apply --layout-center;@apply --layout-center-justified;@apply --layout-wrap;}.item:not(:first-child){margin-left:30px;}.item{margin-top:8px;margin-bottom:8px;}.item_name{color:var(--paper-grey-600);font-family:'Roboto', 'Noto', sans-serif;-webkit-font-smoothing:antialiased;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:12px;font-weight:400;letter-spacing:0.011em;line-height:20px;}.item_value{@apply --layout-horizontal;@apply --layout-center;@apply --layout-wrap;min-height:44px;}.clearfix:before,
      .clearfix:after{content:" ";display:table;}.clearfix:after{clear:both;}.title{text-transform:capitalize;}.spacer{height:200px;}.toolbar{@apply --layout-horizontal;@apply --layout-center;@apply --layout-end-justified;margin-bottom:10px;}.toolbar iron-icon{color:var(--app-primary-color);cursor:pointer;margin-left:10px;}.toolbar paper-tooltip{width:120px;text-align:center;}warp10-display-chart{margin-top:15px;width:100%;height:500px;}</style><iron-a11y-keys target="[[_target]]" keys="e" on-keys-pressed="_hotkeyEdit"></iron-a11y-keys><iron-a11y-keys id="hotkeyUp" target="[[_target]]" keys="k up" on-keys-pressed="_hotkeyUp"></iron-a11y-keys><iron-a11y-keys id="hotkeyDown" target="[[_target]]" keys="j down" on-keys-pressed="_hotkeyDown"></iron-a11y-keys><iron-a11y-keys target="[[_target]]" keys="space" on-keys-pressed="_hotkeySpace"></iron-a11y-keys><iron-a11y-keys target="[[_target]]" keys="a" on-keys-pressed="_hotkeyAll"></iron-a11y-keys><iron-a11y-keys target="[[_target]]" keys="n" on-keys-pressed="_hotkeyNone"></iron-a11y-keys><iron-a11y-keys target="[[_target]]" keys="r" on-keys-pressed="_hotkeyReload"></iron-a11y-keys><iron-a11y-keys target="[[_target]]" keys="/ help:keypress" on-keys-pressed="_hotkeyRegex"></iron-a11y-keys><iron-a11y-keys target="[[_target]]" keys="enter" on-keys-pressed="_hotkeyRegexEnter"></iron-a11y-keys><iron-a11y-keys target="[[_target]]" keys="h ?:keypress" on-keys-pressed="_hotkeyHelp"></iron-a11y-keys><warp10-simple-overlay id="warpscript-plot-keyboard-shortcuts-overlay" debug="[[debug]]"><div class="overlay-box"><h4>Keyboard Shortcuts:</h4><p><span class="hotkey-key">?</span>, <span class="hotkey-key">h</span> Show / hide this help menu</p><p><span class="hotkey-key">Esc</span> Close dialogs</p><p><span class="hotkey-key">e</span> Edit WarpScript</p><p><span class="hotkey-key">r</span> Reload data</p><p><span class="hotkey-key">k</span>, <span class="hotkey-key">up</span> Selection up</p><p><span class="hotkey-key">j</span>, <span class="hotkey-key">down</span> Selection down</p><p><span class="hotkey-key">space</span> Select/unselect</p><p><span class="hotkey-key">a</span> Select all</p><p><span class="hotkey-key">n</span> Select none</p><p><span class="hotkey-key">/</span> Select by regex</p></div></warp10-simple-overlay><quantum-image-overlay id="imageOverlay" debug="[[debug]]"></quantum-image-overlay><granite-spinner active="{{loading}}" size="200" hover=""></granite-spinner><div class="right"><paper-button id="btn_execute" class="btn btn-primary btn-lg" on-click="_hotkeyEdit">Edit WarpScript</paper-button></div><h2 class="title">{{name}}</h2><div class="toolbar right"><iron-icon id="helpButton" icon="help" on-click="_hotkeyHelp"></iron-icon><paper-tooltip id="helpButtonTooltip" for="helpButton" fit-to-visible-bounds="">Help</paper-tooltip></div><quantum-gts-tree id="gts-tree" data="{{_gtsStack}}" plotted-changed="{{changed}}" on-show-image="_handleShowImage" on-hide-image="_handleHideImage" debug="[[debug]]"></quantum-gts-tree><div id="vertGuide"></div><div class="toolbar"><div class="space-right">Show sparkline</div><paper-toggle-button checked="{{_showSparkline}}"></paper-toggle-button></div><template is="dom-if" if="{{_showSparkline}}"><quantumviz-annotations id="warp10-quantumviz-annotations" time-bounds="{{timeBounds}}" chart-area="{{chartArea}}" data="{{dataToPlot}}" vert-guide="{{vertGuide}}" width="{{_displayWidth}}" selected-timestamp="{{annotationsSelectedTimestamp}}" debug="[[debug]]" timestamps="{{timestamps}}"></quantumviz-annotations><warp10-display-chart id="warp10-display-chart" width="{{_displayWidth}}" height="500" data="{{dataToPlot}}" current-values="{{currentValues}}" time-bounds="{{timeBounds}}" chart-area="{{chartArea}}" debug="[[debug]]" timestamps="{{timestamps}}"></warp10-display-chart><template is="dom-if" if="{{_displayChart}}"><div class="item_list"><div class="item"><div class="item_name">Interpolation</div><paper-radio-group id="interpolationRadioGroup" selected="{{interpolationMode}}"><paper-radio-button id="interpolation_linear" name="linear">Linear</paper-radio-button><paper-radio-button id="interpolation_step" name="step-before">Step</paper-radio-button></paper-radio-group></div><div class="item"><div class="item_name">X-axis scale</div><div class="item_value">Date<paper-toggle-button checked="{{timestamps}}" class="timestamps"></paper-toggle-button>Timestamp</div></div></div></template></template><div class="toolbar"><div class="space-right">Show map</div><paper-toggle-button checked="{{_showMap}}"></paper-toggle-button></div><template is="dom-if" if="{{_showMap}}"><warp10-display-map data="[[dataToMap]]" zoom="12" debug="[[debug]]"></warp10-display-map></template><div class="spacer"></div><warp10-simple-overlay id="gts-select-overlay" debug="[[debug]]"><div class="overlayGtsSelectorBox"><div class="overlayGtsSelector"><template is="dom-repeat" items="{{stackedGtsListSlidingWindow}}" as="gts"><quantum-gts-in-selection-overlay gts="{{gts}}" stacked-gts-list="{{stackedGtsList}}" selected-gts="{{selectedGts}}" debug="[[debug]]" changed="{{changed}}"></quantum-gts-in-selection-overlay></template></div></div></warp10-simple-overlay><warp10-simple-overlay id="gtsRegexOverlay" debug="[[debug]]" on-iron-overlay-opened="_onRegexOverlayOpened" on-iron-overlay-closed="_onRegexOverlayClosed"><div class="overlayGtsRegexBox"><div class="overlayGtsRegex"><h2>Regex selector</h2><paper-input id="regexInput" label="Regex" type="text" value="{{_currentRegex}}"></paper-input><paper-button id="btn_execute" class="btn btn-primary btn-lg" on-click="selectRegex">Select</paper-button></div></div></warp10-simple-overlay><warp10-warpscript-caller id="warpscriptcaller" debug="[[debug]]" url="{{_baseUrl}}" warpscript="{{warpscript}}" on-response="_handleResponse" on-error="_handleError" loading="{{loading}}"></warp10-warpscript-caller></template><script>class QuantumVisualization extends Warp10QuantumModuleMixin(Polymer.Element){static get is(){return'quantum-plot'}static get properties(){return{warpscript:{type:String},stack:{type:Array},_gtsStack:{type:Array,computed:'_getGtsStack(stack)',observer:'_onStackChanged'},selected:{type:String,observer:'_onSelectedChanged'},interpolationMode:{type:String,observer:'_onInterpolationModeChanged',value:'linear'},_target:{type:Object,value:function(){return document.body}},vertGuide:{type:Number,observer:'_onVertGuideChanged'},selectedGts:{type:Number,value:-1},stackedGtsList:{type:Array},stackedGtsListSlidingWindow:{type:Array,computed:'getStackedGtsListSlidingWindow(stackedGtsList, selectedGts)'},_currentRegex:{type:String,observer:'_onCurrentRegexChanged'},_baseUrl:{type:String,computed:'_getBaseUrl(backend)'},_displayChart:{type:Boolean,computed:'_computeDisplayChart(dataToPlot)'},_displayMap:{type:Boolean,computed:'_computeDisplayMap(dataToMap)'},_showMap:{type:Boolean,value:!1},_showSparkline:{type:Boolean,value:!0},debug:{type:Boolean,value:!0}}}ready(){super.ready(),this.addEventListener('plotted-changed',(a)=>this._onPlottedChanged(a)),this.addEventListener('plotted-changed',(a)=>this._onMappedChanged(a))}connectedCallback(){super.connectedCallback(),this.debug&&console.debug('[quantum-plot] attached - target',this._target),this.init(),this.dataToPlot=[],this.debug&&(console.debug('[quantum-plot] attached - this',this),console.debug('[quantum-plot] attached - width',this.offsetWidth)),this._displayWidth=this.offsetWidth}_getBaseUrl(){return this.backend.url+this.backend.execEndpoint}_computeDisplayChart(){return this.debug&&console.debug('[quantum-plot] _computeDisplayChart',this.dataToPlot),0<this.dataToPlot.length&&this.dataToPlot[0].gts&&0<this.dataToPlot[0].gts.length}_computeDisplayMap(){return this.debug&&console.debug('[quantum-plot] _computeDisplayMap',this.dataToMap),0<this.dataToMap.length&&this.dataToMap[0].gts&&0<this.dataToMap[0].gts.length}_getGtsStack(){return gtsTools.gtsFromJSONList(this.stack)}_onVertGuideChanged(){0<this.vertGuide?(this.$.vertGuide.style.display='inline-block',this.$.vertGuide.style.left=30+this.vertGuide+'px',this.$.vertGuide.style.height=this.root.querySelector('#warp10-quantumviz-annotations').clientHeight+500+'px'):this.$.vertGuide.style.display='none'}_onStackChanged(){if(this.debug&&(console.debug('[quantum-plot] _onStackChanged',this._gtsStack),console.debug('[quantum-plot] _onStackChanged 2',gtsTools.flattenGtsIdArray(this._gtsStack))),this._gtsStack){let a=gtsTools.flattenGtsIdArray(this._gtsStack,[]);plottingTools.refresh(a),this.stackedGtsList=a,this.debug&&console.debug('[quantum-plot] _onStackChanged - do refresh',this.stackedGtsList),this.dispatchEvent(new CustomEvent('plotted-changed',{detail:plottingTools,bubbles:!0,composed:!0})),this.dataToMap=[{gts:this.stackedGtsList,params:[{render:'marker',color:this.setColor(this.stackedGtsList[0])},{render:'marker',color:this.setColor(this.stackedGtsList[1])}],globalParams:{interpolate:'cardinal'}}],console.debug('[quantum-map] _onStackChanged',this.dataToMap),this.dataToMap.slice()}}_onCurrentRegexChanged(){}_onSelectedChanged(a){this._target=a===this.name?document.body:null,this.debug&&console.debug('[quantum-plot] _onSelectedChanged',{selected:a,name:this.name,target:this._target,stack:this.stack})}_onInterpolationModeChanged(){this.debug&&console.debug('[quantum-plot] _onInterpolationModeChanged',this.interpolationMode),this.dispatchEvent(new CustomEvent('plotted-changed',{detail:plottingTools,bubbles:!0,composed:!0}))}_handleShowImage(a,b){let c=this.$.imageOverlay;'click'===b.type?c.setAttribute('imageClicked',!0):c.noCancelOnOutsideClick=!0,c.setAttribute('src',b.image),c.setAttribute('caption',b.caption),this.debug&&console.debug('[quantum-plot] let\'s open',c.opened),c.opened||c.open(),this.debug&&(console.debug('[quantum-plot] dialog.noCancelOnOutsideClick',c.noCancelOnOutsideClick),console.debug('[quantum-plot] and now it should be open',c.opened))}_handleHideImage(){let a=this.$.imageOverlay;a.noCancelOnOutsideClick=!1,a&&!a.getAttribute('imageClicked')&&a.cancel()}_handleResponse(a,b){return this.debug&&console.debug('[quantum-plot] _handleResponse - response',b),b.stack&&b.stack instanceof Array?void(this.stack=b.stack,this.debug&&console.debug('[quantum-plot] _handleResponse',this.stack),this.dataToMap=[{gts:this.stack[0],params:[{render:'marker'},{render:'marker'}],globalParams:{interpolate:'cardinal'}}],this.debug&&console.debug('[quantum-map] _handleResponse',this.dataToMap)):void(this.stack=null)}_onMappedChanged(a){this.dataToMap=[{gts:a.detail.data,params:a.detail.params,globalParams:{interpolate:this.interpolationMode}}],this.debug&&console.debug('[quantum-map] _onMappedChanged',this.dataToMap)}_onPlottedChanged(a){this.dataToPlot=[{gts:a.detail.data,params:a.detail.params,globalParams:{interpolate:this.interpolationMode}}],this.debug&&console.debug('[quantum-plot] _onPlottedChanged',this.dataToPlot)}_showSelectionOverlay(){this.selectedMode=!0,this.root.querySelector('#gts-select-overlay').open(),this.overlay.timerActivate()}_showRegexOverlay(){this.debug&&console.debug('[quantum-plot] _showRegexOverlay'),this._regexMode=!0,this._regexJustShown=!0,this.$.gtsRegexOverlay.open()}_hideSelectionOverlay(){this.selectedMode=!1,this.root.querySelector('#gts-select-overlay').close()}_onRegexOverlayOpened(){this._regexModeJustOpened=!0,this.$.regexInput.inputElement.focus(),this.$.regexInput.$.input.select(),this.debug&&console.debug('[quantum-plot] _showRegexOverlay',this.$.regexInput.focused)}_onRegexOverlayClosed(){this._regexMode=!1}init(){this.debug&&console.debug('[quantum-plot] attached() - this.stack',this.stack),this.stackedGtsListHalfLimit=3,this.stack?(this._onStackChanged(this.stack),this.dataToMap=[{gts:this.stack[0],params:[{render:'marker'},{render:'marker'}],globalParams:{interpolate:'cardinal'}}]):this.$.warpscriptcaller.generateRequest(),this.overlay={lifetime:5e3,timer:null,timerActivate:function(){null!==this.overlay.timer&&window.clearTimeout(this.overlay.timer),this.overlay.timer=window.setTimeout(function(){this._hideSelectionOverlay()}.bind(this),this.overlay.lifetime)}.bind(this)}}getStackedGtsListSlidingWindow(){let a,b;return this.stackedGtsList?this.stackedGtsList.length<1+2*this.stackedGtsListHalfLimit?this.stackedGtsList:(this.selectedGts<this.stackedGtsListHalfLimit?(b=0,a=2*this.stackedGtsListHalfLimit):this.selectedGts>this.stackedGtsList.length-this.stackedGtsListHalfLimit-1?(b=this.stackedGtsList.length-1-2*this.stackedGtsListHalfLimit,a=this.stackedGtsList.length-1):(b=this.selectedGts-this.stackedGtsListHalfLimit,a=this.selectedGts+this.stackedGtsListHalfLimit),this.stackedGtsList.slice(b,a+1)):[]}setColor(a){return this.debug&&console.debug('[quantum-gts-in-selection-overlay] setColor',this.gts),plottingTools.gtsColor(a)}selectRegex(){let a,b,c,d;for(d=this.stackedGtsList,this.debug&&console.debug('[quantum-plot] selectRegex called with regex','/'+this._currentRegex+'/',d),(b=0,c=d.length);b<c;b++)a=d[b],this.debug&&console.debug('[quantum-plot] selectRegex - matching',a,gtsTools.serializeGtsMetadata(a),gtsTools.serializeGtsMetadata(a).match(''+this._currentRegex)),gtsTools.serializeGtsMetadata(a).match(''+this._currentRegex)&&(this.debug&&console.debug('[quantum-plot] gts selected by regex',gtsTools.serializeGtsMetadata(a)),plottingTools.add(a));this.changed++,this.dispatchEvent(new CustomEvent('plotted-changed',{detail:plottingTools,bubbles:!0,composed:!0})),this.$.gtsRegexOverlay.close()}_hotkeyEdit(){this.debug&&console.debug('[quantum-plot] _hotkey edit',this.warpscript),this._regexMode||this.dispatchEvent(new CustomEvent('edit',{detail:{warpscript:this.warpscript,stack:this.stack,backend:this.backend}}))}_hotkeyUp(){this.debug&&console.debug('[quantum-plot] _hotkey up'),this._regexMode||(this.debug&&console.debug('[quantum-plot] _hotkey up'),this._showSelectionOverlay(),(null===this.selectedGts||0>this.selectedGts)&&(this.selectedGts=0),0<this.selectedGts&&(this.selectedGts-=1))}_hotkeyDown(){this.debug&&console.debug('[quantum-plot] _hotkey down'),this._regexMode||(this.debug&&console.debug('[quantum-plot] _hotkey down'),this._showSelectionOverlay(),null===this.selectedGts||0>this.selectedGts?this.selectedGts=0:this.stackedGtsList.length>this.selectedGts+1&&(this.selectedGts+=1,this.debug&&console.debug('length '+this.stackedGtsList.length+' selected '+this.selectedGts)))}_hotkeyRegex(){this._regexMode||this._showRegexOverlay()}_hotkeyRegexEnter(){this.debug&&console.debug('[quantum-plot] _hotkeyRegexEnter - regexMode',this._regexMode),this._regexMode&&(this.debug&&console.debug('[quantum-plot] _hotkeyRegexEnter'),this.selectRegex())}_hotkeySpace(){if(this.debug&&console.debug('[quantum-plot] _hotkeySpace'),!this._regexMode){this._showSelectionOverlay(),0>this.selectedGts&&(this.selectedGts=0);let a=this.stackedGtsList[this.selectedGts];plottingTools.isPlotted(a)?(plottingTools.remove(a),this.debug&&console.debug('[quantum-plot] removeFromPlot',plottingTools)):(plottingTools.add(a),this.debug&&console.debug('[quantum-plot] addToPlot',plottingTools)),this.changed++,this.dispatchEvent(new CustomEvent('plotted-changed',{detail:plottingTools,bubbles:!0,composed:!0}))}}_hotkeyAll(){if(!this._regexMode){for(let a in this.debug&&console.debug('[quantum-plot] _hotkeyAll'),this.stackedGtsList)if(this.stackedGtsList.hasOwnProperty(a)){let b=this.stackedGtsList[a];plottingTools.isPlotted(b)||(plottingTools.add(b),this.debug&&console.debug('[quantum-plot] addToPlot',plottingTools))}this.changed++,this.dispatchEvent(new CustomEvent('plotted-changed',{detail:plottingTools,bubbles:!0,composed:!0}))}}_hotkeyNone(){if(!this._regexMode){for(let a in this.debug&&console.debug('[quantum-plot] _hotkeyNone'),this.stackedGtsList)if(this.stackedGtsList.hasOwnProperty(a)){let b=this.stackedGtsList[a];plottingTools.isPlotted(b)&&(plottingTools.remove(b),this.debug&&console.debug('[quantum-plot] removeFromPlot',plottingTools))}this.changed++,this.dispatchEvent(new CustomEvent('plotted-changed',{detail:plottingTools,bubbles:!0,composed:!0}))}}_hotkeyReload(){this._regexMode||(this.debug&&console.debug('[quantum-plot] _hotkey r'),this.$.warpscriptcaller.generateRequest())}_hotkeyHelp(){this.debug&&console.debug('[quantum-plot] _hotkeyHelp'),this._regexMode||(this.debug&&console.debug('[quantum-plot] _hotkeyHelp'),this.root.querySelector('#warpscript-plot-keyboard-shortcuts-overlay').opened?this.root.querySelector('#warpscript-plot-keyboard-shortcuts-overlay').close():this.root.querySelector('#warpscript-plot-keyboard-shortcuts-overlay').open())}}customElements.define(QuantumVisualization.is,QuantumVisualization);</script></dom-module><dom-module id="quantum-gts-in-selection-overlay"><template><style>:host{display:block;}div{padding:10px;}.color-dot{border-radius:50%;background-color:#bbbbbb;display:inline-block;width:12px;height:12px;margin-left:5px;margin-right:5px;}.gts-classname{color:#174771;}.gts-labelname{color:#2c5e48;}.gts-separator{color:#777777;}.gts-labelvalue{color:#333333;font-style:italic;}</style><div style$="{{selectedStyle}}"><span class="color-dot" style$="{{color}}"></span> <span class="gts-classname">{{gts.c}}</span> <span class="gts-separator">{</span><template is="dom-repeat" items="{{_toArray(gts.l)}}" as="label"><span><span class="gts-labelname">{{label.name}}</span> <span class="gts-separator">=</span> <span class="gts-labelvalue">{{label.value}}</span> <span hidden$="{{_lastIndex(index, gts.l)}}">,</span></span></template><span class="gts-separator">}</span></div></template><script>class QuantumGTSInSelectionOverlay extends Polymer.Element{static get is(){return'quantum-gts-in-selection-overlay'}static get properties(){return{gts:{type:Object},stackedGtsList:{type:Array},selectedGts:{type:Number},selectedStyle:{type:Object,computed:'setSelectedStyle(selectedGts, gts, stackedGtsList)'},changed:{type:Number},color:{type:String,computed:'setColor(selectedGts,gts, changed)'},debug:{type:Boolean,value:!1}}}setColor(){return this.debug&&console.debug('[quantum-gts-in-selection-overlay] setColor',plottingTools.gtsColor(this.gts)),plottingTools.gtsColor(this.gts)}setSelectedStyle(){return this.debug&&(console.debug('[quantum-gts-in-selection-overlay] setSelectedStyle - selectedGts',this.selectedGts),console.debug('[quantum-gts-in-selection-overlay] setSelectedStyle - gts',this.gts),console.debug('[quantum-gts-in-selection-overlay] setSelectedStyle - stackedGtsList',this.stackedGtsList)),0>this.selectedGts?'':this.stackedGtsList[this.selectedGts].id===this.gts.id?(this.debug&&console.debug('[quantum-plot] Selected gts',this.gts.id),'background-color:rgba(200,200,200,0.5);'):''}_toArray(a){return Object.keys(a).map(function(b){return{name:b,value:a[b]}})}_lastIndex(a,b){let c=this._toArray(b);return a===c.length-1}_stringify(a){return JSON.stringify(a)}}customElements.define(QuantumGTSInSelectionOverlay.is,QuantumGTSInSelectionOverlay);</script></dom-module></body></html>