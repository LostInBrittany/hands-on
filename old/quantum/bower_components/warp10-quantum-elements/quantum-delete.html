<html><head></head><body><dom-module id="quantum-delete"><template><style>:host{display:block;padding:30px;--app-primary-color:var(--google-blue-500);--app-secondary-color:black;--app-background-color:white;--app-on-background-color:white;}.top-10{margin-top:10px;}.right{float:right;}#editor{min-height:300px;font-size:14px;}#token, #selector{width:100%;}h4{font-weight:bold;}granite-alert[hidden]{display:none;}paper-button{background-color:var(--app-primary-color);color:var(--app-on-background-color);}granite-spinner{z-index:100;}</style><style>.item{margin-top:8px;margin-bottom:8px;}.item_name{color:var(--paper-grey-600);font-family:'Roboto', 'Noto', sans-serif;-webkit-font-smoothing:antialiased;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:12px;font-weight:400;letter-spacing:0.011em;line-height:20px;}.item_value{@apply --layout-horizontal;@apply --layout-center;@apply --layout-wrap;}.clearfix:before,
      .clearfix:after{content:" ";display:table;}.clearfix:after{clear:both;}.title{text-transform:capitalize;}#chooseDeleteMethod{margin-top:15px;}#chooseDeleteMethod > .item_value > *:first-child{margin-right:15px;}#chooseDeleteMethod paper-toggle-button{--paper-toggle-button-checked-bar-color:var(--app-primary-color);--paper-toggle-button-checked-button-color:var(--app-primary-color);--paper-toggle-button-checked-ink-color:var(--app-primary-color);--paper-toggle-button-unchecked-bar-color:var(--app-primary-color);--paper-toggle-button-unchecked-button-color:var(--app-primary-color);--paper-toggle-button-unchecked-ink-color:var(--app-primary-color);}</style><h2 class="title">{{name}}</h2><granite-spinner active="{{loading}}" size="200" hover=""></granite-spinner><div class="top-10"><paper-input auto-validate="" prevent-invalid-input="" always-float-label="" name="token" label="{{localize('writeToken')}}" type="text" value="{{token}}" required=""></paper-input></div><div class="top-10"><paper-input auto-validate="" prevent-invalid-input="" always-float-label="" name="selector" label="{{localize('selector')}}" type="text" value="{{selector}}" required=""></paper-input></div><div id="chooseDeleteMethod" class="top-10 item"><div class="item_name">{{localize('deleteMethod')}}</div><div class="item_value"><div>{{localize('deleteByDate')}}</div><div><paper-toggle-button checked="{{deleteAll}}"></paper-toggle-button></div><div>{{localize('deleteAll')}}</div></div></div><template is="dom-if" if="{{!deleteAll}}"><div id="chooseTimespan" class="top-10 item"><paper-input auto-validate="" prevent-invalid-input="" always-float-label="" name="selector" label="{{localize('startTime')}}" type="text" value="{{startTime}}" validator="warp10-iso-date-time-or-timestamp-validator" required=""></paper-input><paper-input auto-validate="" prevent-invalid-input="" always-float-label="" name="selector" label="{{localize('endTime')}}" type="text" value="{{endTime}}" validator="warp10-iso-date-time-or-timestamp-validator" required=""></paper-input></div></template><div class="top-10"><div class="right"><paper-button id="btn_execute" class="btn btn-primary btn-lg" on-click="execute" disabled$="{{_disabled}}">{{localize('execute')}}</paper-button></div></div><div class="clearfix"></div><div class="top-10"><granite-alert level="danger" hidden$="{{!_hasAnError}}">{{errorMsg}}</granite-alert><granite-alert level="success" hidden$="{{!_hasAResponse}}">{{data}}</granite-alert></div><iron-ajax id="xhr" url="{{_baseUrl}}" method="GET" handle-as="json" on-response="_handleResponse" on-error="_handleError"></iron-ajax><warp10-iso-date-time-or-timestamp-validator debug="[[debug]]"></warp10-iso-date-time-or-timestamp-validator></template><script>class QuantumDelete extends Warp10QuantumModuleMixin(Polymer.mixinBehaviors([Polymer.AppLocalizeBehavior],Polymer.Element)){static get is(){return'quantum-delete'}static get properties(){return{token:{type:String,value:''},selector:{type:String,value:''},_baseUrl:{type:String,computed:'_getBaseUrl(backend)'},_disabled:{type:Boolean,computed:'_isDisabled(token, selector)'},deleteAll:{type:Boolean,value:!1},startTime:{type:String},endTime:{type:String},language:{value:'en'},resources:{type:Object,value:function(){return{en:{title:'Delete',writeToken:'Write token',selector:'Selector to delete',execute:'Execute',deleteAll:'Delete all',deleteByDate:'By date',deleteMethod:'Choose delete mode:',startTime:'Start time (in ISO 8601 format or in \u03BCs since Epoch)',endTime:'End time (in ISO 8601 format or in \u03BCs since Epoch)'}}}},debug:{type:Boolean,value:!1}}}ready(){super.ready(),this._hasAnError=0,this._hasAResponse=0}_getBaseUrl(){return this.debug&&console.log('[quantum-delete] _getBaseUrl',this.backend),this.backend.url+this.backend.deleteEndpoint}_isDisabled(){return!this.token||!this.selector}execute(){let a=this.backend.headerName+'-Token';this.$.xhr.params={selector:this.selector},this.deleteAll?this.$.xhr.params.deleteall=!0:(this.$.xhr.params.start=this.startTime,this.$.xhr.params.end=this.endTime),this.$.xhr.headers={},this.$.xhr.headers[a]=this.token,this.debug&&console.log('[quantum-delete] _doCall - headers',this.$.xhr.headers),this.$.xhr.generateRequest()}_editorChangeAction(a,b){this.dispatchEvent(new CustomEvent('editor-content',{detail:{value:a,oldValue:b}})),this.content=a.detail.value,this.debug&&console.log('[quantum-delete] Ide content changed',this.content)}_handleResponse(a,b){this.debug&&console.log('[quantum-delete] _handleResponse - Updated!',b.response),this._hasAResponse=!0,this._hasAnError=!1,this.data=b.response}_handleError(a,b){this.debug&&console.log('[quantum-delete] _handleError - Updated!',b),this._hasAResponse=!1,this._hasAnError=!0,this.data=null,this.errorMsg=b.request.statusText||'Unkown error'}}customElements.define(QuantumDelete.is,QuantumDelete);</script></dom-module></body></html>